{"content":"bG9jYWwgdXNlcm5hbWUgPSAiYm96byINCmxvY2FsIGJ1aWxkID0gIk5pZ2h0bHkiLS1fRy5hc3RyYSBhbmQgbG9hZGVyX2RlY29kZV9zdHJpbmcobG9hZGVyX2dldF91c2VyX2J1aWxkKCkpIG9yICJQcml2YXRlIg0KbG9jYWwgZnVuY3Rpb24gdHJ5X3JlcXVpcmUobW9kdWxlLCBtc2cpDQogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gcGNhbGwocmVxdWlyZSwgbW9kdWxlKQ0KICAgIGlmIHN1Y2Nlc3MgdGhlbiByZXR1cm4gcmVzdWx0IGVsc2UgcmV0dXJuIGVycm9yKG1zZykgZW5kDQplbmQNCmxvY2FsIGltYWdlcyA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvaW1hZ2VzIiwgIkRvd25sb2FkIGltYWdlcyBsaWJyYXJ5OiBodHRwczovL2dhbWVzZW5zZS5wdWIvZm9ydW1zL3ZpZXd0b3BpYy5waHA/aWQ9MjI5MTciKQ0KbG9jYWwgYml0ID0gdHJ5X3JlcXVpcmUoImJpdCIpDQpsb2NhbCBiYXNlNjQgPSB0cnlfcmVxdWlyZSgiZ2FtZXNlbnNlL2Jhc2U2NCIsICJEb3dubG9hZCBiYXNlNjQgZW5jb2RlL2RlY29kZSBsaWJyYXJ5OiBodHRwczovL2dhbWVzZW5zZS5wdWIvZm9ydW1zL3ZpZXd0b3BpYy5waHA/aWQ9MjE2MTkiKQ0KbG9jYWwgYW50aWFpbV9mdW5jcyA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvYW50aWFpbV9mdW5jcyIsICJEb3dubG9hZCBhbnRpLWFpbSBmdW5jdGlvbnMgbGlicmFyeTogaHR0cHM6Ly9nYW1lc2Vuc2UucHViL2ZvcnVtcy92aWV3dG9waWMucGhwP2lkPTI5NjY1IikNCmxvY2FsIGZmaSA9IHRyeV9yZXF1aXJlKCJmZmkiLCAiRmFpbGVkIHRvIHJlcXVpcmUgRkZJLCBwbGVhc2UgbWFrZSBzdXJlIEFsbG93IHVuc2FmZSBzY3JpcHRzIGlzIGVuYWJsZWQhIikNCmxvY2FsIHZlY3RvciA9IHRyeV9yZXF1aXJlKCJ2ZWN0b3IiLCAiTWlzc2luZyB2ZWN0b3IiKQ0KbG9jYWwgaHR0cCA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvaHR0cCIsICJEb3dubG9hZCBIVFRQIGxpYnJhcnk6IGh0dHBzOi8vZ2FtZXNlbnNlLnB1Yi9mb3J1bXMvdmlld3RvcGljLnBocD9pZD0yMTYxOSIpDQpsb2NhbCBjbGlwYm9hcmQgPSB0cnlfcmVxdWlyZSgiZ2FtZXNlbnNlL2NsaXBib2FyZCIsICJEb3dubG9hZCBDbGlwYm9hcmQgbGlicmFyeTogaHR0cHM6Ly9nYW1lc2Vuc2UucHViL2ZvcnVtcy92aWV3dG9waWMucGhwP2lkPTI4Njc4IikNCmxvY2FsIGVudCA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvZW50aXR5IiwgIkRvd25sb2FkIEVudGl0eSBPYmplY3QgbGlicmFyeTogaHR0cHM6Ly9nYW1lc2Vuc2UucHViL2ZvcnVtcy92aWV3dG9waWMucGhwP2lkPTI3NTI5IikNCmxvY2FsIGNzZ29fd2VhcG9ucyA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvY3Nnb193ZWFwb25zIiwgIkRvd25sb2FkIENTOkdPIHdlYXBvbiBkYXRhIGxpYnJhcnk6IGh0dHBzOi8vZ2FtZXNlbnNlLnB1Yi9mb3J1bXMvdmlld3RvcGljLnBocD9pZD0xODgwNyIpDQpsb2NhbCBjX2VudGl0eSA9IHJlcXVpcmUoImdhbWVzZW5zZS9lbnRpdHkiKQ0KbG9jYWwgc3RlYW13b3JrcyA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2Uvc3RlYW13b3JrcyIpIG9yIGVycm9yKCdNaXNzaW5nIGh0dHBzOi8vZ2FtZXNlbnNlLnB1Yi9mb3J1bXMvdmlld3RvcGljLnBocD9pZD0yNjUyNicpDQpsb2NhbCBsdWFuYW1lID0gIkxBQ09OSVNNIg0KbG9jYWwgbHVhYnVpbGQgPSAicGVyZmVjdCINCmxvY2FsIGludmVydCA9IHRydWUNCmxvY2FsIHZhbHVlID0gMA0KZnVuY3Rpb24gc3dheSgpDQogICAgaWYgaW52ZXJ0ID09IHRydWUgdGhlbg0KICAgICAgICB2YWx1ZSA9IHZhbHVlICsgMQ0KDQogICAgICAgIGlmIHZhbHVlID4gMjU1IHRoZW4gDQogICAgICAgICAgICBpbnZlcnQgPSBmYWxzZQ0KICAgICAgICBlbmQNCg0KICAgIGVsc2UNCiAgICAgICAgdmFsdWUgPSB2YWx1ZSAtIDENCiAgICAgICAgaWYgdmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICBpbnZlcnQgPSB0cnVlDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiB2YWx1ZQ0KZW5kDQotLSBIZWxwZnVsIEZDUw0KZnVuY3Rpb24gbGVycChhLCBiLCB0KQ0KICAgIGlmIG5vdCBiIG9yIG5vdCBhIG9yIG5vdCB0IHRoZW4gcmV0dXJuIGVuZA0KICAgIHJldHVybiBhICsgKGIgLSBhKSAqIHQNCmVuZA0KZnVuY3Rpb24gdWkubXVsdGlSZWZlcmVuY2UodGFiLCBncm91cGJveCwgbmFtZSkNCiAgICBsb2NhbCByZWYxLCByZWYyLCByZWYzID0gdWkucmVmZXJlbmNlKHRhYiwgZ3JvdXBib3gsIG5hbWUpDQogICAgcmV0dXJuIHsgcmVmMSwgcmVmMiwgcmVmMyB9DQplbmQNCnJnYmFfdG9faGV4ID0gZnVuY3Rpb24ociwgZywgYiwgYSkNCiAgICByZXR1cm4gYml0LnRvaGV4KChtYXRoLmZsb29yKHIgKyAwLjUpICogMTY3NzcyMTYpICsgKG1hdGguZmxvb3IoZyArIDAuNSkgKiA2NTUzNikgKyAobWF0aC5mbG9vcihiICsgMC41KSAqIDI1NikgKyAobWF0aC5mbG9vcihhICsgMC41KSkpDQplbmQNCmZ1bmMgPSB7DQogICAgdGFibGVfY29udGFpbnMgPSBmdW5jdGlvbih0YmwsIHZhbHVlKQ0KICAgICAgICBmb3IgaSA9IDEsICN0YmwgZG8NCiAgICAgICAgICAgIGlmIHRibFtpXSA9PSB2YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kLA0KICAgIGluY2x1ZGVzID0gZnVuY3Rpb24odGJsLCB2YWx1ZSkNCiAgICAgICAgZm9yIGkgPSAxLCAjdGJsIGRvDQogICAgICAgICAgICBpZiB0YmxbaV0gPT0gdmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZCwNCn0NCmFuaW1hdGVfdGV4dCA9IGZ1bmN0aW9uKHRpbWUsIHN0cmluZywgciwgZywgYiwgYSwgcjIsIGcyLCBiMiwgYTIpDQogICAgbG9jYWwgbSwgbiwgbywgcCA9IHIyLCBnMiwgYjIsIGEyDQogICAgbG9jYWwgdF9vdXQgPSB7fQ0KICAgIGxvY2FsIGwgPSBzdHJpbmc6bGVuKCkgLSAxDQogICAgbG9jYWwgcl9hZGQgPSAobSAtIHIpDQogICAgbG9jYWwgZ19hZGQgPSAobiAtIGcpDQogICAgbG9jYWwgYl9hZGQgPSAobyAtIGIpDQogICAgbG9jYWwgYV9hZGQgPSAocCAtIGEpDQoNCiAgICBmb3IgaSA9IDEsICNzdHJpbmcgZG8NCiAgICAgICAgbG9jYWwgaXRlciA9IChpIC0gMSkgLyAoI3N0cmluZyAtIDEpICsgdGltZQ0KICAgICAgICB0X291dFsjdF9vdXQgKyAxXSA9ICJcYSIgLi4gcmdiYV90b19oZXgociArIHJfYWRkICogbWF0aC5hYnMobWF0aC5jb3MoaXRlcikpLCBnICsgZ19hZGQgKiBtYXRoLmFicyhtYXRoLmNvcyhpdGVyKSksIGIgKyBiX2FkZCAqIG1hdGguYWJzKG1hdGguY29zKGl0ZXIpKSwgYSArIGFfYWRkICogbWF0aC5hYnMobWF0aC5jb3MoaXRlcikpKQ0KICAgICAgICB0X291dFsjdF9vdXQgKyAxXSA9IHN0cmluZzpzdWIoaSwgaSkNCiAgICBlbmQNCg0KICAgIHJldHVybiB0YWJsZS5jb25jYXQodF9vdXQpDQplbmQNCg0KZnVuY3Rpb24gYW5pbWF0ZV9jb2xvcih0aW1lLCByLCBnLCBiLCBhLCByMiwgZzIsIGIyLCBhMikNCiAgICBsb2NhbCBmaW5pc2hlZCA9IGZhbHNlDQogICAgbG9jYWwgbmV3UiwgbmV3RywgbmV3QiwgbmV3QSA9IHIsIGcsIGIsIGENCiAgICBpZiBuZXdSID09IHIyIGFuZCBuZXdHID09IGcyIGFuZCBuZXdCID09IGIyIGFuZCBuZXdBID09IGEyIHRoZW4NCiAgICAgICAgbmV3UiA9IGxlcnAociwgcjIsIHRpbWUpDQogICAgICAgIG5ld0cgPSBsZXJwKGcsIGcyLCB0aW1lKQ0KICAgICAgICBuZXdCID0gbGVycChiLCBiMiwgdGltZSkNCiAgICAgICAgbmV3QSA9IGxlcnAoYSwgYTIsIHRpbWUpDQogICAgZWxzZQ0KICAgICAgICBuZXdSID0gbGVycChyMiwgciwgdGltZSkNCiAgICAgICAgbmV3RyA9IGxlcnAoZzIsIGcsIHRpbWUpDQogICAgICAgIG5ld0IgPSBsZXJwKGIyLCBiLCB0aW1lKQ0KICAgICAgICBuZXdBID0gbGVycChhMiwgYSwgdGltZSkNCiAgICBlbmQNCiAgICByZXR1cm4gbmV3UiwgbmV3RywgbmV3QiwgbmV3QQ0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIHRyYXZlcnNlX3RhYmxlKHRibCwgcHJlZml4KQ0KICAgIHByZWZpeCA9IHByZWZpeCBvciAiIg0KICAgIGxvY2FsIHN0YWNrID0ge3t0YmwsIHByZWZpeH19DQoNCiAgICB3aGlsZSAjc3RhY2sgPiAwIGRvDQogICAgICAgIGxvY2FsIGN1cnJlbnQgPSB0YWJsZS5yZW1vdmUoc3RhY2spDQogICAgICAgIGxvY2FsIGN1cnJlbnRfdGJsID0gY3VycmVudFsxXQ0KICAgICAgICBsb2NhbCBjdXJyZW50X3ByZWZpeCA9IGN1cnJlbnRbMl0NCg0KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBwYWlycyhjdXJyZW50X3RibCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGZ1bGxfa2V5ID0gY3VycmVudF9wcmVmaXggLi4ga2V5DQogICAgICAgICAgICBpZiB0eXBlKHZhbHVlKSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc3RhY2ssIHt2YWx1ZSwgZnVsbF9rZXkgLi4gIi4ifSkNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAtLSDQn9GA0LjQvNC10L3Rj9C10LwgdWkuc2V0X3Zpc2libGUg0Log0LrQsNC20LTQvtC80YMg0Y3Qu9C10LzQtdC90YLRgw0KICAgICAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKHZhbHVlLCBmYWxzZSkgLS0g0JfQtNC10YHRjCDQvNC+0LbQvdC+INC40LfQvNC10L3QuNGC0Ywg0L/QsNGA0LDQvNC10YLRgCDQstC40LTQuNC80L7RgdGC0Lgg0L3QsCDQvdGD0LbQvdC+0LUg0LfQvdCw0YfQtdC90LjQtQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCmxvY2FsIGZ1bmN0aW9uIHRyYXZlcnNlX3RhYmxlX29uKHRibCwgcHJlZml4KQ0KICAgIHByZWZpeCA9IHByZWZpeCBvciAiIg0KICAgIGxvY2FsIHN0YWNrID0ge3t0YmwsIHByZWZpeH19DQoNCiAgICB3aGlsZSAjc3RhY2sgPiAwIGRvDQogICAgICAgIGxvY2FsIGN1cnJlbnQgPSB0YWJsZS5yZW1vdmUoc3RhY2spDQogICAgICAgIGxvY2FsIGN1cnJlbnRfdGJsID0gY3VycmVudFsxXQ0KICAgICAgICBsb2NhbCBjdXJyZW50X3ByZWZpeCA9IGN1cnJlbnRbMl0NCg0KICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBwYWlycyhjdXJyZW50X3RibCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGZ1bGxfa2V5ID0gY3VycmVudF9wcmVmaXggLi4ga2V5DQogICAgICAgICAgICBpZiB0eXBlKHZhbHVlKSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc3RhY2ssIHt2YWx1ZSwgZnVsbF9rZXkgLi4gIi4ifSkNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAtLSDQn9GA0LjQvNC10L3Rj9C10LwgdWkuc2V0X3Zpc2libGUg0Log0LrQsNC20LTQvtC80YMg0Y3Qu9C10LzQtdC90YLRgw0KICAgICAgICAgICAgICAgIHVpLnNldF92aXNpYmxlKHZhbHVlLCB0cnVlKSAtLSDQl9C00LXRgdGMINC80L7QttC90L4g0LjQt9C80LXQvdC40YLRjCDQv9Cw0YDQsNC80LXRgtGAINCy0LjQtNC40LzQvtGB0YLQuCDQvdCwINC90YPQttC90L7QtSDQt9C90LDRh9C10L3QuNC1DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCi0tIEFOSU0gT04gTE9BRA0KbG9jYWwgeSA9IDANCmxvY2FsIGFscGhhID0gMA0KbG9jYWwgc3RhcnR1cF9hbmltID0gdHJ1ZQ0KbG9jYWwgY2h1aiA9IHRydWUNCmxvY2FsIHNob3dfdGV4dCA9IGZhbHNlDQoNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygncGFpbnRfdWknLCBmdW5jdGlvbigpDQogICAgbG9jYWwgc2NyZWVuID0gdmVjdG9yKGNsaWVudC5zY3JlZW5fc2l6ZSgpKQ0KICAgIGxvY2FsIHNpemUgPSB2ZWN0b3Ioc2NyZWVuLngsIHNjcmVlbi55KQ0KDQogICAgaWYgc3RhcnR1cF9hbmltID09IHRydWUgdGhlbg0KICAgICAgICBsb2NhbCBzdGFydCwgZW4gPSB7MTg0LCAxODQsIDE4NCwgYWxwaGF9LCB7NjIsIDYyLCA2MiwgMTAwfQ0KICAgICAgICBsb2NhbCB0ZXh0ID0gIndlbGNvbWUgYmFjayEiDQogICAgICAgIGxvY2FsIHJvdGF0aW9uID0gbGVycCgwLCAzNjAsIGdsb2JhbHMucmVhbHRpbWUoKSAlIDEpDQogICAgICAgIGlmIGNodWogPT0gdHJ1ZSB0aGVuDQogICAgICAgIGFscGhhID0gbGVycChhbHBoYSwgMjU1LCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgICAgIGVuZA0KCSAgICByZW5kZXJlci5ibHVyKDAsMCxzaXplLngsIHNpemUueSkNCiAgICAgICAgDQogICAgICAgIHJlbmRlcmVyLnRleHQoc2NyZWVuLngvMiwgc2NyZWVuLnkvMiArNTAsIDI1NSwgMjU1LCAyNTUsIGFscGhhLCAnYycsIDAsIHRleHQpDQogICAgICAgIGlmIGFscGhhID4gMjEwIHRoZW4NCiAgICAgICAgICAgIGlmIGNodWogPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgeSA9IGxlcnAoeSwgMTUwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHkgPiAxNDkgdGhlbg0KICAgICAgICAgICAgY2h1aiA9IGZhbHNlDQogICAgICAgICAgICBhbHBoYSA9IGxlcnAoYWxwaGEsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgYWxwaGEgPCAxIHRoZW4NCiAgICAgICAgICAgICAgICBzdGFydHVwX2FuaW0gPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBzaG93X3RleHQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICByZW5kZXJlci50ZXh0KHNjcmVlbi54LzIsIHNjcmVlbi55IC0geS8yICsgNjUsIDE4NCwgMTg0LCAxODQsIGFscGhhLCAnYycsIDAsICcnKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZCkNCg0KDQpsb2NhbCByZWYgPSANCnsNCiAgICBhbnRpYWltID0gew0KICAgICAgICBhbnRpX2FpbSA9IHVpLm11bHRpUmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiRW5hYmxlZCIpLA0KICAgICAgICBwaXRjaCA9IHVpLm11bHRpUmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiUGl0Y2giKSwNCiAgICAgICAgeWF3ID0ge3VpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIllhdyIpfSwNCiAgICAgICAgeWF3X2Jhc2UgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJZYXcgQmFzZSIpLA0KICAgICAgICBqaXR0ZXIgPSB7IHVpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIllhdyBqaXR0ZXIiKSB9LA0KICAgICAgICBib2R5X3lhdyA9IHsgdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiQm9keSB5YXciKSB9LA0KICAgICAgICBmc19ib2R5X3lhdyA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIkZyZWVzdGFuZGluZyBib2R5IHlhdyIpLA0KICAgICAgICByb2xsc2xpZGVyID0gdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiUm9sbCIpLA0KICAgICAgICBzbG93X21vdGlvbiA9IHsgdWkucmVmZXJlbmNlKCJBQSIsICJPdGhlciIsICJTbG93IG1vdGlvbiIpIH0sDQoJCWZyZWVzdGFuZCwgZnJlZXN0YW5ka2V5ID0gdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiRnJlZXN0YW5kaW5nIiksDQoJCWZkID0gdWkucmVmZXJlbmNlKCJSQUdFIiwgIk90aGVyIiwgIkR1Y2sgcGVlayBhc3Npc3QiKSwNCgkJZWRnZXlhdyA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIkVkZ2UgeWF3IiksDQoJCWZha2VsYWdsaW1pdCA9IHVpLm11bHRpUmVmZXJlbmNlKCJBQSIsIkZha2UgbGFnIiwgIkxpbWl0IiksDQoJCWZha2VsYWd2YXJpYW5jZSA9IHVpLm11bHRpUmVmZXJlbmNlKCJBQSIsIkZha2UgbGFnIiwgIlZhcmlhbmNlIiksDQogICAgICAgIGZha2VsYWdhbW91bnQgPSB1aS5tdWx0aVJlZmVyZW5jZSgiQUEiLCJGYWtlIGxhZyIsICJBbW91bnQiKSwNCiAgICAgICAgZmFrZWxhZ2VuYWJsZWQgPSB1aS5tdWx0aVJlZmVyZW5jZSgiQUEiLCJGYWtlIGxhZyIsICJFbmFibGVkIiksDQogICAgICAgIGxlZ21vdmVtZW50ID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwiT3RoZXIiLCAiTGVnIG1vdmVtZW50IiksDQogICAgICAgIGZha2VwZWVrID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwiT3RoZXIiLCAiRmFrZSBwZWVrIiksDQogICAgICAgIG9uc2hvdGFhID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwiT3RoZXIiLCAiT24gc2hvdCBhbnRpLWFpbSIpLA0KICAgIH0NCn0NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVRpbWUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpsb2NhbCBzdGFydF90aW1lID0gY2xpZW50LnVuaXhfdGltZSgpDQpsb2NhbCBmdW5jdGlvbiBnZXRfZWxhcHNlZF90aW1lKCkNCiAgICBsb2NhbCBlbGFwc2VkX3NlY29uZHMgPSBjbGllbnQudW5peF90aW1lKCkgLSBzdGFydF90aW1lDQogICAgbG9jYWwgaG91cnMgPSBtYXRoLmZsb29yKGVsYXBzZWRfc2Vjb25kcyAvIDM2MDApDQogICAgbG9jYWwgbWludXRlcyA9IG1hdGguZmxvb3IoKGVsYXBzZWRfc2Vjb25kcyAtIGhvdXJzICogMzYwMCkgLyA2MCkNCiAgICBsb2NhbCBzZWNvbmRzID0gbWF0aC5mbG9vcihlbGFwc2VkX3NlY29uZHMgLSBob3VycyAqIDM2MDAgLSBtaW51dGVzICogNjApDQogICAgcmV0dXJuIHN0cmluZy5mb3JtYXQoIiUwMmQ6JTAyZDolMDJkIiwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpDQplbmQNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KdWlzdGF0ZSA9IDcNClVJX0xhYmVsX0VtcHR5ID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiICIpIA0KVUlfTGFiZWxfRW1wdHkyID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiICIpIA0KDQpVSV9CdXR0b25fQmFjayA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmYmFjayIsIGZ1bmN0aW9uKCkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQmFjaywgZmFsc2UpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX1Zpc3VhbHMsIHRydWUpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0FBLCB0cnVlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9Db25maWdzLCB0cnVlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9LZXliaW5kcywgdHJ1ZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fUmFnZWJvdCwgdHJ1ZSkNCgl1aXN0YXRlID0gNw0KZW5kKQ0KdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0JhY2ssIGZhbHNlKQ0KVUlfQnV0dG9uX0FBID0gdWkubmV3X2J1dHRvbigiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxhNzM3MzczZmZhbnRpLWFpbSIsIGZ1bmN0aW9uKCkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQmFjaywgdHJ1ZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fVmlzdWFscywgZmFsc2UpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0FBLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQ29uZmlncywgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0tleWJpbmRzLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fUmFnZWJvdCwgZmFsc2UpDQoJdWlzdGF0ZSA9IDENCmVuZCkNCg0KVUlfQnV0dG9uX1JhZ2Vib3QgPSB1aS5uZXdfYnV0dG9uKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE3MzczNzNmZnJhZ2Vib3QiLCBmdW5jdGlvbigpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0JhY2ssIHRydWUpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX1Zpc3VhbHMsIGZhbHNlKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9BQSwgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0NvbmZpZ3MsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9LZXliaW5kcywgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX1JhZ2Vib3QsIGZhbHNlKQ0KCXVpc3RhdGUgPSAyDQplbmQpDQpVSV9CdXR0b25fS2V5YmluZHMgPSB1aS5uZXdfYnV0dG9uKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE3MzczNzNmZmtleWJpbmRzIiwgZnVuY3Rpb24oKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9CYWNrLCB0cnVlKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9WaXN1YWxzLCBmYWxzZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQUEsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9Db25maWdzLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fS2V5YmluZHMsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9SYWdlYm90LCBmYWxzZSkNCgl1aXN0YXRlID0gNg0KZW5kKQ0KVUlfQnV0dG9uX1Zpc3VhbHMgPSB1aS5uZXdfYnV0dG9uKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE3MzczNzNmZnZpc3VhbHMiLCBmdW5jdGlvbigpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0JhY2ssIHRydWUpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX1Zpc3VhbHMsIGZhbHNlKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9BQSwgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0NvbmZpZ3MsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9LZXliaW5kcywgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX1JhZ2Vib3QsIGZhbHNlKQ0KCXVpc3RhdGUgPSAzDQplbmQpDQpVSV9CdXR0b25fQ29uZmlncyA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmY29uZmlncyIsIGZ1bmN0aW9uKCkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQmFjaywgdHJ1ZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fVmlzdWFscywgZmFsc2UpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0FBLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQ29uZmlncywgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0tleWJpbmRzLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fUmFnZWJvdCwgZmFsc2UpDQoJdWlzdGF0ZSA9IDUNCmVuZCkNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLSBVc2VyIGluZm8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gDQoNCmxvY2FsIHVzZXJtb2RlID0gew0KICAgIEZha2VsYWcgPSB7DQogICAgICAgIGZrMSA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRlNjcmlwdCBpbmZvIiksDQogICAgICAgIGZrMiA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiXGEzNzM3MzdGRuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAviIpLA0KICAgICAgICBmazMgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgIlxhRkZGRkZGRkZVc2VyOiB0ZXN0ZXIiKSwNCiAgICAgICAgZms0ID0gdWkubmV3X2xhYmVsKCJBQSIsICJGYWtlIGxhZyIsICJcYUZGRkZGRkZGQnVpbGQ6IHBlcmZlY3QiKSwNCiAgICAgICAgZms1ID0gdWkubmV3X2xhYmVsKCJBQSIsICJGYWtlIGxhZyIsICJcYUZGRkZGRkZGTGFzdCB1cGRhdGU6IDA5LzAxLzIwMjQiKSwNCiAgICAgICAgZms2ID0gdWkubmV3X2xhYmVsKCJBQSIsICJGYWtlIGxhZyIsICIgIiksDQogICAgICAgIGZrNyA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiXGEzNzM3MzdGRuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAviIpLA0KICAgICAgICBmazkgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgIlxhOEFFQ0YxRkbigKIgIFxhRkZGRkZGRkZDb25kaXRpb24gYmluZCBzeXN0ZW0iKSwNCiAgICAgICAgZms4ID0gdWkubmV3X2xhYmVsKCJBQSIsICJGYWtlIGxhZyIsICJcYTM3MzczN0ZG4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+IiksDQogICAgfSwNCiAgICBPdGhlciA9IHsNCiAgICAgICAgdXNlcmkgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIk90aGVyIiwgIlxhOEFFQ0YxRkbigKIgIFxhRkZGRkZGRkZVc2VyIHpvbmUiKSwNCiAgICAgICAgdXNlcmkxID0gdWkubmV3X2xhYmVsKCJBQSIsICJPdGhlciIsICJcYTM3MzczN0ZG4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+IiksDQogICAgICAgIFRpbWV6b25lID0gdWkubmV3X2xhYmVsKCJBQSIsICJPdGhlciIsICJUaW1lIHNlc3Npb246IHRpbWUiKSwNCiAgICB9LA0KICAgIGZvcmNmZyA9IHsNCiAgICAgICAgY2YwID0gdWkubmV3X2xhYmVsKCJBQSIsICJGYWtlIGxhZyIsICIgIiksDQogICAgICAgIGNmMSA9IHVpLm5ld19sYWJlbCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIiAiKSwNCiAgICAgICAgY2YyID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRkZ1bGwgY29uZmlndXJhdGlvbiBzeXN0ZW0iKSwNCiAgICAgICAgY2YzID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGEzNzM3MzdGRuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAviIpLA0KICAgICAgICBjZjQgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgIjxMYXN0IHVwZGF0ZSBpbmZvcm1hdGlvbj4iKSwNCiAgICAgICAgY2Y1ID0gdWkubmV3X2xhYmVsKCJBQSIsICJGYWtlIGxhZyIsICJMYWNvbmlzbSAtPiBHb3QgUmV3b3JrIERlc2lnbiIpLA0KICAgICAgICBjZjYgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgIkxhY29uc2ltIC0+IEdvdCBSZXdvcmsgRGVmZW5zaXZlIiksDQogICAgICAgIGNmNyA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiPExhc3QgdXBkYXRlIGluZm9ybWF0aW9uPiIpLA0KICAgIH0NCn0NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KbG9jYWwgc3RhdGVfc2VsZWN0b3IgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgInN0YXRlIiwgeyJjcm91Y2hpbmciLCAiY3JvdWNocnVubmluZyIsICJzdGFuZGluZyIsICJzbG93bW90aW9uIiwgInJ1bm5pbmciLCAianVtcGluZyIsICJhaXJjcm91Y2hpbmciLCAiZmFrZWxhZyJ9KQ0KbG9jYWwgYW50aWFpbV90YWIgPSB7DQogY3JvdWNoaW5nID0gew0KIHBpdGNoID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAiY3VzdG9tIiwgImRvd24iLCAidXAiLCAicmFuZG9tIn0pLA0KIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIGF0IHRhcmdldHMiKSwNCiB3YXlzID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIHdheXMiLCAyLCAzLCAyLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gbGVmdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gcmlnaHQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogbXVsdGlwbGllciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSBtdWx0aXBsaWVyIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogcmFuZG9taXphdGlvbiA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSByYW5kb21pemF0aW9uIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogbGJ5ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gYnJlYWtlciIsIHsib2ZmIiwgInRpY2tjb3VudCIsICJzcGVlZCBiYXNlZCIsICJzdGF0aWMiLCAib3Bwb3NpdGUifSksDQogbGJ5c2lkZSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIHNpZGUiLCB7ImxlZnQiLCAicmlnaHQiLCAiYXV0byJ9KSwNCiBsYnlzcGVlZCA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSBzcGVlZCIsIDEsIDEwLCA2LCB0cnVlLCBuaWwsIDEsIHsgfSksDQogZmFrZWxhZ21vZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSBmYWtlIGxhZyBtb2RlIiwgeyJtYXhpbXVtIiwgImR5bmFtaWMiLCAiZmx1Y3R1YXRlIn0pLA0KIGZha2VsYWdzbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gZmFrZSBsYWcgYW1vdW50IiwgMSwgMTUsIDEsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiBkZWZlbnNpdmUgPSB7DQogYWEgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjZF0gZGVmZW5zaXZlIGFhIiwgeyJvZmYiLCAib24gcGVlayIsICJmb3JjZSJ9KSwNCiBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NkXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJzZW1pLXVwIiwgInNlbWktZG93biIsICJzd2F5IiwgInNpZGV3YXlzIiwgImRvd24iLCAidXAiLCAicmFuZG9tIiwgImN1c3RvbSJ9KSwNCiBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY2RdIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY2RdIGF0IHRhcmdldHMiKSwNCiB5YXcgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjZF0geWF3IiwgeyJzaWRld2F5cyIsICJzbG93IHNwaW4iLCAiZmFzdCBzcGluIiwgImFsbCB0aGUgc2lkZXMiLCAiY3VzdG9tIn0pLA0KIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NkXSBmaXJzdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY2RdIHNlY29uZCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiB9LA0KIH0sDQogY3JvdWNocnVubmluZyA9IHsNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJjdXN0b20iLCAiZG93biIsICJ1cCIsICJyYW5kb20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSBhdCB0YXJnZXRzIiksDQogICAgd2F5cyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gd2F5cyIsIDIsIDMsIDIsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gbGVmdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JdIHJpZ2h0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIG11bHRpcGxpZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JdIG11bHRpcGxpZXIiLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByYW5kb21pemF0aW9uID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSByYW5kb21pemF0aW9uIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGJ5ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JdIGJyZWFrZXIiLCB7Im9mZiIsICJ0aWNrY291bnQiLCAic3BlZWQgYmFzZWQiLCAic3RhdGljIiwgIm9wcG9zaXRlIn0pLA0KICAgIGxieXNpZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gc2lkZSIsIHsibGVmdCIsICJyaWdodCIsICJhdXRvIn0pLA0KICAgIGxieXNwZWVkID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSBzcGVlZCIsIDEsIDEwLCA2LCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZmFrZWxhZ21vZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gZmFrZSBsYWcgbW9kZSIsIHsibWF4aW11bSIsICJkeW5hbWljIiwgImZsdWN0dWF0ZSJ9KSwNCiAgICBmYWtlbGFnc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSBmYWtlIGxhZyBhbW91bnQiLCAxLCAxNSwgMSwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGRlZmVuc2l2ZSA9IHsNCiAgICBhYSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyZF0gZGVmZW5zaXZlIGFhIiwgeyJvZmYiLCAib24gcGVlayIsICJmb3JjZSJ9KSwNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyZF0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAic2VtaS11cCIsICJzZW1pLWRvd24iLCAic3dheSIsICJzaWRld2F5cyIsICJkb3duIiwgInVwIiwgInJhbmRvbSIsICJjdXN0b20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyZF0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcmRdIGF0IHRhcmdldHMiKSwNCiAgICB5YXcgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcmRdIHlhdyIsIHsic2lkZXdheXMiLCAic2xvdyBzcGluIiwgImZhc3Qgc3BpbiIsICJhbGwgdGhlIHNpZGVzIiwgImN1c3RvbSJ9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcmRdIGZpcnN0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcmRdIHNlY29uZCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICB9LA0KICAgIH0sDQogc3RhbmRpbmcgPSB7DQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJjdXN0b20iLCAiZG93biIsICJ1cCIsICJyYW5kb20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gYXQgdGFyZ2V0cyIpLA0KICAgIHdheXMgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gd2F5cyIsIDIsIDMsIDIsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBsZWZ0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSByaWdodCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBtdWx0aXBsaWVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIG11bHRpcGxpZXIiLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByYW5kb21pemF0aW9uID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIHJhbmRvbWl6YXRpb24iLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsYnkgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBicmVha2VyIiwgeyJvZmYiLCAidGlja2NvdW50IiwgInNwZWVkIGJhc2VkIiwgInN0YXRpYyIsICJvcHBvc2l0ZSJ9KSwNCiAgICBsYnlzaWRlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gc2lkZSIsIHsibGVmdCIsICJyaWdodCIsICJhdXRvIn0pLA0KICAgIGxieXNwZWVkID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIHNwZWVkIiwgMSwgMTAsIDYsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBmYWtlbGFnbW9kZSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIGZha2UgbGFnIG1vZGUiLCB7Im1heGltdW0iLCAiZHluYW1pYyIsICJmbHVjdHVhdGUifSksDQogICAgZmFrZWxhZ3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBmYWtlIGxhZyBhbW91bnQiLCAxLCAxNSwgMSwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGRlZmVuc2l2ZSA9IHsNCiAgICBhYSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NkXSBkZWZlbnNpdmUgYWEiLCB7Im9mZiIsICJvbiBwZWVrIiwgImZvcmNlIn0pLA0KICAgIHBpdGNoID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc2RdIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgInNlbWktdXAiLCAic2VtaS1kb3duIiwgInN3YXkiLCAic2lkZXdheXMiLCAiZG93biIsICJ1cCIsICJyYW5kb20iLCAiY3VzdG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzZF0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzZF0gYXQgdGFyZ2V0cyIpLA0KICAgIHlhdyA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NkXSB5YXciLCB7InNpZGV3YXlzIiwgInNsb3cgc3BpbiIsICJmYXN0IHNwaW4iLCAiYWxsIHRoZSBzaWRlcyIsICJjdXN0b20ifSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc2RdIGZpcnN0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzZF0gc2Vjb25kIHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIH0sDQogICAgfSwNCiBzbG93bW90aW9uID0gew0KICAgIHBpdGNoID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgImN1c3RvbSIsICJkb3duIiwgInVwIiwgInJhbmRvbSJ9KSwNCiAgICBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIGF0IHRhcmdldHMiKSwNCiAgICB3YXlzID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSB3YXlzIiwgMiwgMywgMiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBsZWZ0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbV0gcmlnaHQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbXVsdGlwbGllciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbV0gbXVsdGlwbGllciIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJhbmRvbWl6YXRpb24gPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIHJhbmRvbWl6YXRpb24iLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsYnkgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbV0gYnJlYWtlciIsIHsib2ZmIiwgInRpY2tjb3VudCIsICJzcGVlZCBiYXNlZCIsICJzdGF0aWMiLCAib3Bwb3NpdGUifSksDQogICAgbGJ5c2lkZSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBzaWRlIiwgeyJsZWZ0IiwgInJpZ2h0IiwgImF1dG8ifSksDQogICAgbGJ5c3BlZWQgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIHNwZWVkIiwgMSwgMTAsIDYsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBmYWtlbGFnbW9kZSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBmYWtlIGxhZyBtb2RlIiwgeyJtYXhpbXVtIiwgImR5bmFtaWMiLCAiZmx1Y3R1YXRlIn0pLA0KICAgIGZha2VsYWdzbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIGZha2UgbGFnIGFtb3VudCIsIDEsIDE1LCAxLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZGVmZW5zaXZlID0gew0KICAgIGFhID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21kXSBkZWZlbnNpdmUgYWEiLCB7Im9mZiIsICJvbiBwZWVrIiwgImZvcmNlIn0pLA0KICAgIHBpdGNoID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21kXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJzZW1pLXVwIiwgInNlbWktZG93biIsICJzd2F5IiwgInNpZGV3YXlzIiwgImRvd24iLCAidXAiLCAicmFuZG9tIiwgImN1c3RvbSJ9KSwNCiAgICBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21kXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtZF0gYXQgdGFyZ2V0cyIpLA0KICAgIHlhdyA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtZF0geWF3IiwgeyJzaWRld2F5cyIsICJzbG93IHNwaW4iLCAiZmFzdCBzcGluIiwgImFsbCB0aGUgc2lkZXMiLCAiY3VzdG9tIn0pLA0KICAgIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtZF0gZmlyc3QgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtZF0gc2Vjb25kIHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIH0sDQogICAgfSwNCiBydW5uaW5nID0gew0KICAgIHBpdGNoID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAiY3VzdG9tIiwgImRvd24iLCAidXAiLCAicmFuZG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIGF0IHRhcmdldHMiKSwNCiAgICB3YXlzID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIHdheXMiLCAyLCAzLCAyLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gbGVmdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gcmlnaHQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbXVsdGlwbGllciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSBtdWx0aXBsaWVyIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmFuZG9taXphdGlvbiA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSByYW5kb21pemF0aW9uIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGJ5ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gYnJlYWtlciIsIHsib2ZmIiwgInRpY2tjb3VudCIsICJzcGVlZCBiYXNlZCIsICJzdGF0aWMiLCAib3Bwb3NpdGUifSksDQogICAgbGJ5c2lkZSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIHNpZGUiLCB7ImxlZnQiLCAicmlnaHQiLCAiYXV0byJ9KSwNCiAgICBsYnlzcGVlZCA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSBzcGVlZCIsIDEsIDEwLCA2LCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZmFrZWxhZ21vZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSBmYWtlIGxhZyBtb2RlIiwgeyJtYXhpbXVtIiwgImR5bmFtaWMiLCAiZmx1Y3R1YXRlIn0pLA0KICAgIGZha2VsYWdzbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gZmFrZSBsYWcgYW1vdW50IiwgMSwgMTUsIDEsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBkZWZlbnNpdmUgPSB7DQogICAgYWEgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttZF0gZGVmZW5zaXZlIGFhIiwgeyJvZmYiLCAib24gcGVlayIsICJmb3JjZSJ9KSwNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21kXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJzZW1pLXVwIiwgInNlbWktZG93biIsICJzd2F5IiwgInNpZGV3YXlzIiwgImRvd24iLCAidXAiLCAicmFuZG9tIiwgImN1c3RvbSJ9KSwNCiAgICBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbWRdIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbWRdIGF0IHRhcmdldHMiKSwNCiAgICB5YXcgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttZF0geWF3IiwgeyJzaWRld2F5cyIsICJzbG93IHNwaW4iLCAiZmFzdCBzcGluIiwgImFsbCB0aGUgc2lkZXMiLCAiY3VzdG9tIn0pLA0KICAgIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21kXSBmaXJzdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbWRdIHNlY29uZCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICB9LA0KICAgIH0sDQoganVtcGluZyA9IHsNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgImN1c3RvbSIsICJkb3duIiwgInVwIiwgInJhbmRvbSJ9KSwNCiAgICBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSBhdCB0YXJnZXRzIiksDQogICAgd2F5cyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSB3YXlzIiwgMiwgMywgMiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIGxlZnQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIHJpZ2h0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIG11bHRpcGxpZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gbXVsdGlwbGllciIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJhbmRvbWl6YXRpb24gPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gcmFuZG9taXphdGlvbiIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxieSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIGJyZWFrZXIiLCB7Im9mZiIsICJ0aWNrY291bnQiLCAic3BlZWQgYmFzZWQiLCAic3RhdGljIiwgIm9wcG9zaXRlIn0pLA0KICAgIGxieXNpZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSBzaWRlIiwgeyJsZWZ0IiwgInJpZ2h0IiwgImF1dG8ifSksDQogICAgbGJ5c3BlZWQgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gc3BlZWQiLCAxLCAxMCwgNiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGZha2VsYWdtb2RlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gZmFrZSBsYWcgbW9kZSIsIHsibWF4aW11bSIsICJkeW5hbWljIiwgImZsdWN0dWF0ZSJ9KSwNCiAgICBmYWtlbGFnc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIGZha2UgbGFnIGFtb3VudCIsIDEsIDE1LCAxLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZGVmZW5zaXZlID0gew0KICAgIGFhID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbamRdIGRlZmVuc2l2ZSBhYSIsIHsib2ZmIiwgIm9uIHBlZWsiLCAiZm9yY2UifSksDQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqZF0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAic2VtaS11cCIsICJzZW1pLWRvd24iLCAic3dheSIsICJzaWRld2F5cyIsICJkb3duIiwgInVwIiwgInJhbmRvbSIsICJjdXN0b20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pkXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pkXSBhdCB0YXJnZXRzIiksDQogICAgeWF3ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbamRdIHlhdyIsIHsic2lkZXdheXMiLCAic2xvdyBzcGluIiwgImZhc3Qgc3BpbiIsICJhbGwgdGhlIHNpZGVzIiwgImN1c3RvbSJ9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqZF0gZmlyc3QgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pkXSBzZWNvbmQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgfSwNCiAgICB9LA0KIGFpcmNyb3VjaGluZyA9IHsNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJjdXN0b20iLCAiZG93biIsICJ1cCIsICJyYW5kb20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSBhdCB0YXJnZXRzIiksDQogICAgd2F5cyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gd2F5cyIsIDIsIDMsIDIsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gbGVmdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNdIHJpZ2h0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIG11bHRpcGxpZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNdIG11bHRpcGxpZXIiLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByYW5kb21pemF0aW9uID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSByYW5kb21pemF0aW9uIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGJ5ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNdIGJyZWFrZXIiLCB7Im9mZiIsICJ0aWNrY291bnQiLCAic3BlZWQgYmFzZWQiLCAic3RhdGljIiwgIm9wcG9zaXRlIn0pLA0KICAgIGxieXNpZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gc2lkZSIsIHsibGVmdCIsICJyaWdodCIsICJhdXRvIn0pLA0KICAgIGxieXNwZWVkID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSBzcGVlZCIsIDEsIDEwLCA2LCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZmFrZWxhZ21vZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gZmFrZSBsYWcgbW9kZSIsIHsibWF4aW11bSIsICJkeW5hbWljIiwgImZsdWN0dWF0ZSJ9KSwNCiAgICBmYWtlbGFnc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSBmYWtlIGxhZyBhbW91bnQiLCAxLCAxNSwgMSwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGRlZmVuc2l2ZSA9IHsNCiAgICBhYSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjZF0gZGVmZW5zaXZlIGFhIiwgeyJvZmYiLCAib24gcGVlayIsICJmb3JjZSJ9KSwNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjZF0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAic2VtaS11cCIsICJzZW1pLWRvd24iLCAic3dheSIsICJzaWRld2F5cyIsICJkb3duIiwgInVwIiwgInJhbmRvbSIsICJjdXN0b20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjZF0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY2RdIGF0IHRhcmdldHMiKSwNCiAgICB5YXcgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY2RdIHlhdyIsIHsic2lkZXdheXMiLCAic2xvdyBzcGluIiwgImZhc3Qgc3BpbiIsICJhbGwgdGhlIHNpZGVzIiwgImN1c3RvbSJ9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY2RdIGZpcnN0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY2RdIHNlY29uZCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICB9LA0KICAgIH0sDQogZmFrZWxhZyA9IHsNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2xhZ10gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAiY3VzdG9tIiwgImRvd24iLCAidXAiLCAicmFuZG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSBhdCB0YXJnZXRzIiksDQogICAgd2F5cyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIHdheXMiLCAyLCAzLCAyLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSBsZWZ0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIHJpZ2h0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIG11bHRpcGxpZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSBtdWx0aXBsaWVyIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmFuZG9taXphdGlvbiA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIHJhbmRvbWl6YXRpb24iLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsYnkgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIGJyZWFrZXIiLCB7Im9mZiIsICJ0aWNrY291bnQiLCAic3BlZWQgYmFzZWQiLCAic3RhdGljIiwgIm9wcG9zaXRlIn0pLA0KICAgIGxieXNpZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIHNpZGUiLCB7ImxlZnQiLCAicmlnaHQiLCAiYXV0byJ9KSwNCiAgICBsYnlzcGVlZCA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIHNwZWVkIiwgMSwgMTAsIDYsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICB9LA0KIG90aGVyID0gew0KICAgIG90aDEgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIk90aGVyIiwgIiAiKSwNCiAgICBvdGgyID0gdWkubmV3X2xhYmVsKCJBQSIsICJPdGhlciIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGT3RoZXIgRnVuY3Rpb25zIiksDQogICAgb3RoMyA9IHVpLm5ld19sYWJlbCgiQUEiLCAiT3RoZXIiLCAiXGEzNzM3MzdGRuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAviIpLA0KICAgIHNhZmVfa25pZmUgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiT3RoZXIiLCAic2FmZSBrbmlmZSIpLA0KICAgIHNhZmVfemV1cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJPdGhlciIsICJzYWZlIHRhc2VyIiksDQogICAgc2FmZV9oZWFkID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIk90aGVyIiwgInNhZmUgaGVhZCBvbiBoZWlnaHQgYWR2YW50YWdlIiksDQogICAgYXZvaWRfYmFja3N0YWIgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiT3RoZXIiLCAiYXZvaWQgYmFja3N0YWIiKSwNCiAgICBzdGF0aWNfZnJlZXN0YW5kID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIk90aGVyIiwgInN0YXRpYyBvbiBmcyIpLA0KICAgIGZsaWNrb25tYW51bHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwgIk90aGVyIiwgImZsaWNrIG9wcG9zaXRlIGUgb24gbWFudWFsICYgZnMiKSwNCiAgICBib21ic2l0ZWVmaXggPSB1aS5uZXdfY2hlY2tib3goIkFBIiwgIk90aGVyIiwgImJvbWJzaXRlIGUgZml4IiksDQogICAgbGVnaXRhYSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJPdGhlciIsICJsZWdpdCBhYSIsIHsib2ZmIiwgIjIgd2F5IiwgInN0YXRpYyIsICIzIHdheSJ9KSwNCiB9LA0KfQ0KIGtleWJpbmRzX3RhYiA9IHsNCiAgICBrZXkwID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiICIpLA0KICAgIGtleTEgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGQmluZCBTeXN0ZW0iKSwNCiAgICBrZXkyID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGEzNzM3MzdGRuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAviIpLA0KICAgIGVkZ2V5YXcgPSB1aS5uZXdfaG90a2V5KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRiBlZGdlIHlhdyIsIGZhbHNlKSwNCiAgICBmcmVlc3RhbmQgPSB1aS5uZXdfaG90a2V5KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRiBmcmVlc3RhbmQiLCBmYWxzZSksDQogICAgbWFudWFsX2xlZnQgPSB1aS5uZXdfaG90a2V5KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsIlxhOEFFQ0YxRkbigKIgIFxhRkZGRkZGRkYgbWFudWFsIGxlZnQiLCBmYWxzZSksDQogICAgbWFudWFsX3JpZ2h0ID0gdWkubmV3X2hvdGtleSgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGIG1hbnVhbCByaWdodCIsIGZhbHNlKSwNCiAgICBtYW51YWxfZm9yd2FyZCA9IHVpLm5ld19ob3RrZXkoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRiBtYW51YWwgZm9yd2FyZCIsIGZhbHNlKSwNCiAgICBub19kZWZlbnNpdmUgPSB1aS5uZXdfaG90a2V5KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRiBkaXNhYmxlIGRlZmVuc2l2ZSBhYSIsIGZhbHNlKSwNCiAgICBoaWRlc2hvdHMgPSB1aS5uZXdfaG90a2V5KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRiBoaWRlc2hvdHMiLCBmYWxzZSksDQogfQ0KIHJhZ2Vib3RfdGFiID0gew0KICAgIHJhZ2xhYiA9IHVpLm5ld19sYWJlbCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxhOEFFQ0YxRkbigKIgIFxhRkZGRkZGRkZSYWdlIFN5c3RlbSIpLA0KICAgIHJhZ2xhYjEgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTM3MzczN0ZG4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+IiksDQogICAgY3VzdG9tX2V4cGxvaXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJjdXN0b20gZXhwbG9pdHMiKSwNCiB9DQoNCiB2aXN1YWxzX3RhYiA9IHsNCiAgICBsYWIwID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiICIpLA0KICAgIGxhYjEgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGQW5pbWZpeCIpLA0KICAgIGxhYjIgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTM3MzczN0ZG4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+4oC+IiksDQogICAgbGFiMyA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiICIpLA0KICAgIGxhYjQgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgIlxhOEFFQ0YxRkbigKIgIFxhRkZGRkZGRkZNaXNjZWxsYW5lb3VzIiksDQogICAgbGFiNSA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiXGEzNzM3MzdGRuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAvuKAviIpLA0KICAgIGNvbmZpbCA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJGYWtlIGxhZyIsICJjb25zb2xlIGZpbHRlciIpLA0KICAgIGFuaW1maXhlbmIgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJFbmFibGUgQW5pbWF0aW9ucyIpLA0KICAgIGFuaW1maXhzZWwgPSB1aS5uZXdfbXVsdGlzZWxlY3QoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcbmFuaW1zIiAsImFpciIsICJncm91bmQiLCAiYm9keWxlYW4iLCAiemVybyBvbiBncm91bmQiKSwNCiAgICBhaXJ0eXBlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiYWlyIHR5cGUiLCAiZGVmYXVsdCIsICJtb29ud2FsayIsICJzaGFrZXIiKSwNCiAgICB2aXMxID0gdWkubmV3X2xhYmVsKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiICIpLA0KICAgIHZpczIgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGVmlzdWFscyBmZWF0dXJlIiksDQogICAgdmlzMyA9IHVpLm5ld19sYWJlbCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxhMzczNzM3RkbigL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL7igL4iKSwNCiAgICBpbmRpY2F0b3JzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJsYWNvbmlzbSBpbmRzIiksDQogICAgZXZlbnRsb2dzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJldmVudCBsb2dzIiksDQogICAgY2VudGVyX2luZGljYXRvcnMgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgImNyb3NzaGFpciBpbmRzIiwgeyJvZmYiLCAiZGFuZ2Vyb3VzIiwgIm1pbmltYWxpc20iLCAibW9kZXJuIn0pLA0KICAgIG9uc2NvcGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIm9uIHNjb3BlIGFuaW1hdGlvbiIsIHsib2ZmIiwgImxlZnQiLCAicmlnaHQiLCAiYWxwaGEifSksDQogICAgYWNjZW50bGFiZWwgPSB1aS5uZXdfbGFiZWwoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgImFjY2VudCBjb2xvciIpLA0KICAgIGFjY2VudCA9IHVpLm5ld19jb2xvcl9waWNrZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgImFjY2VudCBjb2xvciIpLA0KICAgIGFycm93cyA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiYXJyb3dzIiwgeyJPZmYiLCAiTWFudWFsIiwgIk9sZCIsICJUUzQiLCAiQWx3YXlzIn0pLA0KIH0NCg0KDQoNCg0KDQogLS0gQ0ZHDQpsb2NhbCBkYXRhYmFzZV9uYW1lID0gImxhY29uaXNtX2NmZyINCmxvY2FsIGRiID0gZGF0YWJhc2UucmVhZChkYXRhYmFzZV9uYW1lKSBvciB7IGNvbmZpZ3MgPSB7fSB9DQpsb2NhbCBjb25maWdfbGlzdCA9IHt9DQpsb2NhbCBiaW5kcyA9IHt9DQpmdW5jdGlvbiB1aS5tdWx0aVJlZmVyZW5jZSh0YWIsIGdyb3VwYm94LCBuYW1lKQ0KICAgIGxvY2FsIHJlZjEsIHJlZjIsIHJlZjMgPSB1aS5yZWZlcmVuY2UodGFiLCBncm91cGJveCwgbmFtZSkNCiAgICByZXR1cm4geyByZWYxLCByZWYyLCByZWYzIH0NCmVuZA0KbG9jYWwgcmVmZXJlbmNlcyA9IHsNCn0NCg0KbG9jYWwgQ29uZmlncyA9IHsgfQ0KbG9jYWwgbWVudSA9IHt9IGRvDQogICAgbWVudS51cGRhdGVfbGlzdCA9IGZ1bmN0aW9uKHVwZGF0ZV9saXN0Ym94KQ0KICAgICAgICBjb25maWdfbGlzdCA9IHt9DQoNCiAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoZGIuY29uZmlncykgZG8NCiAgICAgICAgICAgIHRhYmxlLmluc2VydChjb25maWdfbGlzdCwgdi5uYW1lKQ0KICAgICAgICBlbmQNCiAgICANCiAgICAgICAgaWYgKHVwZGF0ZV9saXN0Ym94KSB0aGVuDQogICAgICAgICAgICB1aS51cGRhdGUobWVudS5saXN0Ym94LCBjb25maWdfbGlzdCkNCiAgICAgICAgZW5kDQogICAgDQogICAgICAgIHJldHVybiBjb25maWdfbGlzdA0KICAgIGVuZA0KDQogICAgbWVudS5saXN0Ym94ID0gdWkubmV3X2xpc3Rib3goIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJBbnRpLWFpbSBjb25maWcgbGlzdCIsIG1lbnUudXBkYXRlX2xpc3QoZmFsc2UpKQ0KICAgIG1lbnUudGV4dGJveCA9IHVpLm5ld190ZXh0Ym94KCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiQW50aS1haW0gY29uZmlnIG5hbWUiKQ0KICAgIHVpLnNldF9jYWxsYmFjayhtZW51Lmxpc3Rib3gsIGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgaW5kZXggPSB1aS5nZXQobWVudS5saXN0Ym94KQ0KDQogICAgICAgIGlmIGluZGV4ID09IG5pbCB0aGVuIHJldHVybiBlbmQNCg0KICAgICAgICBsb2NhbCBuYW1lID0gY29uZmlnX2xpc3RbaW5kZXggKyAxXQ0KDQogICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGJpbmRzKSBkbw0KICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUodi5yZWYsIGZhbHNlKQ0KICAgICAgICBlbmQNCg0KICAgICAgICBsb2NhbCBiaW5kID0gYmluZHNbbmFtZV0NCiAgICAgICAgaWYgYmluZCA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgYmluZHNbbmFtZV0gPSB7DQogICAgICAgICAgICAgICAgcmVmID0gdWkubmV3X2hvdGtleSgiQUEiLCAiRmFrZSBsYWciLCBzdHJpbmcuZm9ybWF0KCJMb2FkIHRoZSBjb25maWc6IFxhYzE3ZjgyZmYlcyIsIG5hbWUpKSwNCiAgICAgICAgICAgICAgICBzdGF0ZSA9IGZhbHNlLA0KICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBmYWxzZSwNCiAgICAgICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdWkuc2V0X3Zpc2libGUoYmluZC5yZWYsIHRydWUpDQogICAgICAgIGVuZA0KDQogICAgICAgIHVpLnNldChtZW51LnRleHRib3gsIG5hbWUpDQogICAgZW5kKQ0KICAgIENvbmZpZ3MuTG9hZCA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmTG9hZCIsIGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgaW5kZXggPSB1aS5nZXQobWVudS5saXN0Ym94KQ0KDQogICAgICAgIGlmIGluZGV4ID09IG5pbCB0aGVuDQogICAgICAgICAgICBjbGllbnQuZXJyb3JfbG9nKCJTZWxlY3QgYSBjb25maWcgZnJvbSBsaXN0Ym94IGJlZm9yZSBsb2FkaW5nIikNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBlbmQNCg0KICAgICAgICBsb2NhbCBjZmcgPSBkYi5jb25maWdzW2NvbmZpZ19saXN0W2luZGV4ICsgMV1dDQoNCiAgICAgICAgaWYgdHlwZShjZmcpIH49ICJ0YWJsZSIgdGhlbg0KICAgICAgICAgICAgY2xpZW50LmVycm9yX2xvZygnQXR0ZW1wdCB0byBsb2FkIGEgY29ycnVwdGVkIG9yIG5vbi1leGlzdGVudCBjb25maWcnKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KDQogICAgICAgIGZvciBpLCB2YWwgaW4gcGFpcnMoY2ZnLnZhbHVlcykgZG8NCiAgICAgICAgICAgIGxvY2FsIHN1Y2Nlc3MgPSB0cnVlDQogICAgICAgICAgICBsb2NhbCByZWYgPSByZWZlcmVuY2VzW2ldDQogICAgICAgaWYgdHlwZShyZWYpID09ICJ0YWJsZSIgdGhlbg0KICAgc3VjY2VzcyA9IHBjYWxsKHVpLnNldCwgcmVmWzFdLCB2YWxbMV0pDQogIGlmIG5vdCBzdWNjZXNzIHRoZW4gY2xpZW50LmVycm9yX2xvZygiQXR0ZW1wdCB0byBsb2FkIGFuIG91dGRhdGVkIGNvbmZpZyIpIHJldHVybiBlbmQNCiAgIHN1Y2Nlc3MgPSBwY2FsbCh1aS5zZXQsIHJlZlsyXSwgdmFsWzJdKQ0KICBpZiBub3Qgc3VjY2VzcyB0aGVuIGNsaWVudC5lcnJvcl9sb2coIkF0dGVtcHQgdG8gbG9hZCBhbiBvdXRkYXRlZCBjb25maWciKSByZXR1cm4gZW5kDQogZWxzZQ0KICBzdWNjZXNzID0gcGNhbGwodWkuc2V0LCByZWYsIHZhbCkNCiAgIGlmIG5vdCBzdWNjZXNzIHRoZW4gY2xpZW50LmVycm9yX2xvZygiQXR0ZW1wdCB0byBsb2FkIGFuIG91dGRhdGVkIGNvbmZpZyIpIHJldHVybiBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbWVudS51cGRhdGVfbGlzdCh0cnVlKQ0KICAgIGVuZCkNCiAgICBDb25maWdzLlNhdmUgPSB1aS5uZXdfYnV0dG9uKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE3MzczNzNmZlNhdmUiLCBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG5hbWUgPSB1aS5nZXQobWVudS50ZXh0Ym94KQ0KDQogICAgICAgIGlmIG5hbWUgPT0gIiIgdGhlbg0KICAgICAgICAgICAgY2xpZW50LmVycm9yX2xvZygnRmlsbCBpbiB0aGUgY29uZmlnIG5hbWUgdGV4dGJveCBiZWZvcmUgc2F2aW5nJykNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBlbmQNCg0KICAgICAgICBsb2NhbCB0ZW1wID0geyBbIm5hbWUiXSA9IG5hbWUsIFsidmFsdWVzIl0gPSB7fSB9DQogICAgICAgIGZvciBpLCByZWYgaW4gcGFpcnMocmVmZXJlbmNlcykgZG8NCiAgICAgICAgICAgIGlmIHR5cGUocmVmKSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICB0ZW1wLnZhbHVlc1tpXSA9IHsgdWkuZ2V0KHJlZlsxXSksIHVpLmdldChyZWZbMl0pIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0ZW1wLnZhbHVlc1tpXSA9IHVpLmdldChyZWYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGRiLmNvbmZpZ3NbbmFtZV0gPSB0ZW1wDQogICAgICAgIGRhdGFiYXNlLndyaXRlKGRhdGFiYXNlX25hbWUsIGRiKQ0KDQogICAgICAgIG1lbnUudXBkYXRlX2xpc3QodHJ1ZSkNCiAgICBlbmQpDQogICAgQ29uZmlncy5EZWxldGUgPSB1aS5uZXdfYnV0dG9uKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE3MzczNzNmZkRlbGV0ZSIsIGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgaW5kZXggPSB1aS5nZXQobWVudS5saXN0Ym94KQ0KDQogICAgICAgIGlmIGluZGV4ID09IG5pbCB0aGVuDQogICAgICAgICAgICBjbGllbnQuZXJyb3JfbG9nKCJTZWxlY3QgYSBjb25maWcgZnJvbSBsaXN0Ym94IGJlZm9yZSBkZWxldGluZyIpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgZW5kDQoNCiAgICAgICAgbG9jYWwgbmFtZSA9IGNvbmZpZ19saXN0W2luZGV4ICsgMV0NCg0KICAgICAgICBpZiBuYW1lID09ICJuaWwiIHRoZW4NCiAgICAgICAgICAgIGNsaWVudC5lcnJvcl9sb2coJ0F0dGVtcHQgdG8gZGVsZXRlIG5vbi1leGlzdGVudCBjb25maWcnKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KICAgICAgICBiaW5kc1tuYW1lXS5kZWxldGVkID0gdHJ1ZQ0KICAgICAgICBkYi5jb25maWdzW25hbWVdID0gbmlsDQogICAgICAgIGRhdGFiYXNlLndyaXRlKGRhdGFiYXNlX25hbWUsIGRiKQ0KDQogICAgICAgIG1lbnUudXBkYXRlX2xpc3QodHJ1ZSkNCiAgICBlbmQpDQogICAgQ29uZmlncy5JbXBvcnQgPSB1aS5uZXdfYnV0dG9uKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE3MzczNzNmZkltcG9ydCBmcm9tIGNsaXBib2FyZCIsIGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgc3VjY2VzcywgY2ZnID0gcGNhbGwoanNvbi5wYXJzZSwgY2xpcGJvYXJkLmdldCgpKQ0KDQogICAgICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4NCiAgICAgICAgICAgIGNsaWVudC5lcnJvcl9sb2coJ0F0dGVtcHQgdG8gbG9hZCBhbiBpbnZhbGlkIGNvbmZpZycpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgZW5kDQoNCiAgICAgICAgZm9yIGksIHZhbCBpbiBwYWlycyhjZmcpIGRvDQogICAgICAgICAgICBsb2NhbCBzdWNjZXNzID0gdHJ1ZQ0KICAgICAgICAgICAgbG9jYWwgcmVmID0gcmVmZXJlbmNlc1tpXQ0KICAgICAgICAgICAgaWYgdHlwZShyZWYpID09ICJ0YWJsZSIgdGhlbg0KICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBwY2FsbCh1aS5zZXQsIHJlZlsxXSwgdmFsWzFdKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4gY2xpZW50LmVycm9yX2xvZygiQXR0ZW1wdCB0byBsb2FkIGFuIG91dGRhdGVkIGNvbmZpZyIpIHJldHVybiBlbmQNCiAgICAgICAgICAgICAgICBzdWNjZXNzID0gcGNhbGwodWkuc2V0LCByZWZbMl0sIHZhbFsyXSkNCiAgICAgICAgICAgICAgICBpZiBub3Qgc3VjY2VzcyB0aGVuIGNsaWVudC5lcnJvcl9sb2coIkF0dGVtcHQgdG8gbG9hZCBhbiBvdXRkYXRlZCBjb25maWciKSByZXR1cm4gZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgc3VjY2VzcyA9IHBjYWxsKHVpLnNldCwgcmVmLCB2YWwpDQogICAgICAgICAgICAgICAgaWYgbm90IHN1Y2Nlc3MgdGhlbiBjbGllbnQuZXJyb3JfbG9nKCJBdHRlbXB0IHRvIGxvYWQgYW4gb3V0ZGF0ZWQgY29uZmlnIikgcmV0dXJuIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCkNCiAgICBDb25maWdzLkV4cG9ydCA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmRXhwb3J0IHRvIGNsaXBib2FyZCIsIGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgdGVtcCA9IHt9DQoNCiAgICAgICAgZm9yIGksIHJlZiBpbiBwYWlycyhyZWZlcmVuY2VzKSBkbw0KICAgICAgICAgICAgaWYgdHlwZShyZWYpID09ICJ0YWJsZSIgdGhlbg0KICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB7IHVpLmdldChyZWZbMV0pLCB1aS5nZXQocmVmWzJdKSB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGVtcFtpXSA9IHVpLmdldChyZWYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQoNCiAgICAgICAgY2xpcGJvYXJkLnNldChqc29uLnN0cmluZ2lmeSh0ZW1wKSkNCiAgICBlbmQpDQogICAgbG9jYWwgdmlzaWJsZSA9IHRydWUNCmVuZA0KZnVuY3Rpb24gZmxhdHRlblRhYmxlKHNvdXJjZSwgZGVzdGluYXRpb24sIHByZWZpeCkNCiAgICBmb3Iga2V5LCB2YWx1ZSBpbiBwYWlycyhzb3VyY2UpIGRvDQogICAgICAgIGxvY2FsIGZ1bGxLZXkgPSBwcmVmaXggYW5kIChwcmVmaXggLi4gIi4iIC4uIGtleSkgb3Iga2V5DQogICAgICAgIGlmIHR5cGUodmFsdWUpID09ICJ0YWJsZSIgdGhlbg0KICAgICAgICAgICAgZmxhdHRlblRhYmxlKHZhbHVlLCBkZXN0aW5hdGlvbiwgZnVsbEtleSkgLS0g0KDQtdC60YPRgNGB0LjQstC90L4g0L7QsdGK0LXQtNC40L3Rj9C10Lwg0LLQu9C+0LbQtdC90L3Rg9GOINGC0LDQsdC70LjRhtGDDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGRlc3RpbmF0aW9uW2Z1bGxLZXldID0gdmFsdWUgLS0g0JTQvtCx0LDQstC70Y/QtdC8INC60LvRjtGHINC4INC30L3QsNGH0LXQvdC40LUg0LIg0L/Qu9C+0YHQutGD0Y4g0YLQsNCx0LvQuNGG0YMNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCmZsYXR0ZW5UYWJsZShhbnRpYWltX3RhYiwgcmVmZXJlbmNlcykNCmZsYXR0ZW5UYWJsZSh2aXN1YWxzX3RhYiwgcmVmZXJlbmNlcykNCmZsYXR0ZW5UYWJsZShyYWdlYm90X3RhYiwgcmVmZXJlbmNlcykNCmZ1bmN0aW9uIGZsYXR0ZW5UYWJsZVZhbHVlcyhzb3VyY2UpDQogICAgbG9jYWwgZmxhdHRlbmVkVmFsdWVzID0ge30NCg0KICAgIGxvY2FsIGZ1bmN0aW9uIGZsYXR0ZW4oc291cmNlKQ0KICAgICAgICBmb3IgXywgdmFsdWUgaW4gcGFpcnMoc291cmNlKSBkbw0KICAgICAgICAgICAgaWYgdHlwZSh2YWx1ZSkgPT0gInRhYmxlIiB0aGVuDQogICAgICAgICAgICAgICAgZmxhdHRlbih2YWx1ZSkgLS0g0KDQtdC60YPRgNGB0LjQstC90L4g0L7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INCy0LvQvtC20LXQvdC90YPRjiDRgtCw0LHQu9C40YbRgw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChmbGF0dGVuZWRWYWx1ZXMsIHZhbHVlKSAtLSDQlNC+0LHQsNCy0LvRj9C10Lwg0LfQvdCw0YfQtdC90LjQtSDQsiDQv9C70L7RgdC60LjQuSDRgdC/0LjRgdC+0LoNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIGZsYXR0ZW4oc291cmNlKQ0KDQogICAgcmV0dXJuIGZsYXR0ZW5lZFZhbHVlcw0KZW5kDQotLS0tLS0tLS0tLS0tIFByMVZhdDA0a0EgNnkgTTNHNFAwTDlTIC0tLS0tLS0tLS0tLS0NCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicGFpbnRfdWkiLCBmdW5jdGlvbigpDQogICAgdWkuc2V0X3Zpc2libGUodXNlcm1vZGUuZm9yY2ZnLmNmMCwgdWlzdGF0ZSA9PSA1KQ0KICAgIHVpLnNldF92aXNpYmxlKHVzZXJtb2RlLmZvcmNmZy5jZjEsIHVpc3RhdGUgPT0gNSkNCiAgICB1aS5zZXRfdmlzaWJsZSh1c2VybW9kZS5mb3JjZmcuY2YyLCB1aXN0YXRlID09IDUpDQogICAgdWkuc2V0X3Zpc2libGUodXNlcm1vZGUuZm9yY2ZnLmNmMywgdWlzdGF0ZSA9PSA1KQ0KICAgIHVpLnNldF92aXNpYmxlKHVzZXJtb2RlLmZvcmNmZy5jZjQsIHVpc3RhdGUgPT0gNSkNCiAgICB1aS5zZXRfdmlzaWJsZSh1c2VybW9kZS5mb3JjZmcuY2Y1LCB1aXN0YXRlID09IDUpDQogICAgdWkuc2V0X3Zpc2libGUodXNlcm1vZGUuZm9yY2ZnLmNmNiwgdWlzdGF0ZSA9PSA1KQ0KICAgIHVpLnNldF92aXNpYmxlKHVzZXJtb2RlLmZvcmNmZy5jZjcsIHVpc3RhdGUgPT0gNSkNCiAgICB1aS5zZXRfdmlzaWJsZSh1c2VybW9kZS5PdGhlci5UaW1lem9uZSwgdWlzdGF0ZSA9PSA3KQ0KICAgIHVpLnNldF92aXNpYmxlKHVzZXJtb2RlLk90aGVyLnVzZXJpLCB1aXN0YXRlID09IDcpDQogICAgdWkuc2V0X3Zpc2libGUodXNlcm1vZGUuT3RoZXIudXNlcmkxLCB1aXN0YXRlID09IDcpDQogICAgdWkuc2V0X3Zpc2libGUodXNlcm1vZGUuRmFrZWxhZy5mazEsIHVpc3RhdGUgPT0gNykNCiAgICB1aS5zZXRfdmlzaWJsZSh1c2VybW9kZS5GYWtlbGFnLmZrMiwgdWlzdGF0ZSA9PSA3KQ0KICAgIHVpLnNldF92aXNpYmxlKHVzZXJtb2RlLkZha2VsYWcuZmszLCB1aXN0YXRlID09IDcpDQogICAgdWkuc2V0X3Zpc2libGUodXNlcm1vZGUuRmFrZWxhZy5mazQsIHVpc3RhdGUgPT0gNykNCiAgICB1aS5zZXRfdmlzaWJsZSh1c2VybW9kZS5GYWtlbGFnLmZrNSwgdWlzdGF0ZSA9PSA3KQ0KICAgIHVpLnNldF92aXNpYmxlKHVzZXJtb2RlLkZha2VsYWcuZms2LCB1aXN0YXRlID09IDcpDQogICAgdWkuc2V0X3Zpc2libGUodXNlcm1vZGUuRmFrZWxhZy5mazcsIHVpc3RhdGUgPT0gNykNCg0KICAgIGlmIHVpLmlzX21lbnVfb3BlbigpIHRoZW4NCiAgICAgICAgdWkuc2V0KHVzZXJtb2RlLk90aGVyLlRpbWV6b25lLCAiVGltZSBzZXNzaW9uOiBcYUM0N0FGRkZGIi4uZ2V0X2VsYXBzZWRfdGltZSgpKQ0KICAgIGVuZA0KZW5kKQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpVSV9FeHBvcnRfQ29uZGl0aW9uID0gdWkubmV3X2J1dHRvbignQUEnLCAnRmFrZSBsYWcnLCAnXGE3MzczNzNmZkV4cG9ydCBjdXJyZW50IGNvbmRpdGlvbicsIGZ1bmN0aW9uKCkNCiAgICBsb2NhbCB0ZW1wID0ge30NCiAgICBjdXJyZW50Y29uZHVpID0gYW50aWFpbV90YWJbdWkuZ2V0KHN0YXRlX3NlbGVjdG9yKV0NCiAgICBmb3IgaywgdiBpbiBpcGFpcnMoZmxhdHRlblRhYmxlVmFsdWVzKGN1cnJlbnRjb25kdWkpKSBkbw0KICAgICAgICB0YWJsZS5pbnNlcnQodGVtcCwgdWkuZ2V0KHYpKQ0KICAgIGVuZA0KDQogICAgY2xpcGJvYXJkLnNldChiYXNlNjQuZW5jb2RlKGJhc2U2NC5lbmNvZGUoanNvbi5zdHJpbmdpZnkodGVtcCksICJiYXNlNjQiKSwgImJhc2U2NCIpKQ0KZW5kKQ0KDQpVSV9JbXBvcnRfQ29uZGl0aW9uID0gdWkubmV3X2J1dHRvbignQUEnLCAnRmFrZSBsYWcnLCAnXGE3MzczNzNmZkltcG9ydCB0byBjdXJyZW50IGNvbmRpdGlvbicsIGZ1bmN0aW9uKCkNCiAgICBsb2NhbCB0ZW1wID0ganNvbi5wYXJzZShiYXNlNjQuZGVjb2RlKGJhc2U2NC5kZWNvZGUoY2xpcGJvYXJkLmdldCgpLCJiYXNlNjQiKSwgImJhc2U2NCIpKQ0KICAgIGN1cnJlbnRjb25kdWkgPSBhbnRpYWltX3RhYlt1aS5nZXQoc3RhdGVfc2VsZWN0b3IpXQ0KICAgIGZvciBpPTEsICN0ZW1wIGRvDQogICAgICAgIHVpLnNldChmbGF0dGVuVGFibGVWYWx1ZXMoY3VycmVudGNvbmR1aSlbaV0sIHRlbXBbaV0pDQogICAgZW5kDQplbmQpDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJwYWludF91aSIsIGZ1bmN0aW9uKCkNCiAgICB1aS5zZXRfdmlzaWJsZSh1c2VybW9kZS5GYWtlbGFnLmZrOSwgdWlzdGF0ZSA9PSAxKQ0KICAgIHVpLnNldF92aXNpYmxlKHVzZXJtb2RlLkZha2VsYWcuZms4LCB1aXN0YXRlID09IDEpDQogICAgDQogICAgaWYgdWlzdGF0ZSA9PSAxIHRoZW4NCiAgICAgICAgdWkuc2V0X3Zpc2libGUoVUlfRXhwb3J0X0NvbmRpdGlvbiwgdHJ1ZSkNCiAgICAgICAgdWkuc2V0X3Zpc2libGUoVUlfSW1wb3J0X0NvbmRpdGlvbiwgdHJ1ZSkNCiAgICAgICAgZWxzZQ0KICAgICAgICB1aS5zZXRfdmlzaWJsZShVSV9FeHBvcnRfQ29uZGl0aW9uLCBmYWxzZSkNCiAgICAgICAgdWkuc2V0X3Zpc2libGUoVUlfSW1wb3J0X0NvbmRpdGlvbiwgZmFsc2UpDQogICAgICAgIGVuZA0KdHJhdmVyc2VfdGFibGUocmVmKQ0KDQotLSBDRkcgVEFCDQppZiB1aXN0YXRlID09IDUgdGhlbg0KICAgIHVpLnNldF92aXNpYmxlKG1lbnUubGlzdGJveCx0cnVlKQ0KICAgIHVpLnNldF92aXNpYmxlKG1lbnUudGV4dGJveCx0cnVlKQ0KICAgIHRyYXZlcnNlX3RhYmxlX29uKENvbmZpZ3MpDQplbHNlDQogICAgdWkuc2V0X3Zpc2libGUobWVudS5saXN0Ym94LGZhbHNlKQ0KICAgIHVpLnNldF92aXNpYmxlKG1lbnUudGV4dGJveCxmYWxzZSkNCiAgICB0cmF2ZXJzZV90YWJsZShDb25maWdzKQ0KICAgIGZvciBfLCB2IGluIHBhaXJzKGJpbmRzKSBkbw0KICAgICAgICB1aS5zZXRfdmlzaWJsZSh2LnJlZiwgZmFsc2UpDQogICAgICBlbmQNCmVuZA0KLS0gQUEgVEFCDQppZiB1aXN0YXRlIH49IDEgdGhlbiB0cmF2ZXJzZV90YWJsZShhbnRpYWltX3RhYikgdWkuc2V0X3Zpc2libGUoc3RhdGVfc2VsZWN0b3IsIGZhbHNlKSBlbHNlIA0KICAgIGN1cnJlbnRjb25kaXRpb24gPSBhbnRpYWltX3RhYlt1aS5nZXQoc3RhdGVfc2VsZWN0b3IpXQ0KdHJhdmVyc2VfdGFibGUoYW50aWFpbV90YWIpDQp0cmF2ZXJzZV90YWJsZV9vbihhbnRpYWltX3RhYi5vdGhlcikNCnRyYXZlcnNlX3RhYmxlX29uKGN1cnJlbnRjb25kaXRpb24pIHVpLnNldF92aXNpYmxlKHN0YXRlX3NlbGVjdG9yLCB0cnVlKSANCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLnBpdGNoKSB+PSAiY3VzdG9tIiB0aGVuIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ucGl0Y2hfc2xpZGVyLCBmYWxzZSkgZWxzZSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLnBpdGNoX3NsaWRlciwgdHJ1ZSkgZW5kDQppZiB1aS5nZXQoY3VycmVudGNvbmRpdGlvbi53YXlzKSB+PSAyIHRoZW4gdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5sZWZ0X3lhdywgZmFsc2UpIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ucmlnaHRfeWF3LCBmYWxzZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5yYW5kb21pemF0aW9uLCBmYWxzZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5tdWx0aXBsaWVyLCB0cnVlKSBlbHNlIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ucmFuZG9taXphdGlvbiwgdHJ1ZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5sZWZ0X3lhdywgdHJ1ZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5yaWdodF95YXcsIHRydWUpIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubXVsdGlwbGllciwgZmFsc2UpIGVuZA0KaWYgdWkuZ2V0KGN1cnJlbnRjb25kaXRpb24ubGJ5KSA9PSAidGlja2NvdW50IiB0aGVuIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubGJ5c2lkZSwgZmFsc2UpIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubGJ5c3BlZWQsIGZhbHNlKSBlbmQNCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLmxieSkgPT0gInN0YXRpYyIgb3IgdWkuZ2V0KGN1cnJlbnRjb25kaXRpb24ubGJ5KSA9PSAib3Bwb3NpdGUiIHRoZW4gdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5sYnlzaWRlLCB0cnVlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmxieXNwZWVkLCBmYWxzZSkgZW5kDQppZiB1aS5nZXQoY3VycmVudGNvbmRpdGlvbi5sYnkpID09ICJzcGVlZCBiYXNlZCIgdGhlbiB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmxieXNpZGUsIGZhbHNlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmxieXNwZWVkLCB0cnVlKSBlbmQNCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLmxieSkgPT0gIm9mZiIgdGhlbiB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmxieXNpZGUsZmFsc2UpIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubGJ5c3BlZWQsIGZhbHNlKSBlbmQNCmlmIHVpLmdldChzdGF0ZV9zZWxlY3Rvcikgfj0gImZha2VsYWciIHRoZW4NCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS5hYSkgPT0gIm9mZiIgdGhlbiB0cmF2ZXJzZV90YWJsZShjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5kZWZlbnNpdmUuYWEsIHRydWUpDQplbHNlDQp0cmF2ZXJzZV90YWJsZV9vbihjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZSkNCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS5waXRjaCkgfj0gImN1c3RvbSIgdGhlbiB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS5waXRjaF9zbGlkZXIsIGZhbHNlKSBlbHNlIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlLnBpdGNoX3NsaWRlciwgdHJ1ZSkgZW5kDQppZiB1aS5nZXQoY3VycmVudGNvbmRpdGlvbi5kZWZlbnNpdmUueWF3KSB+PSAiY3VzdG9tIiB0aGVuIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlLmxlZnRfeWF3LCBmYWxzZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5kZWZlbnNpdmUucmlnaHRfeWF3LCBmYWxzZSkgZWxzZSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS5sZWZ0X3lhdywgdHJ1ZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5kZWZlbnNpdmUucmlnaHRfeWF3LCB0cnVlKSBlbmQNCmVuZA0KZW5kDQplbmQNCi0tDQoNCg0KLS0gS0VZQklORFMgVEFCDQppZiB1aXN0YXRlID09IDYgdGhlbiANCnRyYXZlcnNlX3RhYmxlX29uKGtleWJpbmRzX3RhYikNCmVsc2UgDQp0cmF2ZXJzZV90YWJsZShrZXliaW5kc190YWIpDQplbmQNCg0KLS0gUkFHRUJPVCBUQUINCmlmIHVpc3RhdGUgPT0gMiB0aGVuDQp0cmF2ZXJzZV90YWJsZV9vbihyYWdlYm90X3RhYikNCmVsc2UNCnRyYXZlcnNlX3RhYmxlKHJhZ2Vib3RfdGFiKQ0KZW5kDQotLQ0KaWYgdWlzdGF0ZSA9PSAzIHRoZW4NCnRyYXZlcnNlX3RhYmxlX29uKHZpc3VhbHNfdGFiKQ0KdWkuc2V0X3Zpc2libGUodmlzdWFsc190YWIuYW5pbWZpeHNlbCwgdWkuZ2V0KHZpc3VhbHNfdGFiLmFuaW1maXhlbmIpKQ0KdWkuc2V0X3Zpc2libGUodmlzdWFsc190YWIuYWlydHlwZSwgZnVuYy5pbmNsdWRlcyh1aS5nZXQodmlzdWFsc190YWIuYW5pbWZpeHNlbCksICJhaXIiKSkNCmVsc2UNCnRyYXZlcnNlX3RhYmxlKHZpc3VhbHNfdGFiKQ0KZW5kDQplbmQpDQpsb2NhbCBncmFtX2NyZWF0ZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb3VudCkgbG9jYWwgZ3JhbSA9IHsgfTsgZm9yIGk9MSwgY291bnQgZG8gZ3JhbVtpXSA9IHZhbHVlOyBlbmQgcmV0dXJuIGdyYW07IGVuZA0KbG9jYWwgZ3JhbV91cGRhdGUgPSBmdW5jdGlvbih0YWIsIHZhbHVlLCBmb3JjZWQpIGxvY2FsIG5ld190YWIgPSB0YWI7IGlmIGZvcmNlZCBvciBuZXdfdGFiWyNuZXdfdGFiXSB+PSB2YWx1ZSB0aGVuIHRhYmxlLmluc2VydChuZXdfdGFiLCB2YWx1ZSk7IHRhYmxlLnJlbW92ZShuZXdfdGFiLCAxKTsgZW5kOyB0YWIgPSBuZXdfdGFiOyBlbmQNCmxvY2FsIGdldF9hdmVyYWdlID0gZnVuY3Rpb24odGFiKSBsb2NhbCBlbGVtZW50cywgc3VtID0gMCwgMDsgZm9yIGssIHYgaW4gcGFpcnModGFiKSBkbyBzdW0gPSBzdW0gKyB2OyBlbGVtZW50cyA9IGVsZW1lbnRzICsgMTsgZW5kIHJldHVybiBzdW0gLyBlbGVtZW50czsgZW5kDQpicmVha2VyID0gew0KICAgIGRlZmVuc2l2ZSA9IDAsDQogICAgZGVmZW5zaXZlX2NoZWNrID0gMCwNCiAgICBjbWQgPSAwLA0KICAgIGxhc3Rfb3JpZ2luID0gbmlsLA0KICAgIG9yaWdpbiA9IG5pbCwNCiAgICB0cF9kaXN0ID0gMCwNCiAgICB0cF9kYXRhID0gZ3JhbV9jcmVhdGUoMCwzKSwNCg0KICAgIGxhZ2NvbXBlbnNhdGlvbiA9IHsNCiAgICAgICAgZGlzdGFuY2UgPSAwLjAsDQogICAgICAgIHRlbGVwb3J0ID0gZmFsc2UNCiAgICB9LA0KDQp9DQoNCnRpY2tiYXNlID0gMA0KIGZ1bmN0aW9uIGdldF92ZWxvY2l0eShwbGF5ZXIpDQogICAgbG9jYWwgeCx5LHogPSBlbnRpdHkuZ2V0X3Byb3AocGxheWVyLCAibV92ZWNWZWxvY2l0eSIpDQogICAgaWYgeCA9PSBuaWwgdGhlbiByZXR1cm4gZW5kDQogICAgcmV0dXJuIG1hdGguc3FydCh4KnggKyB5KnkgKyB6KnopDQplbmQNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInJ1bl9jb21tYW5kIiwgZnVuY3Rpb24oY21kKQ0KICAgIGJyZWFrZXIuY21kID0gY21kLmNvbW1hbmRfbnVtYmVyDQogICAgbWUgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgaWYgbm90IG1lIG9yIG5vdCBlbnRpdHkuaXNfYWxpdmUobWUpIHRoZW4gICAgIA0KICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgYnJlYWtlci5kZWZlbnNpdmVfY2hlY2sgPSAwDQogICAgICAgIHJldHVybiBlbmQNCiAgICAgICAgaWYgbWF0aC5hYnModGlja2Jhc2UgLSBicmVha2VyLmRlZmVuc2l2ZV9jaGVjaykgPiA2NCB0aGVuDQogICAgICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KICAgICAgICBlbmQNCmVuZCkNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicHJlZGljdF9jb21tYW5kIiwgZnVuY3Rpb24oY21kKQ0KICAgIG1lID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgICAgICBpZiBub3QgbWUgb3Igbm90IGVudGl0eS5pc19hbGl2ZShtZSkgdGhlbiAgICAgDQogICAgICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KICAgICAgICAgICAgcmV0dXJuIGVuZA0KICAgIGlmIGNtZC5jb21tYW5kX251bWJlciA9PSBicmVha2VyLmNtZCB0aGVuDQogICAgICAgIHRpY2tiYXNlID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX25UaWNrQmFzZSIpDQogICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gbWF0aC5tYXgodGlja2Jhc2UsIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrKQ0KICAgICAgICBicmVha2VyLmNtZCA9IDANCiAgICAgICAgaWYgbWF0aC5hYnModGlja2Jhc2UgLSBicmVha2VyLmRlZmVuc2l2ZV9jaGVjaykgPiA2NCB0aGVuDQogICAgICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgYnJlYWtlci5kZWZlbnNpdmVfY2hlY2sgPiB0aWNrYmFzZSB0aGVuICAgICAgICAgIA0KICAgICAgICAgICAgYnJlYWtlci5kZWZlbnNpdmUgPSBtYXRoLmFicyh0aWNrYmFzZSAtIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrKQ0KICAgICAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgbWF0aC5hYnModGlja2Jhc2UgLSBicmVha2VyLmRlZmVuc2l2ZV9jaGVjaykgPiA2NCB0aGVuDQogICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlID0gMA0KICAgICAgICBicmVha2VyLmRlZmVuc2l2ZV9jaGVjayA9IDANCiAgICBlbmQNCmVuZCkNCg0KZnVuY3Rpb24gdXBkYXRlX3RlbGVwb3J0KG9sZF9vcmlnaW4sIG5ld19vcmlnaW4pDQogICAgbG9jYWwgZGVsdGEgPSBuZXdfb3JpZ2luIC0gb2xkX29yaWdpbg0KICAgIGxvY2FsIGRpc3RhbmNlID0gZGVsdGE6bGVuZ3Roc3FyKCkNCg0KICAgIGxvY2FsIGlzX3RlbGVwb3J0ID0gZGlzdGFuY2UgPiAoNjQgKiA2NCkNCg0KICAgIGJyZWFrZXIubGFnY29tcGVuc2F0aW9uLmRpc3RhbmNlID0gZGlzdGFuY2UNCiAgICBicmVha2VyLmxhZ2NvbXBlbnNhdGlvbi50ZWxlcG9ydCA9IGlzX3RlbGVwb3J0DQplbmQNCg0KZnVuY3Rpb24gdXBkYXRlX2xhZ2NvbXBlbnNhdGlvbihtZSkNCiAgICBsb2NhbCBvbGRfb3JpZ2luID0gYnJlYWtlci5vbGRfb3JpZ2luDQogICAgbG9jYWwgb2xkX3NpbXRpbWUgPSBicmVha2VyLm9sZF9zaW10aW1lDQoNCiAgICBsb2NhbCBvcmlnaW4gPSB2ZWN0b3IoZW50aXR5LmdldF9vcmlnaW4obWUpKQ0KICAgIGxvY2FsIHNpbXRpbWUgPSB0b3RpY2tzKGVudGl0eS5nZXRfcHJvcChtZSwgJ21fZmxTaW11bGF0aW9uVGltZScpKQ0KDQogICAgaWYgb2xkX3NpbXRpbWUgfj0gbmlsIHRoZW4NCiAgICAgICAgbG9jYWwgZGVsdGEgPSBzaW10aW1lIC0gb2xkX3NpbXRpbWUNCg0KICAgICAgICBpZiBkZWx0YSA8IDAgb3IgZGVsdGEgPiAwIGFuZCBkZWx0YSA8PSA2NCB0aGVuDQogICAgICAgICAgICB1cGRhdGVfdGVsZXBvcnQob2xkX29yaWdpbiwgb3JpZ2luKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIGJyZWFrZXIub2xkX29yaWdpbiA9IG9yaWdpbg0KICAgIGJyZWFrZXIub2xkX3NpbXRpbWUgPSBzaW10aW1lDQplbmQNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygnbmV0X3VwZGF0ZV9zdGFydCcsIGZ1bmN0aW9uKCkNCiAgICBsb2NhbCBtZSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCg0KICAgIGlmIG1lID09IG5pbCB0aGVuDQogICAgICAgIHJldHVybg0KICAgIGVuZA0KDQogICAgdXBkYXRlX2xhZ2NvbXBlbnNhdGlvbihtZSkNCmVuZCkNCg0KZm9ycmVhbHRpbWUgPSAwDQpmdW5jdGlvbiBzbW9vdGhKaXR0ZXIoc3dpdGNoeWF3MSwgc3dpdGNoeWF3Miwgc3dpdGNoaW5nc3BlZWQpDQogICAgaWYgZ2xvYmFscy5jdXJ0aW1lKCkgPiBmb3JyZWFsdGltZSArIDEgLyAoc3dpdGNoaW5nc3BlZWQgKiAyKSB0aGVuDQogICAgICAgIGZpbmFseWF3Z2cgPSBzd2l0Y2h5YXcxDQogICAgICAgIGlmIGdsb2JhbHMuY3VydGltZSgpIC0gZm9ycmVhbHRpbWUgPiAyIC8gKHN3aXRjaGluZ3NwZWVkICogMikgdGhlbg0KICAgICAgICAgICAgZm9ycmVhbHRpbWUgPSBnbG9iYWxzLmN1cnRpbWUoKQ0KICAgICAgICBlbmQNCiAgICBlbHNlDQogICAgICAgIGZpbmFseWF3Z2cgPSBzd2l0Y2h5YXcyDQogICAgZW5kDQogICAgcmV0dXJuIGZpbmFseWF3Z2cNCmVuZA0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygibGV2ZWxfaW5pdCIsIGZ1bmN0aW9uKCkNCiAgICAgICAgYnJlYWtlci5jbWQgPSAwDQogICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlID0gMA0KICAgICAgICBicmVha2VyLmRlZmVuc2l2ZV9jaGVjayA9IDANCiAgICBmb3JyZWFsdGltZSA9IDANCmVuZCkNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInJvdW5kX3N0YXJ0IiwgZnVuY3Rpb24oKQ0KICAgIGJyZWFrZXIuY21kID0gMA0KICAgIGJyZWFrZXIuZGVmZW5zaXZlID0gMA0KICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KZW5kKQ0KZnVuY3Rpb24gZGVzeW5jc2lkZSgpDQogICAgaWYgbm90IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkgb3Igbm90IGVudGl0eS5pc19hbGl2ZShlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpKSB0aGVuDQogICAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGxvY2FsIGJvZHl5YXcgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgMTEpICogMTIwIC0gNjANCiAgICBsb2NhbCBzaWRlID0gYm9keXlhdyA+IDAgYW5kIC0xIG9yIDENCiAgICByZXR1cm4gc2lkZQ0KZW5kDQpjb25kdG90YWtlID0gIiINCmZ1bmN0aW9uIGNhbGN1bGF0ZV9ib2R5X2ZzKCkNCiAgICBpZiBub3QgZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSBvciBub3QgY2xpZW50LmN1cnJlbnRfdGhyZWF0KCkgdGhlbg0KICAgICAgICByZXR1cm4gMQ0KICAgIGVuZA0KICAgIGxvY2FsIHgxLCB5MSwgejEgPSBlbnRpdHkuaGl0Ym94X3Bvc2l0aW9uKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksIDApDQogICAgbG9jYWwgeDIsIHkyLCB6MiA9IGVudGl0eS5oaXRib3hfcG9zaXRpb24oY2xpZW50LmN1cnJlbnRfdGhyZWF0KCksIDApDQoNCiAgICBsb2NhbCByZXN1bHQNCiAgICBpZiB4MiAtIHgxIDwgMTAgdGhlbg0KICAgICAgICByZXN1bHQgPSAtMQ0KICAgIGVsc2UNCiAgICAgICAgcmVzdWx0ID0gMQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIHJlc3VsdA0KZW5kDQpsb2NhbCBhbnRpX2FpbXMgPSB7DQogICAgY29uZGl0aW9uID0gIiIsDQp9DQpsb2NhbCBoZWxwZXJzID0gew0KICAgIGxwID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwNCiAgICBncm91bmRfdGlja3MgPSAwLA0KfQ0Kc2tlZXRmYWtlbGFnbGltaXQgPSB1aS5yZWZlcmVuY2UoIkFBIiwiRmFrZSBsYWciLCAiTGltaXQiKQ0Kc2tlZXRmYWtlbGFnYW1vdW50ID0gdWkucmVmZXJlbmNlKCJBQSIsIkZha2UgbGFnIiwgIkFtb3VudCIpDQpsb2NhbCBrZXlzZm9yaW5kcyA9IA0Kew0KICAgZG91YmxldGFwID0gdWkubXVsdGlSZWZlcmVuY2UoIlJBR0UiLCAiQWltYm90IiwgIkRvdWJsZSB0YXAiKTsNCiAgIGhpZGVzaG90cyA9ICB1aS5tdWx0aVJlZmVyZW5jZSgiQUEiLCAiT3RoZXIiLCAiT24gc2hvdCBhbnRpLWFpbSIpOw0KICAgZnJlZXN0YW5kID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJGcmVlc3RhbmRpbmciKTsNCiAgIGRtZyA9IHVpLm11bHRpUmVmZXJlbmNlKCJSQUdFIiwgIkFpbWJvdCIsICJNaW5pbXVtIGRhbWFnZSBvdmVycmlkZSIpOw0KfSAgDQpmdW5jdGlvbiBoZWxwZXJzOmlzX29uX2dyb3VuZCgpDQogICAgbHAgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgaWYgbm90IGxwIHRoZW4gcmV0dXJuIGVuZA0KICAgIGxvY2FsIGZsYWdzID0gZW50aXR5LmdldF9wcm9wKGxwLCAnbV9mRmxhZ3MnKQ0KICAgIGlmIGJpdC5iYW5kKGZsYWdzLCAxKSA9PSAwIHRoZW4NCiAgICAgICAgaGVscGVycy5ncm91bmRfdGlja3MgPSAwDQogICAgZWxzZWlmIGhlbHBlcnMuZ3JvdW5kX3RpY2tzIDw9IDQ1IHRoZW4NCiAgICAgICAgaGVscGVycy5ncm91bmRfdGlja3MgPSBoZWxwZXJzLmdyb3VuZF90aWNrcyArIDENCiAgICBlbmQNCiAgICByZXR1cm4gaGVscGVycy5ncm91bmRfdGlja3MgPj0gNDUNCmVuZA0KZnVuY3Rpb24gYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpDQogICAgbHAgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgaWYgbm90IGxwIG9yIG5vdCBlbnRpdHkuaXNfYWxpdmUobHApIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgaWYgbm90IGVudGl0eS5pc19hbGl2ZShscCkgdGhlbiByZXR1cm4gZW5kDQogICAgICAgICAgICBsb2NhbCBkdWNrX2FtdCA9IGVudGl0eS5nZXRfcHJvcChscCwgJ21fZmxEdWNrQW1vdW50JykNCiAgICAgICAgICAgIGxvY2FsIHNwZWVkID0gdmVjdG9yKGVudGl0eS5nZXRfcHJvcChscCwgJ21fdmVjVmVsb2NpdHknKSk6bGVuZ3RoKCkNCiAgICAgICAgICAgIGlmIHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMV0pIGFuZCB1aS5nZXQoa2V5c2ZvcmluZHMuZG91YmxldGFwWzJdKSBhbmQgbm90IHVpLmdldChyZWYuYW50aWFpbS5mZCkgb3IgdWkuZ2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1sxXSkgYW5kIG5vdCB1aS5nZXQocmVmLmFudGlhaW0uZmQpIGFuZCB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzJdKSB0aGVuDQogICAgICAgICAgICAgICAgaWYgbm90IGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkgYW5kIGR1Y2tfYW10ID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gImp1bXBpbmciDQogICAgICAgICAgICAgICAgZWxzZWlmIGR1Y2tfYW10ID4gMCBhbmQgbm90IGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gImFpcmNyb3VjaGluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgZHVja19hbXQgPiAwIGFuZCBzcGVlZCA8IDMgYW5kIGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkgYW5kIG5vdCB1aS5nZXQocmVmLmFudGlhaW0uZmQpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjcm91Y2hpbmciDQogICAgICAgICAgICAgICAgZWxzZWlmIGR1Y2tfYW10ID4gMCBhbmQgc3BlZWQgPiAzIGFuZCBoZWxwZXJzOmlzX29uX2dyb3VuZCgpIGFuZCBub3QgdWkuZ2V0KHJlZi5hbnRpYWltLmZkKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiY3JvdWNocnVubmluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgc3BlZWQgPiAyIGFuZCBub3QgdWkuZ2V0KHJlZi5hbnRpYWltLnNsb3dfbW90aW9uWzJdKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAicnVubmluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgdWkuZ2V0KHJlZi5hbnRpYWltLnNsb3dfbW90aW9uWzJdKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAic2xvd21vdGlvbiINCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAic3RhbmRpbmciDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuICJmYWtlbGFnIg0KICAgICAgICAgICAgZW5kDQplbmQNCmZ1bmN0aW9uIGFudGlfYWltczpnZXRfZmFrZWxhZ19jb25kKCkNCiAgICBscCA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICBpZiBub3QgbHAgb3Igbm90IGVudGl0eS5pc19hbGl2ZShscCkgdGhlbiByZXR1cm4gZW5kDQogICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2FsaXZlKGxwKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgIGxvY2FsIGR1Y2tfYW10ID0gZW50aXR5LmdldF9wcm9wKGxwLCAnbV9mbER1Y2tBbW91bnQnKQ0KICAgICAgICAgICAgbG9jYWwgc3BlZWQgPSB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKGxwLCAnbV92ZWNWZWxvY2l0eScpKTpsZW5ndGgoKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBoZWxwZXJzOmlzX29uX2dyb3VuZCgpIGFuZCBkdWNrX2FtdCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJqdW1waW5nIg0KICAgICAgICAgICAgICAgIGVsc2VpZiBkdWNrX2FtdCA+IDAgYW5kIG5vdCBoZWxwZXJzOmlzX29uX2dyb3VuZCgpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJhaXJjcm91Y2hpbmciDQogICAgICAgICAgICAgICAgZWxzZWlmIGR1Y2tfYW10ID4gMCBhbmQgc3BlZWQgPCAzIGFuZCBoZWxwZXJzOmlzX29uX2dyb3VuZCgpIGFuZCBub3QgdWkuZ2V0KHJlZi5hbnRpYWltLmZkKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiY3JvdWNoaW5nIg0KICAgICAgICAgICAgICAgIGVsc2VpZiBkdWNrX2FtdCA+IDAgYW5kIHNwZWVkID4gMyBhbmQgaGVscGVyczppc19vbl9ncm91bmQoKSBhbmQgbm90IHVpLmdldChyZWYuYW50aWFpbS5mZCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNyb3VjaHJ1bm5pbmciDQogICAgICAgICAgICAgICAgZWxzZWlmIHNwZWVkID4gMiBhbmQgbm90IHVpLmdldChyZWYuYW50aWFpbS5zbG93X21vdGlvblsyXSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gInJ1bm5pbmciDQogICAgICAgICAgICAgICAgZWxzZWlmIHVpLmdldChyZWYuYW50aWFpbS5zbG93X21vdGlvblsyXSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gInNsb3dtb3Rpb24iDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gInN0YW5kaW5nIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQoNCi0tIENSRUFURSBNT1ZFDQpsb2NhbCBjdXN0b21pbnZlcnQgPSB0cnVlDQpsb2NhbCBjdXN0b212YWx1ZSA9IDANCiAgZnVuY3Rpb24gY3VzdG9tc3dheSgpDQogICAgaWYgY3VzdG9taW52ZXJ0ID09IHRydWUgdGhlbg0KICAgICAgICBjdXN0b212YWx1ZSA9IGN1c3RvbXZhbHVlICsgMC4xDQoNCiAgICAgICAgaWYgY3VzdG9tdmFsdWUgPiAxIHRoZW4gDQogICAgICAgICAgICBjdXN0b21pbnZlcnQgPSBmYWxzZQ0KICAgICAgICBlbmQNCg0KICAgIGVsc2UNCiAgICAgICAgY3VzdG9tdmFsdWUgPSBjdXN0b212YWx1ZSAtIDAuMQ0KICAgICAgICBpZiBjdXN0b212YWx1ZSA8IDAgdGhlbg0KICAgICAgICAgICAgY3VzdG9tdmFsdWUgPSAwDQogICAgICAgICAgICBjdXN0b21pbnZlcnQgPSB0cnVlDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiBjdXN0b212YWx1ZQ0KZW5kDQpsb2NhbCBmdW5jdGlvbiBnZXRfZW50X2Rpc3QoZW50XzEsIGVudF8yKQ0KICAgIGxvY2FsIGVudDFfcG9zID0gdmVjdG9yKGVudGl0eS5nZXRfcHJvcChlbnRfMSwgIm1fdmVjT3JpZ2luIikpDQogICAgbG9jYWwgZW50Ml9wb3MgPSB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKGVudF8yLCAibV92ZWNPcmlnaW4iKSkNCg0KICAgIGxvY2FsIGRpc3QgPSBlbnQxX3BvczpkaXN0KGVudDJfcG9zKQ0KDQogICAgcmV0dXJuIGRpc3QNCmVuZA0KbG9jYWwgZnVuY3Rpb24gaXNfdmlzaWJsZShlbnQpDQogICAgbG9jYWwgbWUgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgbG9jYWwgbF94LCBsX3ksIGxfeiA9IGVudGl0eS5oaXRib3hfcG9zaXRpb24obWUsIDApDQogICAgbG9jYWwgZV94LCBlX3ksIGVfeiA9IGVudGl0eS5oaXRib3hfcG9zaXRpb24oZW50LCAwKQ0KDQogICAgbG9jYWwgZnJhYywgZW50ID0gY2xpZW50LnRyYWNlX2xpbmUobWUsIGxfeCwgbF95LCBsX3osIGVfeCwgZV95LCBlX3opDQoNCiAgICByZXR1cm4gZnJhYyA+IDAuNjUNCmVuZA0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygic2V0dXBfY29tbWFuZCIsIGZ1bmN0aW9uKGNtZCkNCiAgICBtZSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICBpZiBub3QgbWUgb3Igbm90IGVudGl0eS5pc19hbGl2ZShtZSkgdGhlbiByZXR1cm4gZW5kDQogICAgYnJlYWtlci50aWNrYmFzZV9jaGVjayA9IGdsb2JhbHMudGlja2NvdW50KCkgPiBlbnRpdHkuZ2V0X3Byb3AobWUsICJtX25UaWNrYmFzZSIpDQplbmQpDQpsb2NhbCBmdW5jdGlvbiBhbnRpYmFja3N0YWIoKSANCiAgICBsb2NhbCBiZXN0ZW5lbXkgPSBjbGllbnQuY3VycmVudF90aHJlYXQoKQ0KICAgIGxvY2FsIGxwID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgIGlmIG5vdCBiZXN0ZW5lbXkgb3Igbm90IGxwIHRoZW4gcmV0dXJuIGZhbHNlIGVuZA0KICAgIGlmIGVudGl0eS5nZXRfY2xhc3NuYW1lKGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihiZXN0ZW5lbXkpKSA9PSAiQ0tuaWZlIiBhbmQgaXNfdmlzaWJsZShiZXN0ZW5lbXkpIGFuZCBnZXRfZW50X2Rpc3QobHAsIGJlc3RlbmVteSkgPCA0NTAgYW5kIGJlc3RlbmVteSB+PSBuaWwgdGhlbiANCiAgICAgICAgcmV0dXJuIHRydWUgDQogICAgZWxzZSANCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQplbmQNCmZ1bmN0aW9uIHNhZmVoZWFkdGFyZ2V0KCkgDQogICAgbG9jYWwgYmVzdGVuZW15ID0gY2xpZW50LmN1cnJlbnRfdGhyZWF0KCkNCiAgICBpZiBiZXN0ZW5lbXkgPT0gbmlsIHRoZW4gcmV0dXJuIGZhbHNlIGVuZA0KICAgIGlmIGVudGl0eS5nZXRfY2xhc3NuYW1lKGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihiZXN0ZW5lbXkpKSB+PSAiQ0tuaWZlIiBhbmQgZ2V0X2VudF9kaXN0KGxwLCBiZXN0ZW5lbXkpID4gMjUgdGhlbg0KICAgICAgICBsb2NhbCBvcmlnaW4gPSB2ZWN0b3IoZW50aXR5LmdldF9vcmlnaW4oZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSkpDQogICAgICAgIGxvY2FsIG9yaWdpbjIgPSB2ZWN0b3IoZW50aXR5LmdldF9vcmlnaW4oYmVzdGVuZW15KSkNCiAgICAgICAgcmV0dXJuIG9yaWdpbi56IC0gb3JpZ2luMi56ID4gNzANCiAgICBlbHNlDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KZW5kDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJwbGF5ZXJfZGVhdGgiLCBmdW5jdGlvbihlKQ0KICAgIGxvY2FsIGF0dGFja2VyX2VudGluZGV4ID0gY2xpZW50LnVzZXJpZF90b19lbnRpbmRleChlLmF0dGFja2VyKQ0KCWxvY2FsIHZpY3RpbV9lbnRpbmRleCAgID0gY2xpZW50LnVzZXJpZF90b19lbnRpbmRleChlLnVzZXJpZCkNCglsb2NhbCBsb2NhbF9wbGF5ZXIgCQk9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCmlmIHZpY3RpbV9lbnRpbmRleCA9PSBsb2NhbF9wbGF5ZXIgdGhlbg0KICAgIGxvY2FsIG1lc3NhZ2UgPSBzdHJpbmcuZm9ybWF0KCJ5b3UndmUgZ290IGtpbGxlZCBieSAlcyB8IHNhZmVoZWFkOiAlcyB8IGJyb2tlbiBsYzogJXMiLCBlbnRpdHkuZ2V0X3BsYXllcl9uYW1lKGF0dGFja2VyX2VudGluZGV4KSwgc2FmZWhlYWR0YXJnZXQoKSBhbmQgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLnNhZmVfaGVhZCkgYW5kIChhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImFpcmNyb3VjaGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJjcm91Y2hpbmciIG9yIGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKSA9PSAiY3JvdWNocnVubmluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJzdGFuZGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJmYWtlbGFnIiksIGlzX2RlZmVuc2l2ZSkNCiAgICBwcmludChtZXNzYWdlKQ0KZW5kDQplbmQpDQpmcmVlc3RhbmQsIGZyZWVzdGFuZGtleSA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIkZyZWVzdGFuZGluZyIpDQpsYXN0X3ByZXNzX3QgPSAwDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInBhaW50X3VpIiwgZnVuY3Rpb24oKQ0KICAgIGlmIHVpLmdldChrZXliaW5kc190YWIuaGlkZXNob3RzKSB0aGVuDQogICAgICAgIHVpLnNldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMV0sIHRydWUpDQogICAgICAgIHVpLnNldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMl0sICJBbHdheXMgb24iKQ0KICAgIGVsc2UgDQogICAgICAgIHVpLnNldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMV0sIGZhbHNlKQ0KICAgICAgICB1aS5zZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzJdLCAiT24gaG90a2V5IikNCiAgICBlbmQNCiAgICBpZiB1aS5nZXQoa2V5YmluZHNfdGFiLmVkZ2V5YXcpIHRoZW4NCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmVkZ2V5YXcsIHRydWUpDQoJZWxzZSANCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmVkZ2V5YXcsIGZhbHNlKQ0KICAgIGVuZA0KICAgIHVpLnNldChrZXliaW5kc190YWIubWFudWFsX3JpZ2h0LCAiT24gaG90a2V5IikNCiAgICB1aS5zZXQoa2V5YmluZHNfdGFiLm1hbnVhbF9sZWZ0LCAiT24gaG90a2V5IikNCiAgICB1aS5zZXQoa2V5YmluZHNfdGFiLm1hbnVhbF9mb3J3YXJkLCAiT24gaG90a2V5IikNCiAgICBpZiB1aS5nZXQoa2V5YmluZHNfdGFiLm1hbnVhbF9yaWdodCkgYW5kIGxhc3RfcHJlc3NfdCArIDAuMiA8IGdsb2JhbHMuY3VydGltZSgpIHRoZW4NCiAgICAgICAgbWFudWFsX2RpciA9IG1hbnVhbF9kaXIgPT0gMiBhbmQgMCBvciAyDQogICAgICAgIGxhc3RfcHJlc3NfdCA9IGdsb2JhbHMuY3VydGltZSgpDQogICAgZWxzZWlmIHVpLmdldChrZXliaW5kc190YWIubWFudWFsX2xlZnQpIGFuZCBsYXN0X3ByZXNzX3QgKyAwLjIgPCBnbG9iYWxzLmN1cnRpbWUoKSB0aGVuDQogICAgICAgIG1hbnVhbF9kaXIgPSBtYW51YWxfZGlyID09IDEgYW5kIDAgb3IgMQ0KICAgICAgICBsYXN0X3ByZXNzX3QgPSBnbG9iYWxzLmN1cnRpbWUoKQ0KICAgIGVsc2VpZiB1aS5nZXQoa2V5YmluZHNfdGFiLm1hbnVhbF9mb3J3YXJkKSBhbmQgbGFzdF9wcmVzc190ICsgMC4yIDwgZ2xvYmFscy5jdXJ0aW1lKCkgdGhlbg0KICAgICAgICBtYW51YWxfZGlyID0gbWFudWFsX2RpciA9PSAzIGFuZCAwIG9yIDMNCiAgICAgICAgbGFzdF9wcmVzc190ID0gZ2xvYmFscy5jdXJ0aW1lKCkNCiAgICBlbHNlaWYgbGFzdF9wcmVzc190ID4gZ2xvYmFscy5jdXJ0aW1lKCkgdGhlbg0KICAgICAgICBsYXN0X3ByZXNzX3QgPSBnbG9iYWxzLmN1cnRpbWUoKQ0KICAgIGVuZA0KICAgIGlmIHVpLmdldChrZXliaW5kc190YWIuZnJlZXN0YW5kKSBhbmQgbWFudWFsX2RpciA9PSAwIHRoZW4NCgkJdWkuc2V0KGZyZWVzdGFuZCwgdHJ1ZSkNCiAgICAgICAgdWkuc2V0KGZyZWVzdGFuZGtleSwgIkFsd2F5cyBvbiIpIA0KICAgIGVsc2UgDQoJdWkuc2V0KGZyZWVzdGFuZCwgZmFsc2UpDQogICAgICAgIHVpLnNldChmcmVlc3RhbmRrZXksICJPbiBob3RrZXkiKSAgICANCgkJZW5kDQplbmQpDQphYnN0b2ZsaWNrID0gMA0KY2xhbXBlciA9IGZ1bmN0aW9uKGNvdW50KQ0KaWYgY291bnQgPiAxODAgdGhlbiANCnJldHVybiAtMTgwICsgKGNvdW50IC0gMTgwKQ0KZWxzZWlmIGNvdW50IDwgLTE4MCB0aGVuDQpyZXR1cm4gMTgwIC0gKC0xODAgLSBjb3VudCkNCmVuZA0KZW5kDQptYW51YWxfZGlyID0gMA0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygic2V0dXBfY29tbWFuZCIsIGZ1bmN0aW9uKGNtZCkNCiAgICBsb2NhbCB0cF9hbW91bnQgPSBnZXRfYXZlcmFnZShicmVha2VyLnRwX2RhdGEpL2dldF92ZWxvY2l0eShlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpKSoxMDAgDQogICAgZXhwbG9pdGluZyA9IHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMV0pIGFuZCB1aS5nZXQoa2V5c2ZvcmluZHMuZG91YmxldGFwWzJdKSBhbmQgbm90IHVpLmdldChyZWYuYW50aWFpbS5mZCkgb3IgdWkuZ2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1sxXSkgYW5kIG5vdCB1aS5nZXQocmVmLmFudGlhaW0uZmQpIGFuZCB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzJdKSANCiAgICBpc19kZWZlbnNpdmUgPSBub3QgdWkuZ2V0KGtleWJpbmRzX3RhYi5ub19kZWZlbnNpdmUpIGFuZCBicmVha2VyLnRpY2tiYXNlX2NoZWNrIGFuZCBicmVha2VyLmRlZmVuc2l2ZSA+IDIgYW5kIGJyZWFrZXIuZGVmZW5zaXZlIDwgMTQgYW5kIGV4cGxvaXRpbmcNCiAgICBoYW5kbGVfYWEgPSBmdW5jdGlvbihwaXRjaCwgcGl0Y2hzbGlkZXIsIGF0X3RhcmdldHMsIHdheXMsIGxlZnRfeWF3LCByaWdodF95YXcsIG11bHRpcGxpZXIsIHJhbmRvbWl6YXRpb24sIGxieSwgbGJ5c2lkZSwgbGJ5c3BlZWQsIGZha2VsYWdtb2RlLCBmYWtlbGFnc2xpZGVyLCBkZWZlbnNpdmVtb2RlLCBkZWZlbnNpdmVwaXRjaCwgZGVmZW5zaXZlc2xpZGVyLCBkZWZlbnNpdmVhdHRhcmdldHMsIGRlZmVuc2l2ZXlhdywgZGVmZW5zaXZlbGVmdCwgZGVmZW5zaXZlcmlnaHQpDQogICAgICAgIGNtZC5mb3JjZV9kZWZlbnNpdmUgPSBub3QgYnJlYWtlci5sYWdjb21wZW5zYXRpb24udGVsZXBvcnQgYW5kIGRlZmVuc2l2ZW1vZGUgPT0gImZvcmNlIiBhbmQgbm90ICh0cF9hbW91bnQgPj0gMjUgYW5kIGJyZWFrZXIuZGVmZW5zaXZlID49IDEyKQ0KICAgICAgICBpZiBwaXRjaCA9PSAibG9jYWwgdmlldyIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJPZmYiKSBlbHNlaWYgcGl0Y2ggPT0gImN1c3RvbSIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKSB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIHBpdGNoc2xpZGVyKSBlbHNlaWYgcGl0Y2ggPT0gInJhbmRvbSIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJSYW5kb20iKSBlbHNlaWYgcGl0Y2ggPT0gInVwIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIlVwIikgZWxzZWlmIHBpdGNoID09ICJkb3duIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk1pbmltYWwiKSBlbmQNCiAgICAgICAgaWYgYXRfdGFyZ2V0cyB0aGVuIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkF0IHRhcmdldHMiKSBlbHNlIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKSBlbmQNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgIGlmIHdheXMgPT0gMyB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJTa2l0dGVyIikgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgbXVsdGlwbGllcikgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMCkgDQogICAgICAgIGVsc2UgDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiUmFuZG9tIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIHJhbmRvbWl6YXRpb24pDQogICAgICAgIGlmIGRlc3luY3NpZGUoKSA9PSAtMSB0aGVuIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIGxlZnRfeWF3KSBlbHNlIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIHJpZ2h0X3lhdykgZW5kDQogICAgICAgIGVuZA0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICAgICAgaWYgbGJ5ID09ICJvcHBvc2l0ZSIgdGhlbg0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT3Bwb3NpdGUiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCB0cnVlKQ0KICAgICAgICBlbHNlaWYgbGJ5ID09ICJzdGF0aWMiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIlN0YXRpYyIpDQogICAgICAgICAgICBpZiBsYnlzaWRlID09ICJsZWZ0IiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgLTU4KSBlbHNlaWYgbGJ5c2lkZSA9PSAicmlnaHQiIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCA1OCkgZWxzZWlmIGxieXNpZGUgPT0gImF1dG8iIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCA1OCAqIGNhbGN1bGF0ZV9ib2R5X2ZzKCkpIGVuZA0KICAgICAgICBlbHNlaWYgbGJ5ID09ICJ0aWNrY291bnQiIHRoZW4gDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJKaXR0ZXIiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAtMSkNCiAgICAgICAgZWxzZWlmIGxieSA9PSAic3BlZWQgYmFzZWQiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIlN0YXRpYyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIHNtb290aEppdHRlcigtNjAsNjAsbGJ5c3BlZWQpKQ0KICAgICAgICBlbHNlaWYgbGJ5ID09ICJvZmYiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgIGVuZA0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZmFrZWxhZ2VuYWJsZWRbMV0sIHRydWUpDQogICAgICAgIC0tIHVpLnNldChyZWYuYW50aWFpbS5mYWtlbGFndmFyaWFuY2UsIG1hdGgucmFuZG9tKDEsNSkpDQogICAgICAgIGlmIGZha2VsYWdtb2RlID09ICJtYXhpbXVtIiB0aGVuDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mYWtlbGFnYW1vdW50WzFdLCAiTWF4aW11bSIpDQogICAgICAgIGVsc2VpZiBmYWtlbGFnbW9kZSA9PSAiZHluYW1pYyIgdGhlbg0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZmFrZWxhZ2Ftb3VudFsxXSwgIkR5bmFtaWMiKQ0KICAgICAgICBlbHNlaWYgZmFrZWxhZ21vZGUgPT0gImZsdWN0dWF0ZSIgdGhlbg0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZmFrZWxhZ2Ftb3VudFsxXSwgIkZsdWN0dWF0ZSIpDQogICAgICAgIGVuZA0KICAgICAgICB1aS5zZXQoc2tlZXRmYWtlbGFnbGltaXQsIGZha2VsYWdzbGlkZXIpDQogICAgICAgIC0tIFNBRkVLTklGRQ0KICAgICAgICBpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuc2FmZV9rbmlmZSkgYW5kIGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKSA9PSAiYWlyY3JvdWNoaW5nIiBhbmQgZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpKSA9PSAiQ0tuaWZlIiB0aGVuDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJNaW5pbWFsIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkF0IHRhcmdldHMiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIk9mZnNldCIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiU3RhdGljIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgMCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgIGVuZA0KICAgICAgICAtLSBTQUZFWkVVUw0KICAgICAgICBpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuc2FmZV96ZXVzKSBhbmQgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJhaXJjcm91Y2hpbmciIGFuZCBlbnRpdHkuZ2V0X2NsYXNzbmFtZShlbnRpdHkuZ2V0X3BsYXllcl93ZWFwb24oZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSkpID09ICJDV2VhcG9uVGFzZXIiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIDg5KQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiUmFuZG9tIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJTdGF0aWMiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICBlbmQgDQogICAgICAgIC0tIFNBRkUgSEVBRCANCiAgICAgICAgaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLnNhZmVfaGVhZCkgYW5kIHNhZmVoZWFkdGFyZ2V0KCkgYW5kIChhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImFpcmNyb3VjaGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJjcm91Y2hpbmciIG9yIGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKSA9PSAiY3JvdWNocnVubmluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJzdGFuZGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJmYWtlbGFnIikgdGhlbg0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk1pbmltYWwiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJTdGF0aWMiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICBlbmQgICAgIA0KICAgICAgICAgLS0gU1RBVElDIEZSRUVTVEFORA0KICAgIGlmIHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5zdGF0aWNfZnJlZXN0YW5kKSBhbmQgdWkuZ2V0KGtleWJpbmRzX3RhYi5mcmVlc3RhbmQpIHRoZW4NCiAgICAgICAgaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmZsaWNrb25tYW51bHMpIHRoZW4gY21kLmZvcmNlX2RlZmVuc2l2ZSA9IDEgZW5kDQogICAgaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmZsaWNrb25tYW51bHMpIGFuZCBpc19kZWZlbnNpdmUgdGhlbg0KICAgICAgICBjbWQueWF3ID0gYWJzdG9mbGljayArIDE4MA0KICAgICAgICBjbWQucGl0Y2ggPSAxMDgwDQogICAgICAgIGNtZC5mb3JjZV9kZWZlbnNpdmUgPSAxDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgMCkNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCBjbGFtcGVyKGFic3RvZmxpY2spKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiU3RhdGljIikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKSAgIA0KICAgIGVsc2UNCiAgICBhYnN0b2ZsaWNrID0gYW50aWFpbV9mdW5jcy5nZXRfYWJzX3lhdygpDQogICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiTWluaW1hbCIpDQogICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpDQogICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMCkNCiAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIlN0YXRpYyIpDQogICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgdHJ1ZSkNCiAgICBlbmQNCiAgICAgICAgZW5kICAgDQogICAgICAgIC0tIERFRkVOU0lWRSBBQQ0KICAgICAgICBpZiBpc19kZWZlbnNpdmUgYW5kIGRlZmVuc2l2ZW1vZGUgfj0gIm9mZiIgdGhlbiANCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgIGlmIGRlZmVuc2l2ZXBpdGNoID09ICJsb2NhbCB2aWV3IiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk9mZiIpIA0KICAgICAgICBlbHNlaWYgZGVmZW5zaXZlcGl0Y2ggPT0gInNpZGV3YXlzIiB0aGVuICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKSB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIC02OSAtIDE5ICogY3VzdG9tc3dheSgpKQ0KICAgICAgICBlbHNlaWYgZGVmZW5zaXZlcGl0Y2ggPT0gInN3YXkiIHRoZW4gIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgLTgwICogY3VzdG9tc3dheSgpKQ0KICAgICAgICBlbHNlaWYgZGVmZW5zaXZlcGl0Y2ggPT0gImN1c3RvbSIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKSB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIGRlZmVuc2l2ZXNsaWRlcikgDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmVwaXRjaCA9PSAic2VtaS11cCIgdGhlbiAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiQ3VzdG9tIikgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzJdLCAtNDUpDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmVwaXRjaCA9PSAic2VtaS1kb3duIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgNDUpICANCiAgICAgICAgZWxzZWlmIGRlZmVuc2l2ZXBpdGNoID09ICJ1cCIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKSB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIC04OSkNCiAgICAgICAgZWxzZWlmIGRlZmVuc2l2ZXBpdGNoID09ICJkb3duIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk1pbmltYWwiKSANCiAgICAgICAgZWxzZWlmIGRlZmVuc2l2ZXBpdGNoID09ICJyYW5kb20iIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiUmFuZG9tIikgDQogICAgICAgIGVuZCANCiAgICAgICAgaWYgZGVmZW5zaXZlYXR0YXJnZXRzIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpIGVsc2UgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpIGVuZA0KICAgICAgICBpZiBkZWZlbnNpdmV5YXcgfj0gImFsbCB0aGUgc2lkZXMiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJSYW5kb20iKSB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICBpZiBkZWZlbnNpdmV5YXcgPT0gInNsb3cgc3BpbiIgdGhlbg0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiU3BpbiIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDMwKQ0KICAgICAgICBlbHNlaWYgZGVmZW5zaXZleWF3ID09ICJmYXN0IHNwaW4iIHRoZW4NCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIlNwaW4iKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAxMTcpDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmV5YXcgPT0gInNpZGV3YXlzIiB0aGVuDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCBzbW9vdGhKaXR0ZXIobWF0aC5yYW5kb20oLTkwLC0xMDcpLCBtYXRoLnJhbmRvbSg5MCwxMDcpLCAxMCkpDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmV5YXcgPT0gImN1c3RvbSIgdGhlbg0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgc21vb3RoSml0dGVyKGRlZmVuc2l2ZWxlZnQsIGRlZmVuc2l2ZXJpZ2h0LCAxMCkpDQogICAgICAgIGVuZA0KICAgIGVsc2UgDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJTa2l0dGVyIikgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgLTE4MCkNCiAgICAgICAgZW5kIA0KDQoNCiAgICAgICAgZW5kDQogICAgLS0NCiAgICAgICAgLS0gTUFOVUFMIEFBDQogICAgICAgIGlmIG1hbnVhbF9kaXIgPT0gMiB0aGVuDQogICAgICAgICAgICBjbWQuZm9yY2VfZGVmZW5zaXZlID0gMQ0KICAgICAgICAgICAgaWYgbm90IGlzX2RlZmVuc2l2ZSBvciBub3QgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmZsaWNrb25tYW51bHMpIHRoZW4gDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJNaW5pbWFsIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCA5MCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgICAgICAgICAgZWxzZSANCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgMCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAtOTApDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIk9mZnNldCIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJPZmYiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgMCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBtYW51YWxfZGlyID09IDEgdGhlbg0KICAgICAgICAgICAgY21kLmZvcmNlX2RlZmVuc2l2ZSA9IDENCiAgICAgICAgICAgIGlmIG5vdCBpc19kZWZlbnNpdmUgb3Igbm90IHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5mbGlja29ubWFudWxzKSB0aGVuIA0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk1pbmltYWwiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIC05MCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgICAgICAgICAgZWxzZSANCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiQ3VzdG9tIikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzJdLCAwKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDkwKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT2ZmIikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgbWFudWFsX2RpciA9PSAzIHRoZW4NCiAgICAgICAgICAgIGNtZC5mb3JjZV9kZWZlbnNpdmUgPSAxDQogICAgICAgICAgICBpZiBub3QgaXNfZGVmZW5zaXZlIG9yIG5vdCB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuZmxpY2tvbm1hbnVscykgdGhlbiANCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJNaW5pbWFsIikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAxODApDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIk9mZnNldCIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJPZmYiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgMCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiQ3VzdG9tIikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzJdLCAwKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDApDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJPZmYiKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCi0tLQ0KICAgIGNvbmR0b3Rha2UgPSBhbnRpYWltX3RhYlthbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCldDQogICAgY29uZHRvdGFrZWZsYWdzID0gYW50aWFpbV90YWJbYW50aV9haW1zOmdldF9mYWtlbGFnX2NvbmQoKV0NCiAgICBsb2NhbCBwaXRjaCA9IHVpLmdldChjb25kdG90YWtlLnBpdGNoKQ0KICAgIGxvY2FsIHBpdGNoc2xpZGVyID0gdWkuZ2V0KGNvbmR0b3Rha2UucGl0Y2hfc2xpZGVyKSANCiAgICBsb2NhbCBhdF90YXJnZXRzID0gdWkuZ2V0KGNvbmR0b3Rha2UuYXRfdGFyZ2V0cykgDQogICAgbG9jYWwgd2F5cyA9IHVpLmdldChjb25kdG90YWtlLndheXMpIA0KICAgIGxvY2FsIGxlZnRfeWF3ID0gdWkuZ2V0KGNvbmR0b3Rha2UubGVmdF95YXcpIA0KICAgIGxvY2FsIHJpZ2h0X3lhdyA9IHVpLmdldChjb25kdG90YWtlLnJpZ2h0X3lhdykgDQogICAgbG9jYWwgbXVsdGlwbGllciA9IHVpLmdldChjb25kdG90YWtlLm11bHRpcGxpZXIpIA0KICAgIGxvY2FsIHJhbmRvbWl6YXRpb24gPSB1aS5nZXQoY29uZHRvdGFrZS5yYW5kb21pemF0aW9uKSANCiAgICBsb2NhbCBsYnkgPSB1aS5nZXQoY29uZHRvdGFrZS5sYnkpIA0KICAgIGxvY2FsIGxieXNpZGUgPSB1aS5nZXQoY29uZHRvdGFrZS5sYnlzaWRlKSAgDQogICAgbG9jYWwgbGJ5c3BlZWQgPSB1aS5nZXQoY29uZHRvdGFrZS5sYnlzcGVlZCkgDQogICAgaWYgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpIH49ICJmYWtlbGFnIiB0aGVuDQogICAgIGZha2VsYWdtb2RlID0gdWkuZ2V0KGNvbmR0b3Rha2UuZmFrZWxhZ21vZGUpIA0KICAgICBmYWtlbGFnc2xpZGVyID0gdWkuZ2V0KGNvbmR0b3Rha2UuZmFrZWxhZ3NsaWRlcikgDQogICAgIGRlZmVuc2l2ZW1vZGUgPSB1aS5nZXQoY29uZHRvdGFrZS5kZWZlbnNpdmUuYWEpIA0KICAgICBkZWZlbnNpdmVwaXRjaCA9IHVpLmdldChjb25kdG90YWtlLmRlZmVuc2l2ZS5waXRjaCkgIA0KICAgICBkZWZlbnNpdmVzbGlkZXIgPSB1aS5nZXQoY29uZHRvdGFrZS5kZWZlbnNpdmUucGl0Y2hfc2xpZGVyKSANCiAgICAgZGVmZW5zaXZlYXR0YXJnZXRzID0gdWkuZ2V0KGNvbmR0b3Rha2UuZGVmZW5zaXZlLmF0X3RhcmdldHMpIA0KICAgICBkZWZlbnNpdmV5YXcgPSB1aS5nZXQoY29uZHRvdGFrZS5kZWZlbnNpdmUueWF3KSANCiAgICAgZGVmZW5zaXZlbGVmdCA9IHVpLmdldChjb25kdG90YWtlLmRlZmVuc2l2ZS5sZWZ0X3lhdykgDQogICAgIGRlZmVuc2l2ZXJpZ2h0ID0gdWkuZ2V0KGNvbmR0b3Rha2UuZGVmZW5zaXZlLnJpZ2h0X3lhdykgDQogICAgZWxzZQ0KICAgICAgICAgZmFrZWxhZ21vZGUgPSB1aS5nZXQoY29uZHRvdGFrZWZsYWdzLmZha2VsYWdtb2RlKSANCiAgICAgICAgIGZha2VsYWdzbGlkZXIgPSB1aS5nZXQoY29uZHRvdGFrZWZsYWdzLmZha2VsYWdzbGlkZXIpIA0KICAgICAgICAgZGVmZW5zaXZlbW9kZSA9IHVpLmdldChjb25kdG90YWtlZmxhZ3MuZGVmZW5zaXZlLmFhKSANCiAgICAgICAgIGRlZmVuc2l2ZXBpdGNoID0gdWkuZ2V0KGNvbmR0b3Rha2VmbGFncy5kZWZlbnNpdmUucGl0Y2gpICANCiAgICAgICAgIGRlZmVuc2l2ZXNsaWRlciA9IHVpLmdldChjb25kdG90YWtlZmxhZ3MuZGVmZW5zaXZlLnBpdGNoX3NsaWRlcikgDQogICAgICAgICBkZWZlbnNpdmVhdHRhcmdldHMgPSB1aS5nZXQoY29uZHRvdGFrZWZsYWdzLmRlZmVuc2l2ZS5hdF90YXJnZXRzKSANCiAgICAgICAgIGRlZmVuc2l2ZXlhdyA9IHVpLmdldChjb25kdG90YWtlZmxhZ3MuZGVmZW5zaXZlLnlhdykgDQogICAgICAgICBkZWZlbnNpdmVsZWZ0ID0gdWkuZ2V0KGNvbmR0b3Rha2VmbGFncy5kZWZlbnNpdmUubGVmdF95YXcpIA0KICAgICAgICAgZGVmZW5zaXZlcmlnaHQgPSB1aS5nZXQoY29uZHRvdGFrZWZsYWdzLmRlZmVuc2l2ZS5yaWdodF95YXcpIA0KICAgIGVuZA0KICAgIGlmIGV4cGxvaXRpbmcgYW5kIHVpLmdldChyYWdlYm90X3RhYi5jdXN0b21fZXhwbG9pdHMpIHRoZW4gDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mYWtlbGFnZW5hYmxlZFsxXSwgZmFsc2UpDQogICAgZW5kDQogICAgaGFuZGxlX2FhKHBpdGNoLCBwaXRjaHNsaWRlciwgYXRfdGFyZ2V0cywgd2F5cywgbGVmdF95YXcsIHJpZ2h0X3lhdywgbXVsdGlwbGllciwgcmFuZG9taXphdGlvbiwgbGJ5LCBsYnlzaWRlLCBsYnlzcGVlZCwgZmFrZWxhZ21vZGUsIGZha2VsYWdzbGlkZXIsIGRlZmVuc2l2ZW1vZGUsIGRlZmVuc2l2ZXBpdGNoLCBkZWZlbnNpdmVzbGlkZXIsIGRlZmVuc2l2ZWF0dGFyZ2V0cywgZGVmZW5zaXZleWF3LCBkZWZlbnNpdmVsZWZ0LCBkZWZlbnNpdmVyaWdodCkNCg0KZW5kKQ0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJzZXR1cF9jb21tYW5kIiwgZnVuY3Rpb24oKQ0KICAgIGlmIHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5hdm9pZF9iYWNrc3RhYikgYW5kIGFudGliYWNrc3RhYigpIHRoZW4NCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiRG93biIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkF0IHRhcmdldHMiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMTgwKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiU3RhdGljIikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgIGVuZA0KZW5kKQ0KDQotLSBib21ic2l0ZSBlIGZpeCANCiBmdW5jdGlvbiBkaXN0YW5jZTNkKHgxLCB5MSwgejEsIHgyLCB5MiwgejIpDQoJcmV0dXJuIG1hdGguc3FydCgoeDIteDEpKih4Mi14MSkgKyAoeTIteTEpKih5Mi15MSkgKyAoejItejEpKih6Mi16MSkpDQplbmQNCg0KIGZ1bmN0aW9uIGVudGl0eV9oYXNfYzQoZW50KQ0KCWxvY2FsIGJvbWIgPSBlbnRpdHkuZ2V0X2FsbCgiQ0M0IilbMV0NCglyZXR1cm4gYm9tYiB+PSBuaWwgYW5kIGVudGl0eS5nZXRfcHJvcChib21iLCAibV9oT3duZXJFbnRpdHkiKSA9PSBlbnQNCmVuZA0KIGNsYXNzbmFtZXMgPSB7DQoJIkNXb3JsZCIsDQoJIkNDU1BsYXllciIsDQoJIkNGdW5jQnJ1c2giDQoJfQ0KICAgIHRyeW5uYV9wbGFudCA9IGZhbHNlDQogICAgdXNpbmcgPSBmYWxzZQ0KLS0gTEVHSVQgQUEgKyBCT01CU0lURSBFIEZJWA0KICAgIGNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInNldHVwX2NvbW1hbmQiLCBmdW5jdGlvbihjbWQpDQoJCWxvY2FsIHBsb2NhbCA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICAgICAgaWYgY21kLmluX3VzZSA9PSAxIHRoZW4NCiAgICAgICAgaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmxlZ2l0YWEpID09ICJvZmYiIHRoZW4NCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJPZmYiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDE4MCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgIGVsc2VpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIubGVnaXRhYSkgPT0gIjIgd2F5IiB0aGVuDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJPZmYiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDE4MCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJDZW50ZXIiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgOTApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJKaXR0ZXIiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAtMSkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgIGVsc2VpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIubGVnaXRhYSkgPT0gIjMgd2F5IiB0aGVuDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJPZmYiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDE4MCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJTa2l0dGVyIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDc3KQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiSml0dGVyIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgLTEpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgICAgICBlbHNlaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmxlZ2l0YWEpID09ICJzdGF0aWMiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk9mZiIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMTgwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIk9mZnNldCIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT3Bwb3NpdGUiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCB0cnVlKQ0KICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCANCgkJaWYgbm90IHBsb2NhbCBvciBub3QgZW50aXR5LmlzX2FsaXZlKHBsb2NhbCkgdGhlbiByZXR1cm4gZW5kDQoJCWxvY2FsIGRpc3RhbmNlID0gMTAwDQoJCWxvY2FsIGJvbWIgPSBlbnRpdHkuZ2V0X2FsbCgiQ1BsYW50ZWRDNCIpWzFdDQoJCWxvY2FsIGJvbWJfeCwgYm9tYl95LCBib21iX3ogPSBlbnRpdHkuZ2V0X3Byb3AoYm9tYiwgIm1fdmVjT3JpZ2luIikNCg0KCQlpZiBib21iX3ggfj0gbmlsIHRoZW4NCgkJCWxvY2FsIHBsYXllcl94LCBwbGF5ZXJfeSwgcGxheWVyX3ogPSBlbnRpdHkuZ2V0X3Byb3AocGxvY2FsLCAibV92ZWNPcmlnaW4iKQ0KCQkJZGlzdGFuY2UgPSBkaXN0YW5jZTNkKGJvbWJfeCwgYm9tYl95LCBib21iX3osIHBsYXllcl94LCBwbGF5ZXJfeSwgcGxheWVyX3opDQoJCWVuZA0KCQkNCgkJbG9jYWwgdGVhbV9udW0gPSBlbnRpdHkuZ2V0X3Byb3AocGxvY2FsLCAibV9pVGVhbU51bSIpDQoJCWxvY2FsIGRlZnVzaW5nID0gdGVhbV9udW0gPT0gMyBhbmQgZGlzdGFuY2UgPCA2Mg0KDQoJCWxvY2FsIG9uX2JvbWJzaXRlID0gZW50aXR5LmdldF9wcm9wKHBsb2NhbCwgIm1fYkluQm9tYlpvbmUiKQ0KDQoJCWxvY2FsIGhhc19ib21iID0gZW50aXR5X2hhc19jNChwbG9jYWwpDQoJCWxvY2FsIHRyeW5uYV9wbGFudCA9IG9uX2JvbWJzaXRlIH49IDAgYW5kIHRlYW1fbnVtID09IDIgYW5kIGhhc19ib21iIGFuZCBub3QgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmJvbWJzaXRlZWZpeCkNCgkJDQoJCWxvY2FsIHB4LCBweSwgcHogPSBjbGllbnQuZXllX3Bvc2l0aW9uKCkNCgkJbG9jYWwgcGl0Y2gsIHlhdyA9IGNsaWVudC5jYW1lcmFfYW5nbGVzKCkNCgkNCgkJbG9jYWwgc2luX3BpdGNoID0gbWF0aC5zaW4obWF0aC5yYWQocGl0Y2gpKQ0KCQlsb2NhbCBjb3NfcGl0Y2ggPSBtYXRoLmNvcyhtYXRoLnJhZChwaXRjaCkpDQoJCWxvY2FsIHNpbl95YXcgPSBtYXRoLnNpbihtYXRoLnJhZCh5YXcpKQ0KCQlsb2NhbCBjb3NfeWF3ID0gbWF0aC5jb3MobWF0aC5yYWQoeWF3KSkNCg0KCQlsb2NhbCBkaXJfdmVjID0geyBjb3NfcGl0Y2ggKiBjb3NfeWF3LCBjb3NfcGl0Y2ggKiBzaW5feWF3LCAtc2luX3BpdGNoIH0NCg0KCQlsb2NhbCBmcmFjdGlvbiwgZW50aW5kZXggPSBjbGllbnQudHJhY2VfbGluZShwbG9jYWwsIHB4LCBweSwgcHosIHB4ICsgKGRpcl92ZWNbMV0gKiA4MTkyKSwgcHkgKyAoZGlyX3ZlY1syXSAqIDgxOTIpLCBweiArIChkaXJfdmVjWzNdICogODE5MikpDQoNCgkJbG9jYWwgdXNpbmcgPSB0cnVlDQoNCgkJaWYgZW50aW5kZXggfj0gbmlsIHRoZW4NCgkJCWZvciBpPTAsICNjbGFzc25hbWVzIGRvDQoJCQkJaWYgZW50aXR5LmdldF9jbGFzc25hbWUoZW50aW5kZXgpID09IGNsYXNzbmFtZXNbaV0gdGhlbg0KCQkJCQl1c2luZyA9IGZhbHNlDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoNCgkJaWYgbm90IHVzaW5nIGFuZCBub3QgdHJ5bm5hX3BsYW50IGFuZCBub3QgZGVmdXNpbmcgdGhlbg0KCQkJY21kLmluX3VzZSA9IDANCgkJZW5kDQplbmQpDQoNCg0KLS0gQU5JTSBGVUNLRVJTIEFORCBTSElUDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJzZXR1cF9jb21tYW5kIiwgZnVuY3Rpb24oZSkNCiAgICBsb2NhbCBsb2NhbF9wbGF5ZXIgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgbGVnTW92ZW1lbnQgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIk90aGVyIiwgIkxlZyBtb3ZlbWVudCIpDQogICAgbG9jYWwgaXNfb25fZ3JvdW5kID0gZS5pbl9qdW1wID09IDANCiAgICBpZiBmdW5jLmluY2x1ZGVzKHVpLmdldCh2aXN1YWxzX3RhYi5hbmltZml4c2VsKSwgImdyb3VuZCIpIHRoZW4NCiAgICAgICAgaWYgZnVuYy5pbmNsdWRlcyh1aS5nZXQodmlzdWFsc190YWIuYW5pbWZpeHNlbCksICJncm91bmQiKSB0aGVuDQogICAgICAgICAgICBlbnRpdHkuc2V0X3Byb3AobG9jYWxfcGxheWVyLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCBjbGllbnQucmFuZG9tX2Zsb2F0KDUgLyAxMCwgMSksIDApDQogICAgICAgICAgICB1aS5zZXQobGVnTW92ZW1lbnQsIGNsaWVudC5yYW5kb21faW50KDEsIDIpID09IDEgYW5kICJPZmYiIG9yICJBbHdheXMgc2xpZGUiKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZCkNCg0KbG9jYWwgbGVnc1NhdmVkID0gZmFsc2UNCmxvY2FsIGxlZ3NUeXBlcyA9IHtbMV0gPSAiT2ZmIiwgWzJdID0gIkFsd2F5cyBzbGlkZSIsIFszXSA9ICJOZXZlciBzbGlkZSJ9DQpsb2NhbCBncm91bmRfdGlja3MgPSAwDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJwcmVfcmVuZGVyIiwgZnVuY3Rpb24oKQ0KICAgIGlmIG5vdCBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpIHRoZW4gcmV0dXJuIGVuZA0KICAgIGlmIG5vdCB1aS5nZXQodmlzdWFsc190YWIuYW5pbWZpeGVuYikgdGhlbiByZXR1cm4gZW5kDQogICAgbG9jYWwgbHAgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgbG9jYWwgZmxhZ3MgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZkZsYWdzIikNCiAgICBncm91bmRfdGlja3MgPSBiaXQuYmFuZChmbGFncywgMSkgPT0gMCBhbmQgMCBvciAoZ3JvdW5kX3RpY2tzIDwgNSBhbmQgZ3JvdW5kX3RpY2tzICsgMSBvciBncm91bmRfdGlja3MpDQogICAgbG9jYWwgc2VsZl9pbmRleCA9IGNfZW50aXR5Lm5ldyhscCkNCg0KICAgIGlmIGZ1bmMuaW5jbHVkZXModWkuZ2V0KHZpc3VhbHNfdGFiLmFuaW1maXhzZWwpLCAiYWlyIikgYW5kIHVpLmdldCh2aXN1YWxzX3RhYi5haXJ0eXBlKSA9PSAiZGVmYXVsdCIgdGhlbg0KICAgICAgICBlbnRpdHkuc2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgMSwgNikgDQogICAgZW5kDQoNCiAgICBpZiBmdW5jLmluY2x1ZGVzKHVpLmdldCh2aXN1YWxzX3RhYi5hbmltZml4c2VsKSwgImdyb3VuZCIpIHRoZW4NCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGxwLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAxLCBnbG9iYWxzLnRpY2tjb3VudCgpICUgMyA+IDAgYW5kIDEgLyAzIG9yIDEwKQ0KICAgIGVuZA0KDQogICAgaWYgZnVuYy5pbmNsdWRlcyh1aS5nZXQodmlzdWFsc190YWIuYW5pbWZpeHNlbCksICJhaXIiKSBhbmQgdWkuZ2V0KHZpc3VhbHNfdGFiLmFpcnR5cGUpID09ICJzaGFrZXIiIHRoZW4NCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIG1hdGgucmFuZG9tKDAsIDEwKS8xMCwgMykNCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIG1hdGgucmFuZG9tKDAsIDEwKS8xMCwgNykNCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIG1hdGgucmFuZG9tKDAsIDEwKS8xMCwgNikNCiAgICBlbmQNCg0KICAgIGlmIGZ1bmMuaW5jbHVkZXModWkuZ2V0KHZpc3VhbHNfdGFiLmFuaW1maXhzZWwpLCAiemVybyBvbiBncm91bmQiKSB0aGVuDQogICAgICAgIGdyb3VuZF90aWNrcyA9IGJpdC5iYW5kKGZsYWdzLCAxKSA9PSAxIGFuZCBncm91bmRfdGlja3MgKyAxIG9yIDANCg0KICAgICAgICBpZiBncm91bmRfdGlja3MgPiAyMCBhbmQgZ3JvdW5kX3RpY2tzIDwgMTUwIHRoZW4NCiAgICAgICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAwLjUsIDEyKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIGlmIGZ1bmMuaW5jbHVkZXModWkuZ2V0KHZpc3VhbHNfdGFiLmFuaW1maXhzZWwpLCAiYm9keWxlYW4iKSB0aGVuDQogICAgICAgIGxvY2FsIHNlbGZfYW5pbV9vdmVybGF5ID0gc2VsZl9pbmRleDpnZXRfYW5pbV9vdmVybGF5KDEyKQ0KICAgICAgICBpZiBub3Qgc2VsZl9hbmltX292ZXJsYXkgdGhlbg0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvY2FsIHhfdmVsb2NpdHkgPSBlbnRpdHkuZ2V0X3Byb3AobHAsICJtX3ZlY1ZlbG9jaXR5WzBdIikNCiAgICAgICAgaWYgbWF0aC5hYnMoeF92ZWxvY2l0eSkgPj0gMCB0aGVuDQogICAgICAgICAgICBzZWxmX2FuaW1fb3ZlcmxheS53ZWlnaHQgPSAxMDAgLyAxMDANCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICBpZiBmdW5jLmluY2x1ZGVzKHVpLmdldCh2aXN1YWxzX3RhYi5hbmltZml4c2VsKSwgImFpciIpIGFuZCB1aS5nZXQodmlzdWFsc190YWIuYWlydHlwZSkgPT0gIm1vb253YWxrIiB0aGVuDQogICAgICAgIGlmIG5vdCBsZWdzU2F2ZWQgdGhlbg0KICAgICAgICAgICAgbGVnc1NhdmVkID0gdWkuZ2V0KGxlZ01vdmVtZW50KQ0KICAgICAgICBlbmQNCiAgICAgICAgdWkuc2V0X3Zpc2libGUobGVnTW92ZW1lbnQsIGZhbHNlKQ0KICAgICAgICBlbnRpdHkuc2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgMCwgNykNCiAgICAgICAgbG9jYWwgbWUgPSBlbnQuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgICAgIGxvY2FsIGZsYWdzID0gbWU6Z2V0X3Byb3AoIm1fZkZsYWdzIikNCiAgICAgICAgbG9jYWwgb25ncm91bmQgPSBiaXQuYmFuZChmbGFncywgMSkgfj0gMA0KICAgICAgICBpZiBub3Qgb25ncm91bmQgdGhlbg0KICAgICAgICAgICAgbG9jYWwgbXlfYW5pbWxheWVyID0gbWU6Z2V0X2FuaW1fb3ZlcmxheSg2KSAtLSBNT1ZFTUVOVF9NT1ZFDQogICAgICAgICAgICBteV9hbmltbGF5ZXIud2VpZ2h0ID0gMQ0KICAgICAgICBlbmQNCiAgICAgICAgdWkuc2V0KGxlZ01vdmVtZW50LCAiT2ZmIikNCiAgICBlbHNlaWYgKGxlZ3NTYXZlZCA9PSAiT2ZmIiBvciBsZWdzU2F2ZWQgPT0gIkFsd2F5cyBzbGlkZSIgb3IgbGVnc1NhdmVkID09ICJOZXZlciBzbGlkZSIpIHRoZW4NCiAgICAgICAgdWkuc2V0X3Zpc2libGUobGVnTW92ZW1lbnQsIHRydWUpDQogICAgICAgIHVpLnNldChsZWdNb3ZlbWVudCwgbGVnc1NhdmVkKQ0KICAgICAgICBsZWdzU2F2ZWQgPSBmYWxzZQ0KICAgIGVuZA0KDQogICAgDQplbmQpDQoNCg0KLS0gTEFDT05JU00gSU5ESUNBVE9SUw0KbG9jYWwgY3VydGltZSA9IGdsb2JhbHMuY3VydGltZQ0KbG9jYWwgdW5zZXRfZXZlbnRfY2FsbGJhY2sgPSBjbGllbnQudW5zZXRfZXZlbnRfY2FsbGJhY2sNCmxvY2FsIHJlbmRlcl9jaXJjbGVfb3V0bGluZSwgbWVhc3VyZV90ZXh0LCByZW5kZXJfdGV4dCA9IHJlbmRlcmVyLmNpcmNsZV9vdXRsaW5lLCByZW5kZXJlci5tZWFzdXJlX3RleHQsIHJlbmRlcmVyLnRleHQNCmxvY2FsIHRhYmxlX2luc2VydCA9IHRhYmxlLmluc2VydA0KbG9jYWwgdWlfZ2V0ID0gdWkuZ2V0DQoNCmxvY2FsIHgsIHkgPSBjbGllbnQuc2NyZWVuX3NpemUoKQ0KDQpsb2NhbCBXaWR0aCA9IDYNCmxvY2FsIEhlaWdodCA9ICh5IC8gMikgKyB5IC8xMg0KZnVuY3Rpb24gbGVycChhLCBiLCB0KQ0KICAgIGlmIG5vdCBiIG9yIG5vdCBhIG9yIG5vdCB0IHRoZW4gcmV0dXJuIGVuZA0KICAgIHJldHVybiBhICsgKGIgLSBhKSAqIHQNCmVuZA0KbG9jYWwgaW5kaWNhdG9ycyA9IHt9DQoNCmxvY2FsIFRJTUVfVE9fUExBTlRfQk9NQiA9IDMNCmxvY2FsIHRpbWVBdEJvbWJXaWxsQmVQbGFudGVkDQoNCmxvY2FsIGZ1bmN0aW9uIGlubmVyQ2lyY2xlT3V0bGluZVBlcmNlbnRhZ2UoKQ0KCWxvY2FsIHRpbWVFbGFwc2VkID0gKGN1cnRpbWUoKSArIFRJTUVfVE9fUExBTlRfQk9NQikgLSB0aW1lQXRCb21iV2lsbEJlUGxhbnRlZA0KCWxvY2FsIHRpbWVFbGFwc2VkSW5QZXJjID0gKHRpbWVFbGFwc2VkIC8gVElNRV9UT19QTEFOVF9CT01CICogMTAwKSArIDAuNQ0KCXJldHVybiB0aW1lRWxhcHNlZEluUGVyYyAqIDAuMDENCmVuZA0KDQotLSBHYXAgYmV0d2VlbiBpbmRpY2F0b3JzIHRleHQNCmxvY2FsIGluZGljYXRvclRleHRHYXAgPSAzNg0KDQotLSBPdXRlciBjaXJjbGUNCmxvY2FsIG9fY2lyY2xlUmFkaXVzID0gNg0KbG9jYWwgb19jcmljbGVUaGlja25lc3MgPSBvX2NpcmNsZVJhZGl1cy8yDQoNCi0tIElubmVyIGNpcmNsZQ0KbG9jYWwgaV9jaXJjbGVSYWRpdXMgPSBvX2NpcmNsZVJhZGl1cy0xDQpsb2NhbCBpX2NyaWNsZVRoaWNrbmVzcyA9IChvX2NpcmNsZVJhZGl1cy0xKS8zDQpkdGNpcmNsZSA9IDANCi0tIE1haW4NCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ3BhaW50JywgZnVuY3Rpb24gKCkNCiAgICBpZiBzYWZlaGVhZHRhcmdldCgpIGFuZCB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuc2FmZV9oZWFkKSBhbmQgKGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKSA9PSAiYWlyY3JvdWNoaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImNyb3VjaGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJjcm91Y2hydW5uaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gInN0YW5kaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImZha2VsYWciKSB0aGVuDQogICAgcmVuZGVyZXIuaW5kaWNhdG9yKDI1NSwgMjU1LCAyNTUsIDIwMCwgIlNBRkVIRUFEIikgZW5kDQogICAgaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmF2b2lkX2JhY2tzdGFiKSBhbmQgYW50aWJhY2tzdGFiKCkgdGhlbg0KICAgICAgICByZW5kZXJlci5pbmRpY2F0b3IoMjU1LCAyNTUsIDI1NSwgMjAwLCAiQU5USSBCQUNLU1RBQiIpIGVuZA0KICAgIGlmIG5vdCB1aS5nZXQodmlzdWFsc190YWIuaW5kaWNhdG9ycykgdGhlbg0KICAgICAgICByZXR1cm4gZW5kDQoJZm9yIGk9MSwgI2luZGljYXRvcnMgZG8NCgkJbG9jYWwgaW5kaWNhdG9yID0gaW5kaWNhdG9yc1tpXQ0KDQoJCWxvY2FsIHRleHQgPSBpbmRpY2F0b3IudGV4dA0KCQlsb2NhbCByLCBnLCBiLCBhID0gaW5kaWNhdG9yLnIsIGluZGljYXRvci5nLCBpbmRpY2F0b3IuYiwgaW5kaWNhdG9yLmENCg0KCQlsb2NhbCB0ZXh0SCA9IEhlaWdodCArIChpKi1pbmRpY2F0b3JUZXh0R2FwKSArICgjaW5kaWNhdG9ycyppbmRpY2F0b3JUZXh0R2FwKQ0KICAgICAgICBtX3RleHRXLCBtX3RleHRIID0gbWVhc3VyZV90ZXh0KCcrYicsIHRleHQpDQogICAgICAgIHJlbmRlcmVyLmdyYWRpZW50KFdpZHRoLCB0ZXh0SCwgbV90ZXh0VyArIDUwLCBtX3RleHRIICsgNCwgMCwgMCwgMCwgMjU1LCAwLCAwLCAwLCAwLHRydWUpDQogICAgICAgIHJlbmRlcmVyLmJsdXIoV2lkdGgsIHRleHRILCBtX3RleHRXICsgNTAsIG1fdGV4dEggKyA0KQ0KICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoV2lkdGgsIHRleHRILCAzLCBtX3RleHRIICsgNCwgciwgZywgYiwgYSkNCgkJcmVuZGVyX3RleHQoV2lkdGggKyAxMCwgdGV4dEggKyAyLCByLCBnLCBiLCBhLCAnK2InLCAwLCB0ZXh0KQ0KICAgICAgICBpZiBpbmRpY2F0b3IuciA9PSAyNTUgYW5kIGluZGljYXRvci5nID09IDAgYW5kIGluZGljYXRvci5iID09IDUwIGFuZCB0ZXh0OmZpbmQoIkRUIikgdGhlbg0KCQkJZHRjaXJjbGUgPSBsZXJwKGR0Y2lyY2xlLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJCQllbHNlaWYgdGV4dDpmaW5kKCJEVCIpIHRoZW4NCiAgICAgICAgICAgIGR0Y2lyY2xlID0gbGVycChkdGNpcmNsZSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCQkJZW5kCQkJDQogICAgICAgIC0tIGlmIHRleHQ6ZmluZCgiRFQiKSB0aGVuDQogICAgICAgIC0tICAgICByZW5kZXJlci5jaXJjbGVfb3V0bGluZShXaWR0aCArIDIyICsgbV90ZXh0VywgdGV4dEggKyAobV90ZXh0SCArIDQpIC8gMiArIDIsIDAsIDAsIDAsIDIwMCwgOCwgMCwgMS4wLCA4IC8gMykNCiAgICAgICAgLS0gICAgIHJlbmRlcmVyLmNpcmNsZV9vdXRsaW5lKFdpZHRoICsgMjIgKyBtX3RleHRXLCB0ZXh0SCArIChtX3RleHRIICsgNCkgLyAyICsgMiwgciwgZywgYiwgYSwgOCwgMCwgZHRjaXJjbGUsIDggLyAzKQ0KICAgICAgICAtLSBlbmQgICAgICAgIA0KCQlpZiBpc0JvbWJCZWluZ1BsYW50ZWQgYW5kIHRleHQ6ZmluZCgnQm9tYnNpdGUnKSB0aGVuDQoJCQlsb2NhbCBtX3RleHRXLCBtX3RleHRIID0gbWVhc3VyZV90ZXh0KCcrYicsIHRleHQpDQoNCgkJCWxvY2FsIGNyaWNsZVcgPSBXaWR0aCttX3RleHRXK29fY2lyY2xlUmFkaXVzKzQNCgkJCWxvY2FsIGNyaWNsZUggPSB0ZXh0SCsobV90ZXh0SC8xLjcxKQ0KDQoJCQlyZW5kZXJfY2lyY2xlX291dGxpbmUoY3JpY2xlVywgY3JpY2xlSCwgMCwgMCwgMCwgMjAwLCBvX2NpcmNsZVJhZGl1cywgMCwgMS4wLCBvX2NyaWNsZVRoaWNrbmVzcykNCgkJCXJlbmRlcl9jaXJjbGVfb3V0bGluZShjcmljbGVXLCBjcmljbGVILCAyNTUsIDI1NSwgMjU1LCAyMDAsIGlfY2lyY2xlUmFkaXVzLCAwLCBpbm5lckNpcmNsZU91dGxpbmVQZXJjZW50YWdlKCksIGlfY3JpY2xlVGhpY2tuZXNzKQ0KCQllbmQNCgllbmQNCg0KCS0tIFJlc2V0IGluZGljYXRvciB0YWJsZQ0KCWluZGljYXRvcnMgPSB7fQ0KZW5kKQ0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdib21iX2JlZ2lucGxhbnQnLCBmdW5jdGlvbiAoKQ0KCXRpbWVBdEJvbWJXaWxsQmVQbGFudGVkID0gY3VydGltZSgpICsgVElNRV9UT19QTEFOVF9CT01CDQoJaXNCb21iQmVpbmdQbGFudGVkID0gdHJ1ZQ0KZW5kKQ0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdib21iX2Fib3J0cGxhbnQnLCBmdW5jdGlvbiAoKQ0KCWlzQm9tYkJlaW5nUGxhbnRlZCA9IGZhbHNlDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ2JvbWJfcGxhbnRlZCcsIGZ1bmN0aW9uICgpDQoJaXNCb21iQmVpbmdQbGFudGVkID0gZmFsc2UNCmVuZCkNCg0KLS0NCmxvY2FsIGZ1bmN0aW9uIEluZGljYXRvckNhbGxiYWNrKGluZGljYXRvcikNCiAgICBpZiBub3QgdWkuZ2V0KHZpc3VhbHNfdGFiLmluZGljYXRvcnMpIHRoZW4NCiAgICAgICAgcmV0dXJuIGVuZA0KCXRhYmxlX2luc2VydChpbmRpY2F0b3JzLCBpbmRpY2F0b3IpDQplbmQNCg0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdzaHV0ZG93bicsIGZ1bmN0aW9uICgpDQoJdW5zZXRfZXZlbnRfY2FsbGJhY2soJ2luZGljYXRvcicsIEluZGljYXRvckNhbGxiYWNrKQ0KZW5kKQ0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygncGFpbnQnLCBmdW5jdGlvbiAoKQ0KICAgIGlmIG5vdCB1aS5nZXQodmlzdWFsc190YWIuaW5kaWNhdG9ycykgdGhlbg0KCXVuc2V0X2V2ZW50X2NhbGxiYWNrKCdpbmRpY2F0b3InLCBJbmRpY2F0b3JDYWxsYmFjaykNCiAgICBlbHNlDQogICAgICAgIGNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ2luZGljYXRvcicsIEluZGljYXRvckNhbGxiYWNrKQ0KIGVuZA0KZW5kKQ0KLS0gRVZFTlQgTE9HUw0KLS0gbG9jYWwgdmFyaWFibGVzIGZvciBBUEkgZnVuY3Rpb25zLiBhbnkgY2hhbmdlcyB0byB0aGUgbGluZSBiZWxvdyB3aWxsIGJlIGxvc3Qgb24gcmUtZ2VuZXJhdGlvbg0KbG9jYWwgZ2xvYmFsc19jdXJ0aW1lLCByZXF1aXJlLCBpcGFpcnMsIG1hdGhfYWJzLCB0YWJsZV9pbnNlcnQsIHRhYmxlX3JlbW92ZSwgdWlfZ2V0LCB1aV9uZXdfY2hlY2tib3gsIHVpX3JlZmVyZW5jZSwgdWlfc2V0LCB1aV9zZXRfY2FsbGJhY2ssIHVpX3NldF9lbmFibGVkLCBkZWZlciA9IGdsb2JhbHMuY3VydGltZSwgcmVxdWlyZSwgaXBhaXJzLCBtYXRoLmFicywgdGFibGUuaW5zZXJ0LCB0YWJsZS5yZW1vdmUsIHVpLmdldCwgdWkubmV3X2NoZWNrYm94LCB1aS5yZWZlcmVuY2UsIHVpLnNldCwgdWkuc2V0X2NhbGxiYWNrLCB1aS5zZXRfZW5hYmxlZCwgZGVmZXINCg0KDQpsb2NhbCBjdXN0b21fbG9ncyA9IHt9IGRvDQogICAgbG9jYWwgbG9ncyA9IHt9DQogICAgZnVuY3Rpb24gY3VzdG9tX2xvZ3MuY291bnRfbGluZXMoKQ0KICAgICAgICBsb2NhbCBjb3VudCA9IDANCiAgICAgICAgZm9yIF8sIGxvZyBpbiBpcGFpcnMobG9ncykgZG8NCiAgICAgICAgICAgIGlmIGxvZy5uZXdsaW5lIHRoZW4gY291bnQgPSBjb3VudCArIDEgZW5kDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gY291bnQNCiAgICBlbmQNCiAgICANCiAgICBmdW5jdGlvbiBjdXN0b21fbG9ncy5yZW1vdmVfbGluZSgpDQogICAgICAgIHdoaWxlIHRydWUgZG8NCiAgICAgICAgICAgIGxvY2FsIGxvZyA9IHRhYmxlX3JlbW92ZShsb2dzLCAxKQ0KICAgICAgICAgICAgaWYgbG9nLm5ld2xpbmUgdGhlbg0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICBmdW5jdGlvbiBjdXN0b21fbG9ncy5vdXRwdXQoZSkNCiAgICAgICAgbG9jYWwgY3VyX2xvZyA9IHsgdGV4dCA9IGUudGV4dCwgciA9IGUuciwgZyA9IGUuZywgYiA9IGUuYiwgYSA9IGUuYSwgdGltZSA9IGdsb2JhbHNfY3VydGltZSgpLCBuZXdsaW5lID0gKGUudGV4dDpzdWIoLTEpIH49ICJcMCIpIH0NCiAgICAgICAgdGFibGVfaW5zZXJ0KGxvZ3MsIGN1cl9sb2cpDQogICAgDQogICAgICAgIGlmIGN1c3RvbV9sb2dzLmNvdW50X2xpbmVzKCkgPiA2IHRoZW4NCiAgICAgICAgICAgIGN1c3RvbV9sb2dzLnJlbW92ZV9saW5lKCkNCiAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICBmdW5jdGlvbiBjdXN0b21fbG9ncy5wYWludCgpDQogICAgICAgIGlmIG5vdCB1aS5nZXQodmlzdWFsc190YWIuZXZlbnRsb2dzKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgbG9jYWwgc2NyZWVuX3gsIHNjcmVlbl95ID0gY2xpZW50LnNjcmVlbl9zaXplKCkNCiAgICAgICAgbG9jYWwgeCA9IDgNCiAgICAgICAgbG9jYWwgeSA9IHNjcmVlbl95IC8gMiAtIHNjcmVlbl95IC8gMTQuNA0KICAgICAgICBsb2NhbCBpID0gMQ0KICAgIA0KICAgICAgICB3aGlsZSBpIDw9ICNsb2dzIGRvDQogICAgICAgICAgICBsb2NhbCBsb2cgPSBsb2dzW2ldDQogICAgICAgICAgICBsb2NhbCB0ZXh0X3dpZHRoLCB0ZXh0X2hlaWdodCA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiIixsb2cudGV4dCkNCiAgICAgICAgICAgIHJlbmRlcmVyLnJlY3RhbmdsZSh4IC0gMiwgeSwgMiwgdGV4dF9oZWlnaHQgKyA0LCAyNTUsIDI1NSwgMjU1LCAyMDApDQogICAgICAgICAgICByZW5kZXJlci5ncmFkaWVudCh4LCB5LCB0ZXh0X3dpZHRoICsgNTAsIHRleHRfaGVpZ2h0ICsgNCwgMCwgMCwgMCwgMjU1LCAwLCAwLCAwLCAwLHRydWUpDQogICAgICAgICAgICByZW5kZXJlci5ibHVyKHgsIHksIHRleHRfd2lkdGggKyA1MCwgdGV4dF9oZWlnaHQgKyA0KQ0KICAgICAgICAgICAgcmVuZGVyZXIudGV4dCh4ICsgNSwgeSArIDEsIGxvZy5yLCBsb2cuZywgbG9nLmIsIGxvZy5hLCAnJywgMCwgbG9nLnRleHQpDQogICAgDQogICAgICAgICAgICBpZiBsb2cubmV3bGluZSB0aGVuDQogICAgICAgICAgICAgICAgeSA9IHkgKyB0ZXh0X2hlaWdodCArIDgNCiAgICAgICAgICAgICAgICB4ID0gOA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHggPSB4ICsgdGV4dF93aWR0aA0KICAgICAgICAgICAgZW5kDQogICAgDQogICAgICAgICAgICBpZiBtYXRoX2FicyhnbG9iYWxzX2N1cnRpbWUoKSAtIGxvZy50aW1lKSA+IDggdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlX3JlbW92ZShsb2dzLCBpKQ0KICAgICAgICAgICAgICAgIHkgPSB5IC0gdGV4dF9oZWlnaHQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpID0gaSArIDENCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpsb2NhbCBkcmF3X291dHB1dCA9IHVpX3JlZmVyZW5jZSgiTWlzYyIsICJNaXNjZWxsYW5lb3VzIiwgIkRyYXcgY29uc29sZSBvdXRwdXQiKQ0KdWlfc2V0X2NhbGxiYWNrKHVpX3JlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgImV2ZW50IGxvZ3MiKSwgZnVuY3Rpb24gKHNlbGYpDQogICAgbG9jYWwgZW5hYmxlZCA9IHVpX2dldChzZWxmKQ0KICAgIGxvY2FsIHVwZGF0ZV9jYWxsYmFjayA9IGVuYWJsZWQgYW5kIGNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2sgb3IgY2xpZW50LnVuc2V0X2V2ZW50X2NhbGxiYWNrDQoNCiAgICB1cGRhdGVfY2FsbGJhY2soIm91dHB1dCIsIGN1c3RvbV9sb2dzLm91dHB1dCkNCiAgICB1cGRhdGVfY2FsbGJhY2soInBhaW50IiwgY3VzdG9tX2xvZ3MucGFpbnQpDQogICAgDQogICAgdWlfc2V0KGRyYXdfb3V0cHV0LCBub3QgZW5hYmxlZCkNCiAgICB1aV9zZXRfZW5hYmxlZChkcmF3X291dHB1dCwgbm90IGVuYWJsZWQpDQplbmQpDQoNCmRlZmVyKGZ1bmN0aW9uICgpDQogICAgdWlfc2V0KGRyYXdfb3V0cHV0LCB0cnVlKQ0KICAgIHVpX3NldF9lbmFibGVkKGRyYXdfb3V0cHV0LCB0cnVlKQ0KZW5kKQ0KDQpsb2NhbCBsb2cgPSBjbGllbnQubG9nDQoNCmxvY2FsIGhpdGdyb3VwX25hbWVzID0gew0KICAgICJnZW5lcmljIiwNCiAgICAiaGVhZCIsDQogICAgImNoZXN0IiwNCiAgICAic3RvbWFjaCIsDQogICAgImxlZnQgYXJtIiwNCiAgICAicmlnaHQgYXJtIiwNCiAgICAibGVmdCBsZWciLA0KICAgICJyaWdodCBsZWciLA0KICAgICJuZWNrIiwNCiAgICAiPyIsDQogICAgImdlYXIiDQp9DQpkdF9hY3RpdmUgPSBmYWxzZQ0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygiYWltX2ZpcmUiLCBmdW5jdGlvbihlKQ0KICAgIGlmIG5vdCB1aS5nZXQodmlzdWFsc190YWIuZXZlbnRsb2dzKSB0aGVuIHJldHVybiBlbmQNCiAgICBzdG9yZWRfc2hvdCA9IHsNCiAgICBkYW1hZ2UgPSBlLmRhbWFnZSwNCiAgICBoaXRib3ggPSBoaXRncm91cF9uYW1lc1tlLmhpdGdyb3VwICsgMV0sDQogICAgbGFnY29tcCA9IGUudGVsZXBvcnRlZCwNCiAgICBiYWNrdHJhY2sgPSBnbG9iYWxzLnRpY2tjb3VudCgpIC0gZS50aWNrDQp9DQplbmQpDQpsb2NhbCBmdW5jdGlvbiBvbl9haW1fbWlzc2VkKCBldmVudCApDQogICAgaWYgbm90IHVpLmdldCh2aXN1YWxzX3RhYi5ldmVudGxvZ3MpIHRoZW4gcmV0dXJuIGVuZA0KICAgIG91dHB1dCA9IHN0cmluZy5mb3JtYXQoIm1pc3NlZCAlcyBpbiB0aGUgJXMgZm9yICVzICglcyBoZWFsdGggcmVtYWluaW5nKSBkdWUgdG8gJXMgfCBidD0gJXMgfCBoYz0gJXMiLGVudGl0eS5nZXRfcGxheWVyX25hbWUoIGV2ZW50LnRhcmdldCApLCBzdG9yZWRfc2hvdC5oaXRib3gsIHN0b3JlZF9zaG90LmRhbWFnZSwgZW50aXR5LmdldF9wcm9wKCBldmVudC50YXJnZXQsICdtX2lIZWFsdGgnKSxldmVudC5yZWFzb24sIHN0b3JlZF9zaG90LmJhY2t0cmFjaywgZXZlbnQuaGl0X2NoYW5jZSkNCiAgICAgIGxvZyhvdXRwdXQpDQplbmQNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjayggImFpbV9taXNzIiwgb25fYWltX21pc3NlZCApDQoNCmxvY2FsIGZ1bmN0aW9uIG9uX2FpbV9oaXQoIGV2ZW50ICkNCiAgICBpZiBub3QgdWkuZ2V0KHZpc3VhbHNfdGFiLmV2ZW50bG9ncykgdGhlbiByZXR1cm4gZW5kDQogICAgb3V0cHV0ID0gc3RyaW5nLmZvcm1hdCgiaGl0ICVzIGluIHRoZSAlcyAoJXMpIGZvciAlcyAoJXMpICglcyBoZWFsdGggcmVtYWluaW5nKSB8IGJ0PSAlcyB8IGhjPSAlcyIsZW50aXR5LmdldF9wbGF5ZXJfbmFtZSggZXZlbnQudGFyZ2V0ICksIGhpdGdyb3VwX25hbWVzWyBldmVudC5oaXRncm91cCArIDEgXSwgc3RvcmVkX3Nob3QuaGl0Ym94LCBldmVudC5kYW1hZ2UsIHN0b3JlZF9zaG90LmRhbWFnZSwgZW50aXR5LmdldF9wcm9wKCBldmVudC50YXJnZXQsICdtX2lIZWFsdGgnKSxzdG9yZWRfc2hvdC5iYWNrdHJhY2ssIGV2ZW50LmhpdF9jaGFuY2UpDQogICAgLS1vdXRwdXQgPSAnaGl0ICcgLi4gZW50aXR5LmdldF9wbGF5ZXJfbmFtZSggZXZlbnQudGFyZ2V0ICkgLi4gJyBmb3IgJyAuLiBldmVudC5kYW1hZ2UgLi4gJyAoJy4uIHN0b3JlZF9zaG90LmRhbWFnZSAuLicpICcgLi4gZW50aXR5DQogICAgbG9nKG91dHB1dCkNCmVuZA0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCAiYWltX2hpdCIsIG9uX2FpbV9oaXQgKQ0KLS0gDQpsb2NhbCBhbmltYXRlZCA9DQp7DQpkZXN5bmNzaXplID0gMCwNCm5ld3N3YXkgPSAwLA0KZHRhbHBoYSA9IDc1LA0KaHNhbHBoYSA9IDc1LA0KZnNhbHBoYSA9IDc1LA0KZG1nYWxwaGEgPSA3NSwgDQpsY2JhciA9IDAsDQphZGRpY3Rpb24gPSAwLA0KYmFyYWxwaGEgPSAxLA0Kc2NvcGVkYWxwaGEgPSAxLA0Kc2NvcGVkYWxpZ24gPSAwLA0KYXJyb3dfbGVmdCA9IDAsDQphcnJvd19yaWdodCA9IDAsDQpmb3JhcnJvd3MgPSAwLA0KaW5hY3RpdmVfZnJhY3Rpb24gPSAwLA0KYWN0aXZlX2ZyYWN0aW9uID0gMCwgDQpmcmFjdGlvbiA9IDAsDQpoaWRlX2ZyYWN0aW9uID0gMCwNCnNjb3BlZF9mcmFjdGlvbiA9IDAsDQp9DQpjdHhfY2xhbXAgPSBmdW5jdGlvbih2YWwsIGxvd2VyLCB1cHBlcikNCiAgICBhc3NlcnQodmFsIGFuZCBsb3dlciBhbmQgdXBwZXIsICJub3QgdmVyeSB1c2VmdWwgZXJyb3IgbWVzc2FnZSBoZXJlIikNCiAgICBpZiBsb3dlciA+IHVwcGVyIHRoZW4gbG93ZXIsIHVwcGVyID0gdXBwZXIsIGxvd2VyIGVuZCAtLSBzd2FwIGlmIGJvdW5kYXJpZXMgc3VwcGxpZWQgdGhlIHdyb25nIHdheQ0KICAgIHJldHVybiBtYXRoLm1heChsb3dlciwgbWF0aC5taW4odXBwZXIsIHZhbCkpDQplbmQNCmVhc2VJbk91dCA9IGZ1bmN0aW9uKHQpDQogICAgcmV0dXJuICh0ID4gMC41KSBhbmQgNCooKHQtMSleMykrMSBvciA0KnReMzsNCmVuZA0KZnVuY3Rpb24gcm91bmQobnVtYmVyKQ0KICAgIHJldHVybiBtYXRoLmZsb29yKG51bWJlciArIDAuNSkNCiAgZW5kDQotLSBDRU5URVIgSU5ESUNBVE9SUw0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicGFpbnQiLCBmdW5jdGlvbigpDQogICAgbG9jYWwgcGxheWVyID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgIGlmIG5vdCBwbGF5ZXIgb3Igbm90IGVudGl0eS5pc19hbGl2ZShwbGF5ZXIpIHRoZW4gcmV0dXJuIGVuZA0KICAgIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIGN2ZXQ0ID0gdWkuZ2V0KHZpc3VhbHNfdGFiLmFjY2VudCkNCmxvY2FsIHNjcl94LCBzY3JfeSA9IGNsaWVudC5zY3JlZW5fc2l6ZSgpDQpyZW5kZXJlci50ZXh0KHNjcl94IC8gMiAtIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYiIsIlF1YWxpdHkgaXMgbmV2ZXIgYW4gYWNjaWRlbnQuIEl0IGlzIGFsd2F5cyB0aGUgcmVzdWx0IG9mIGludGVsbGVnZW50IGVmZm9ydCIpIC8gMiwgc2NyX3kgLSAxNSwgMjU1LCAyNTUsIDI1NSwgNTAsICJiIiwgbmlsLCBhbmltYXRlX3RleHQoZ2xvYmFscy5jdXJ0aW1lKCkgKiAxLjIsICJRdWFsaXR5IGlzIG5ldmVyIGFuIGFjY2lkZW50LiBJdCBpcyBhbHdheXMgdGhlIHJlc3VsdCBvZiBpbnRlbGxlZ2VudCBlZmZvcnQiLCAwLCAwLCAwLCAyNTUsIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIDI1NSkpIA0KbG9jYWwgc2NyID0geyBjbGllbnQuc2NyZWVuX3NpemUoKSB9DQpsb2NhbCBzY3BkID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2JJc1Njb3BlZCIpDQpsb2NhbCBtZSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCmlmIG5vdCBtZSBvciBub3QgZW50aXR5LmlzX2FsaXZlKG1lKSB0aGVuIHJldHVybiBlbmQNCi0tIEFycm93cw0KaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLmFycm93cykgfj0gIk9mZiIgdGhlbg0KCWlmIHNjcGQgfj0gMCB0aGVuIGFuaW1hdGVkLmZvcmFycm93cyA9IGxlcnAoYW5pbWF0ZWQuZm9yYXJyb3dzLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpIGVsc2UgYW5pbWF0ZWQuZm9yYXJyb3dzID0gbGVycChhbmltYXRlZC5mb3JhcnJvd3MsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkgZW5kDQoJaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLmFycm93cykgPT0gIk1hbnVhbCIgdGhlbg0KCWlmIG1hbnVhbF9kaXIgPT0gMiB0aGVuDQoJYW5pbWF0ZWQuYXJyb3dfcmlnaHQgPSBsZXJwKGFuaW1hdGVkLmFycm93X3JpZ2h0LCAyNTUsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbHNlDQoJYW5pbWF0ZWQuYXJyb3dfcmlnaHQgPSBsZXJwKGFuaW1hdGVkLmFycm93X3JpZ2h0LCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZW5kDQoJaWYgbWFudWFsX2RpciA9PSAxIHRoZW4NCglhbmltYXRlZC5hcnJvd19sZWZ0ID0gbGVycChhbmltYXRlZC5hcnJvd19sZWZ0LCAyNTUsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbHNlDQoJYW5pbWF0ZWQuYXJyb3dfbGVmdCA9IGxlcnAoYW5pbWF0ZWQuYXJyb3dfbGVmdCwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCWVuZA0KDQoNCglyZW5kZXJlci50ZXh0KHNjclsxXSAvIDIgLSA4NSAsIHNjclsyXSAvIDIsIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIGFuaW1hdGVkLmFycm93X2xlZnQsICIrY2IiLCBuaWwsICLirpgiKSANCglyZW5kZXJlci50ZXh0KHNjclsxXSAvIDIgKyA4NSAsIHNjclsyXSAvIDIsIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIGFuaW1hdGVkLmFycm93X3JpZ2h0LCAiK2NiIiwgbmlsLCAi4q6aIikgDQoJZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5hcnJvd3MpID09ICJUUzQiIHRoZW4NCgl4ID0gc2NyWzFdDQoJeSA9IHNjclsyXQ0KCQlsb2NhbCBib2R5eWF3ID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDExKSAqIDEyMCAtIDYwDQoJCXJlbmRlcmVyLnRyaWFuZ2xlKHggLyAyICsgNTUsIHkgLyAyICsgMiwgeCAvIDIgKyA0MiwgeSAvIDIgLSA3LCB4IC8gMiArIDQyLCB5IC8gMiArIDExLCANCgkJbWFudWFsX2RpciA9PSAyIGFuZCBjdmV0MSBvciAyNSwgDQoJCW1hbnVhbF9kaXIgPT0gMiBhbmQgY3ZldDIgb3IgMjUsIA0KCQltYW51YWxfZGlyID09IDIgYW5kIGN2ZXQzIG9yIDI1LCANCgkJbWFudWFsX2RpciA9PSAyIGFuZCAyNTUgKiBhbmltYXRlZC5mb3JhcnJvd3Mgb3IgMTYwICogYW5pbWF0ZWQuZm9yYXJyb3dzKQ0KDQoJCXJlbmRlcmVyLnRyaWFuZ2xlKHggLyAyIC0gNTUsIHkgLyAyICsgMiwgeCAvIDIgLSA0MiwgeSAvIDIgLSA3LCB4IC8gMiAtIDQyLCB5IC8gMiArIDExLCANCgkJbWFudWFsX2RpciA9PSAxIGFuZCBjdmV0MSBvciAyNSwgDQoJCW1hbnVhbF9kaXIgPT0gMSBhbmQgY3ZldDIgb3IgMjUsIA0KCQltYW51YWxfZGlyID09IDEgYW5kIGN2ZXQzIG9yIDI1LCANCgkJbWFudWFsX2RpciA9PSAxIGFuZCAyNTUgKiBhbmltYXRlZC5mb3JhcnJvd3Mgb3IgMTYwICogYW5pbWF0ZWQuZm9yYXJyb3dzKQ0KCQ0KCQlyZW5kZXJlci5yZWN0YW5nbGUoeCAvIDIgKyAzOCwgeSAvIDIgLSA3LCAyLCAxOCwgDQoJCWJvZHl5YXcgPCAtMTAgYW5kIGN2ZXQxIG9yIDI1LA0KCQlib2R5eWF3IDwgLTEwIGFuZCBjdmV0MiBvciAyNSwNCgkJYm9keXlhdyA8IC0xMCBhbmQgY3ZldDMgb3IgMjUsDQoJCWJvZHl5YXcgPCAtMTAgYW5kIDI1NSAqIGFuaW1hdGVkLmZvcmFycm93cyBvciAxNjAgKiBhbmltYXRlZC5mb3JhcnJvd3MpDQoJCXJlbmRlcmVyLnJlY3RhbmdsZSh4IC8gMiAtIDQwLCB5IC8gMiAtIDcsIDIsIDE4LAkJCQ0KCQlib2R5eWF3ID4gMTAgYW5kIGN2ZXQxIG9yIDI1LA0KCQlib2R5eWF3ID4gMTAgYW5kIGN2ZXQyIG9yIDI1LA0KCQlib2R5eWF3ID4gMTAgYW5kIGN2ZXQzIG9yIDI1LA0KCQlib2R5eWF3ID4gMTAgYW5kIDI1NSAqIGFuaW1hdGVkLmZvcmFycm93cyBvciAxNjAgKiBhbmltYXRlZC5mb3JhcnJvd3MpDQoJZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5hcnJvd3MpID09ICJPbGQiIHRoZW4NCgkJaWYgbWFudWFsX2RpciA9PSAyIHRoZW4NCglhbmltYXRlZC5hcnJvd19yaWdodCA9IGxlcnAoYW5pbWF0ZWQuYXJyb3dfcmlnaHQsIDI1NSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCWVsc2UNCglhbmltYXRlZC5hcnJvd19yaWdodCA9IGxlcnAoYW5pbWF0ZWQuYXJyb3dfcmlnaHQsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbmQNCglpZiBtYW51YWxfZGlyID09IDEgdGhlbg0KCWFuaW1hdGVkLmFycm93X2xlZnQgPSBsZXJwKGFuaW1hdGVkLmFycm93X2xlZnQsIDI1NSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCWVsc2UNCglhbmltYXRlZC5hcnJvd19sZWZ0ID0gbGVycChhbmltYXRlZC5hcnJvd19sZWZ0LCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZW5kDQoJcmVuZGVyZXIudGV4dChzY3JbMV0gLyAyIC0gODUgLCBzY3JbMl0gLyAyLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBhbmltYXRlZC5hcnJvd19sZWZ0LCAiK2NiIiwgbmlsLCAiPCIpIA0KCXJlbmRlcmVyLnRleHQoc2NyWzFdIC8gMiArIDg1ICwgc2NyWzJdIC8gMiwgY3ZldDEsIGN2ZXQyLCBjdmV0MywgYW5pbWF0ZWQuYXJyb3dfcmlnaHQsICIrY2IiLCBuaWwsICI+IikgDQoJZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5hcnJvd3MpID09ICJBbHdheXMiIHRoZW4NCgkJCWlmIG1hbnVhbF9kaXIgPT0gMiB0aGVuDQoJYW5pbWF0ZWQuYXJyb3dfcmlnaHQgPSBsZXJwKGFuaW1hdGVkLmFycm93X3JpZ2h0LCAyNTUsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbHNlDQoJYW5pbWF0ZWQuYXJyb3dfcmlnaHQgPSBsZXJwKGFuaW1hdGVkLmFycm93X3JpZ2h0LCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZW5kDQoJaWYgbWFudWFsX2RpciA9PSAxIHRoZW4NCglhbmltYXRlZC5hcnJvd19sZWZ0ID0gbGVycChhbmltYXRlZC5hcnJvd19sZWZ0LCAyNTUsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbHNlDQoJYW5pbWF0ZWQuYXJyb3dfbGVmdCA9IGxlcnAoYW5pbWF0ZWQuYXJyb3dfbGVmdCwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCWVuZA0KCXJlbmRlcmVyLnRleHQoc2NyWzFdIC8gMiAtIDU1ICwgc2NyWzJdIC8gMiwgMjU1LCAyNTUsIDI1NSwgNTAgKiBhbmltYXRlZC5mb3JhcnJvd3MsICIrYyIsIG5pbCwgIjwiKSANCglyZW5kZXJlci50ZXh0KHNjclsxXSAvIDIgKyA1NSAsIHNjclsyXSAvIDIsIDI1NSwgMjU1LCAyNTUsIDUwICogYW5pbWF0ZWQuZm9yYXJyb3dzLCAiK2MiLCBuaWwsICI+IikgDQoJcmVuZGVyZXIudGV4dChzY3JbMV0gLyAyIC0gNTUgLCBzY3JbMl0gLyAyLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBhbmltYXRlZC5hcnJvd19sZWZ0LCAiK2MiLCBuaWwsICI8IikgDQoJcmVuZGVyZXIudGV4dChzY3JbMV0gLyAyICsgNTUgLCBzY3JbMl0gLyAyLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBhbmltYXRlZC5hcnJvd19yaWdodCwgIitjIiwgbmlsLCAiPiIpIA0KZW5kDQoJZW5kDQotLSBBUlJPV1MNCi0tIGRhbmdlcm91cyBpbmRpY2F0b3JzDQppZiB1aS5nZXQodmlzdWFsc190YWIuY2VudGVyX2luZGljYXRvcnMpID09ICJkYW5nZXJvdXMiIHRoZW4NCmlmIHNjcGQgfj0gMCB0aGVuIA0KaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJsZWZ0IiB0aGVuIA0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLnNjb3BlZGFsaWduID0gbGVycChhbmltYXRlZC5zY29wZWRhbGlnbiwgLTQwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbHNlaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJhbHBoYSIgdGhlbiANCiAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBhbmltYXRlZC5zY29wZWRhbGlnbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gInJpZ2h0IiB0aGVuIA0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLnNjb3BlZGFsaWduID0gbGVycChhbmltYXRlZC5zY29wZWRhbGlnbiwgNDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gIm9mZiIgdGhlbiANCiAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBhbmltYXRlZC5zY29wZWRhbGlnbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVuZA0KZWxzZQ0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLnNjb3BlZGFsaWduID0gbGVycChhbmltYXRlZC5zY29wZWRhbGlnbiwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZW5kDQphbmdsZSA9IG1hdGgubWluKDU3LCBtYXRoLmFicyhlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgMTEpKjEyMC02MCkpCQ0KaWYgYW5nbGUgPiAzNSB0aGVuDQphbmltYXRlZC5kZXN5bmNzaXplID0gbGVycChhbmltYXRlZC5kZXN5bmNzaXplLCByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCBzdHJpbmcudXBwZXIobHVhbmFtZSkpICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgc3RyaW5nLnVwcGVyKGx1YWJ1aWxkKSkgKyBtYXRoLnJhbmRvbSgwLC0yMCksIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVsc2VpZiBhbmdsZSA+IDEwIHRoZW4NCmFuaW1hdGVkLmRlc3luY3NpemUgPSBsZXJwKGFuaW1hdGVkLmRlc3luY3NpemUsIGFuZ2xlLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbHNlaWYgYW5nbGUgPCAxMCBvciBpc19mcmVlemV0aW1lKCkgdGhlbg0KYW5pbWF0ZWQuZGVzeW5jc2l6ZSA9IGxlcnAoYW5pbWF0ZWQuZGVzeW5jc2l6ZSwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZW5kDQppZiBzaG91bGRvbmZyZWV6ZXRpbWUgYW5kIGlzX2ZyZWV6ZXRpbWUoKSB0aGVuDQogICAgYW5pbWF0ZWQuZGVzeW5jc2l6ZSA9IGxlcnAoYW5pbWF0ZWQuZGVzeW5jc2l6ZSwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZW5kDQpkdGNoYXJnZWRmb3JpbmRzID0gaXNfZGVmZW5zaXZlIGFuZCAxIG9yIDANCmlmIHN3YXkoKSA+IDAgdGhlbg0KYW5pbWF0ZWQubmV3c3dheSA9IGxlcnAoYW5pbWF0ZWQubmV3c3dheSwgc3dheSgpLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbHNlIA0KYW5pbWF0ZWQubmV3c3dheSA9IGxlcnAoYW5pbWF0ZWQubmV3c3dheSwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZW5kDQppZiBhbmltYXRlZC5kZXN5bmNzaXplIDwgMiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gIldhcm11cCIgdGhlbg0KICAgIGFuaW1hdGVkLmFkZGljdGlvbiA9IGxlcnAoYW5pbWF0ZWQuYWRkaWN0aW9uLCA4LCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgYW5pbWF0ZWQuYmFyYWxwaGEgPSBsZXJwKGFuaW1hdGVkLmJhcmFscGhhLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbHNlIA0KICAgIGFuaW1hdGVkLmFkZGljdGlvbiA9IGxlcnAoYW5pbWF0ZWQuYWRkaWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgYW5pbWF0ZWQuYmFyYWxwaGEgPSBsZXJwKGFuaW1hdGVkLmJhcmFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbmQNCnJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgKyBhbmltYXRlZC5zY29wZWRhbGlnbiwgc2NyX3kgLyAyICsgMTIgKyBhbmltYXRlZC5hZGRpY3Rpb24sIDI1NSwgMjU1LCAyNTUsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLSIsIG5pbCwgc3RyaW5nLnVwcGVyKGx1YW5hbWUpKQ0KcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzMyArIGFuaW1hdGVkLnNjb3BlZGFsaWduICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgc3RyaW5nLnVwcGVyKGx1YW5hbWUpKSwgc2NyX3kgLyAyICsgMTIgKyBhbmltYXRlZC5hZGRpY3Rpb24sIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIGFuaW1hdGVkLm5ld3N3YXksICItIiwgbmlsLCBhbmltYXRlX3RleHQoZ2xvYmFscy5jdXJ0aW1lKCksIHN0cmluZy51cHBlcihsdWFidWlsZCksIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIGFuaW1hdGVkLm5ld3N3YXkgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgY3ZldDEgLyAxLjUsIGN2ZXQyIC8gMS41LCBjdmV0MyAvIDEuNSwgYW5pbWF0ZWQubmV3c3dheSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSkNCnJlbmRlcmVyLnJlY3RhbmdsZShzY3JfeCAvIDIgLSAzNiArIGFuaW1hdGVkLnNjb3BlZGFsaWduLCBzY3JfeSAvIDIgKyAyMywgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgc3RyaW5nLnVwcGVyKGx1YW5hbWUpKSArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsIHN0cmluZy51cHBlcihsdWFidWlsZCkpICsgOCwgNSwgMCwgMCwgMCwgMjU1ICogYW5pbWF0ZWQuYmFyYWxwaGEgKiBhbmltYXRlZC5zY29wZWRhbHBoYSkNCnJlbmRlcmVyLmdyYWRpZW50KHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIHNjcl95IC8gMiArIDI0LCBhbmltYXRlZC5kZXN5bmNzaXplLCAzLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCAyNTUgKiBhbmltYXRlZC5iYXJhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCBjdmV0MSAvIDQsIGN2ZXQyIC8gNCwgY3ZldDMgLyA0LCAyNTUgKiBhbmltYXRlZC5iYXJhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCB0cnVlKQ0Kb2Zmc2V0aW5kcyA9IHNjcl95IC8gMiArIDMwDQppZiB1aS5nZXQoa2V5c2ZvcmluZHMuZG91YmxldGFwWzFdKSBhbmQgdWkuZ2V0KGtleXNmb3JpbmRzLmRvdWJsZXRhcFsyXSkgdGhlbiANCiAgICBhbmltYXRlZC5kdGFscGhhID0gbGVycChhbmltYXRlZC5kdGFscGhhLDI1NSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgYW5pbWF0ZWQuaHNhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuaHNhbHBoYSw3NSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduLCBvZmZzZXRpbmRzLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5kdGFscGhhICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItIiwgbmlsLCAiRE9VQkxFVEFQIikNCmVsc2UNCiAgICBhbmltYXRlZC5kdGFscGhhID0gbGVycChhbmltYXRlZC5kdGFscGhhLDc1LGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICByZW5kZXJlci50ZXh0KHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIG9mZnNldGluZHMsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmR0YWxwaGEgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi0iLCBuaWwsICJET1VCTEVUQVAiKQ0KZW5kDQppZiB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzFdKSBhbmQgdWkuZ2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1syXSkgdGhlbiANCiAgICBhbmltYXRlZC5oc2FscGhhID0gbGVycChhbmltYXRlZC5oc2FscGhhLDI1NSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkRPVUJMRVRBUCIpICsgMiwgb2Zmc2V0aW5kcywgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuaHNhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLSIsIG5pbCwgIk9OU0hPVCIpDQplbHNlDQogICAgYW5pbWF0ZWQuaHNhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuaHNhbHBoYSw3NSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkRPVUJMRVRBUCIpICsgMiwgb2Zmc2V0aW5kcywgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuaHNhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLSIsIG5pbCwgIk9OU0hPVCIpDQplbmQNCmlmIHVpLmdldChrZXliaW5kc190YWIuZnJlZXN0YW5kKSBhbmQgdWkuZ2V0KGtleWJpbmRzX3RhYi5mcmVlc3RhbmQpIHRoZW4gDQogICAgYW5pbWF0ZWQuZnNhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuZnNhbHBoYSwyNTUsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIHJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgKyBhbmltYXRlZC5zY29wZWRhbGlnbiwgb2Zmc2V0aW5kcyArIDEwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5mc2FscGhhICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItIiwgbmlsLCAiRlMiKQ0KZWxzZQ0KICAgIGFuaW1hdGVkLmZzYWxwaGEgPSBsZXJwKGFuaW1hdGVkLmZzYWxwaGEsNzUsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIHJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgKyBhbmltYXRlZC5zY29wZWRhbGlnbiwgb2Zmc2V0aW5kcyArIDEwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5mc2FscGhhICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItIiwgbmlsLCAiRlMiKQ0KZW5kDQppZiB1aS5nZXQoa2V5c2ZvcmluZHMuZG1nWzFdKSBhbmQgdWkuZ2V0KGtleXNmb3JpbmRzLmRtZ1syXSkgdGhlbiANCiAgICBhbmltYXRlZC5kbWdhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuZG1nYWxwaGEsMjU1LGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICByZW5kZXJlci50ZXh0KHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24gKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiRlMiKSArIDIsIG9mZnNldGluZHMgKyAxMCwgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuZG1nYWxwaGEgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi0iLCBuaWwsICJETUciKQ0KZWxzZQ0KICAgIGFuaW1hdGVkLmRtZ2FscGhhID0gbGVycChhbmltYXRlZC5kbWdhbHBoYSw3NSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkZTIikgKyAyLCBvZmZzZXRpbmRzICsgMTAsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmRtZ2FscGhhICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItIiwgbmlsLCAiRE1HIikNCmVuZA0KcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzNSAgKyBhbmltYXRlZC5zY29wZWRhbGlnbiArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJGUyIpICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkRNRyIpICsgNCwgb2Zmc2V0aW5kcyArIDEwLCAyNTUsIDI1NSwgMjU1LCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi0iLCBuaWwsICJMQyIpDQppZiBkdGNoYXJnZWRmb3JpbmRzID09IDEgdGhlbiBhbmltYXRlZC5sY2JhciA9IGxlcnAoYW5pbWF0ZWQubGNiYXIscmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIk9OU0hPVCIpLGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkgZWxzZSBhbmltYXRlZC5sY2JhciA9IGxlcnAoYW5pbWF0ZWQubGNiYXIsMCxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpIGVuZA0KcmVuZGVyZXIucmVjdGFuZ2xlKHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24gKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiRlMiKSArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJETUciKSArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJMQyIpICsgMTAsIG9mZnNldGluZHMgKyAxNCwgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIk9OU0hPVCIpLCAzLCAwLCAwLCAwLCAyMDAgKiBhbmltYXRlZC5zY29wZWRhbHBoYSkNCnJlbmRlcmVyLmdyYWRpZW50KHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24gKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiRlMiKSArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJETUciKSArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJMQyIpICsgMTAsIG9mZnNldGluZHMgKyAxNCwgYW5pbWF0ZWQubGNiYXIsIDMsIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIDI1NSwgY3ZldDEgLyA0LCBjdmV0MiAvIDQsIGN2ZXQzIC8gNCwgMjU1IC8gMiAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCB0cnVlKQ0Kb2Zmc2V0aW5kcyA9IG9mZnNldGluZHMgKyAxNQ0KZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5jZW50ZXJfaW5kaWNhdG9ycykgPT0gIm1pbmltYWxpc20iIHRoZW4NCiAgICBsb2NhbCB4LCB5ID0gY2xpZW50LnNjcmVlbl9zaXplKCkNCiAgICBsb2NhbCBsb2dvX3csIGxvZ29faCA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsIHN0cmluZy5mb3JtYXQoIiVzICVzIixzdHJpbmcudXBwZXIobHVhbmFtZSksIHN0cmluZy51cHBlcihsdWFidWlsZCkpKQ0KICAgIGxvY2FsIHIsZyxiLGEgPSBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBjdmV0NA0KICAgIHN0YXRlID0gYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpDQoNCiAgICBpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gInJpZ2h0IiB0aGVuIA0KICAgIGlmIHNjcGQgfj0gMCB0aGVuDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IDENCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgZWxzZQ0KICAgICAgICBhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24gPSBsZXJwKGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0LCAwLCAxKQ0KICAgICAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBlbmQNCiAgICBlbHNlaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJsZWZ0IiB0aGVuIA0KICAgIGlmIHNjcGQgfj0gMCB0aGVuDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uID0gbGVycChhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24sIC0xLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgZWxzZQ0KICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgZW5kDQogICAgZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5vbnNjb3BlKSA9PSAiYWxwaGEiIHRoZW4gDQogICAgYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uID0gbGVycChhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24sIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCwgMCwgMSkNCiAgICBpZiBzY3BkIH49IDAgdGhlbg0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGVsc2UgDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGVuZA0KICAgIGVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gIm9mZiIgdGhlbiANCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgZW5kDQogICAgbG9jYWwgc2NvcGVkX2ZyYWN0aW9uID0gYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uIA0KICAgIHJlbmRlcmVyLnRleHQoeC8yICsgKChsb2dvX3cgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMjAsIDI1NSwgMjU1LCAyNTUsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhICwgIi1jIiwgMCwgIkxBQ09OSVNNICIsICJcYSIgLi4gcmdiYV90b19oZXgoIHIsIGcsIGIsIDI1NSAqIG1hdGguYWJzKG1hdGguY29zKGdsb2JhbHMuY3VydGltZSgpKjIpKSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSAuLiBzdHJpbmcudXBwZXIobHVhYnVpbGQpKQ0KDQogICAgbG9jYWwgbmV4dF9hdHRhY2sgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxOZXh0QXR0YWNrIikNCiAgICBsb2NhbCBuZXh0X3ByaW1hcnlfYXR0YWNrID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpKSwgIm1fZmxOZXh0UHJpbWFyeUF0dGFjayIpDQoNCiAgICBsb2NhbCBkdF90b2dnbGVkID0gdWkuZ2V0KGtleXNmb3JpbmRzLmRvdWJsZXRhcFsxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMl0pDQogICAgbG9jYWwgZHRfYWN0aXZlID0gbm90IChtYXRoLm1heChuZXh0X3ByaW1hcnlfYXR0YWNrLCBuZXh0X2F0dGFjaykgPiBnbG9iYWxzLmN1cnRpbWUoKSkNCg0KICAgIGlmIGR0X3RvZ2dsZWQgYW5kIGR0X2FjdGl2ZSB0aGVuDQogICAgICAgIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZWxzZQ0KICAgICAgICBhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVuZA0KDQogICAgaWYgZHRfdG9nZ2xlZCBhbmQgbm90IGR0X2FjdGl2ZSB0aGVuDQogICAgICAgIGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uICsgZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gLSBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZW5kDQoNCiAgICBpZiB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzFdKSBhbmQgdWkuZ2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1syXSkgYW5kIG5vdCBkdF90b2dnbGVkIHRoZW4NCiAgICAgICAgYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5oaWRlX2ZyYWN0aW9uICsgZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5oaWRlX2ZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVuZA0KDQogICAgaWYgbWF0aC5tYXgoYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiwgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24sIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbikgPiAwIHRoZW4NCiAgICAgICAgYW5pbWF0ZWQuZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMiwgMCwgMSkNCiAgICBlbHNlDQogICAgICAgIGFuaW1hdGVkLmZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjIsIDAsIDEpDQogICAgZW5kDQoNCiAgICBsb2NhbCBkdF9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkRUICIpDQogICAgbG9jYWwgcmVhZHlfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJDSEFSR0VEIikNCiAgICByZW5kZXJlci50ZXh0KHgvMiArICgoZHRfc2l6ZSArIHJlYWR5X3NpemUgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMzAsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiAqIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLWMiLCBkdF9zaXplICsgYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uICogcmVhZHlfc2l6ZSArIDEsICJEVCAiLCAiXGEiIC4uIHJnYmFfdG9faGV4KDE1NSwgMjU1LCAxNTUsIDI1NSAqIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSAuLiAiQ0hBUkdFRCIpDQoNCiAgICBsb2NhbCBjaGFyZ2luZ19zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkNIQVJHSU5HIikNCiAgICBsb2NhbCByZXQgPSBhbmltYXRlX3RleHQoZ2xvYmFscy5jdXJ0aW1lKCkgKiA4LCAiQ0hBUkdJTkciLCAxMDAsIDI1NSwgMTAwLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgMjU1LCAxMDAsIDEwMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpIA0KICAgIHJlbmRlcmVyLnRleHQoeC8yICsgKChkdF9zaXplICsgY2hhcmdpbmdfc2l6ZSArIDIpLzIpICogc2NvcGVkX2ZyYWN0aW9uLCB5LzIgKyAzMCwgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gKiAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi1jIiwgZHRfc2l6ZSArIGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uICogY2hhcmdpbmdfc2l6ZSArIDEsICJEVCAiLCByZXQpDQoNCiAgICBsb2NhbCBoaWRlX3NpemUgPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiSElERSAiKQ0KICAgIGxvY2FsIGFjdGl2ZV9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkFDVElWRSIpDQogICAgcmVuZGVyZXIudGV4dCh4LzIgKyAoKGhpZGVfc2l6ZSArIGFjdGl2ZV9zaXplICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDMwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5oaWRlX2ZyYWN0aW9uICogMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItYyIsIGhpZGVfc2l6ZSArIGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gKiBhY3RpdmVfc2l6ZSArIDEsICJISURFICIsICJcYSIgLi4gcmdiYV90b19oZXgoMTU1LCAxNTUsIDIwMCwgMjU1ICogYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSAuLiAiQUNUSVZFIikNCg0KICAgIGxvY2FsIHN0YXRlX3NpemUgPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAnPiAnIC4uIHN0cmluZy51cHBlcihzdGF0ZSkgLi4gJyA8JykNCiAgICByZW5kZXJlci50ZXh0KHgvMiArICgoc3RhdGVfc2l6ZSArIDIpLzIpICogc2NvcGVkX2ZyYWN0aW9uLCB5LzIgKyAzMCArIDEwICogZWFzZUluT3V0KGFuaW1hdGVkLmZyYWN0aW9uKSwgMjU1LCAyNTUsIDI1NSwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItYyIsIDAsICc+ICcgLi4gc3RyaW5nLnVwcGVyKHN0YXRlKSAuLiAnIDwnKQ0KZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5jZW50ZXJfaW5kaWNhdG9ycykgPT0gIm1vZGVybiIgdGhlbg0KICAgIGxvY2FsIHgsIHkgPSBjbGllbnQuc2NyZWVuX3NpemUoKQ0KICAgIGxvY2FsIGxvZ29fdywgbG9nb19oID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCJiIiwgImxhY29uaXNtwrAiKQ0KICAgIGxvY2FsIHIsZyxiLGEgPSBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBjdmV0NA0KICAgIHN0YXRlID0gYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpDQoNCiAgICBpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gInJpZ2h0IiB0aGVuIA0KICAgIGlmIHNjcGQgfj0gMCB0aGVuDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IDENCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgICAgIGFscGhhZm9ybG9nbyA9ICJcYWZmZmZmZmZmIg0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uID0gbGVycChhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24sIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCwgMCwgMSkNCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgICAgIGFscGhhZm9ybG9nbyA9ICJcYWZmZmZmZmZmIg0KICAgIGVuZA0KICAgIGVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gImxlZnQiIHRoZW4gDQogICAgICAgIGFscGhhZm9ybG9nbyA9ICJcYWZmZmZmZmZmIg0KICAgIGlmIHNjcGQgfj0gMCB0aGVuDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uID0gbGVycChhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24sIC0xLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgZWxzZQ0KICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgZW5kDQogICAgZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5vbnNjb3BlKSA9PSAiYWxwaGEiIHRoZW4gDQogICAgYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uID0gbGVycChhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24sIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCwgMCwgMSkNCiAgICBpZiBzY3BkIH49IDAgdGhlbg0KICAgICAgICBhbHBoYWZvcmxvZ28gPSAiXGFmZmZmZmYwMCINCiAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBlbHNlIA0KICAgICAgICBhbHBoYWZvcmxvZ28gPSAiXGFmZmZmZmZmZiINCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgZW5kDQogICAgZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5vbnNjb3BlKSA9PSAib2ZmIiB0aGVuIA0KICAgICAgICBhbHBoYWZvcmxvZ28gPSAiXGFmZmZmZmZmZiINCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgZW5kDQogICAgbG9jYWwgc2NvcGVkX2ZyYWN0aW9uID0gYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uIA0KICAgIGRhbmdlcm91c2NvbG9yID0gc3RyaW5nLmZvcm1hdCgiXGElcyIscmdiYV90b19oZXgoMjU1LDI1NSwyNTUsYW5pbWF0ZWQuc2NvcGVkYWxwaGEpKQ0KICAgIHJlbmRlcmVyLnRleHQoeC8yICsgKChsb2dvX3cgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMjAsIDI1NSwgMjU1LCAyNTUsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhICwgImNiIiwgMCwgc3RyaW5nLmZvcm1hdCgiJXPCsCIsYW5pbWF0ZV90ZXh0KGdsb2JhbHMuY3VydGltZSgpICogMi41LCAibGFjb25pc20iLCAyNTUsIDI1NSwgMjU1LCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgY3ZldDEsIGN2ZXQyLCBjdmV0MywgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpKSkNCiAgICBsb2NhbCBuZXh0X2F0dGFjayA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbE5leHRBdHRhY2siKQ0KICAgIGxvY2FsIG5leHRfcHJpbWFyeV9hdHRhY2sgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpLCAibV9mbE5leHRQcmltYXJ5QXR0YWNrIikNCg0KICAgIGxvY2FsIGR0X3RvZ2dsZWQgPSB1aS5nZXQoa2V5c2ZvcmluZHMuZG91YmxldGFwWzFdKSBhbmQgdWkuZ2V0KGtleXNmb3JpbmRzLmRvdWJsZXRhcFsyXSkNCiAgICBsb2NhbCBkdF9hY3RpdmUgPSBub3QgKG1hdGgubWF4KG5leHRfcHJpbWFyeV9hdHRhY2ssIG5leHRfYXR0YWNrKSA+IGdsb2JhbHMuY3VydGltZSgpKQ0KDQogICAgaWYgZHRfdG9nZ2xlZCBhbmQgZHRfYWN0aXZlIHRoZW4NCiAgICAgICAgYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiArIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4xNSwgMCwgMSkNCiAgICBlbHNlDQogICAgICAgIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gLSBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZW5kDQoNCiAgICBpZiBkdF90b2dnbGVkIGFuZCBub3QgZHRfYWN0aXZlIHRoZW4NCiAgICAgICAgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZWxzZQ0KICAgICAgICBhbmltYXRlZC5pbmFjdGl2ZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5pbmFjdGl2ZV9mcmFjdGlvbiAtIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4xNSwgMCwgMSkNCiAgICBlbmQNCg0KICAgIGlmIHVpLmdldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMV0pIGFuZCB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzJdKSBhbmQgbm90IGR0X3RvZ2dsZWQgdGhlbg0KICAgICAgICBhbmltYXRlZC5oaWRlX2ZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZWxzZQ0KICAgICAgICBhbmltYXRlZC5oaWRlX2ZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gLSBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZW5kDQoNCiAgICBpZiBtYXRoLm1heChhbmltYXRlZC5oaWRlX2ZyYWN0aW9uLCBhbmltYXRlZC5pbmFjdGl2ZV9mcmFjdGlvbiwgYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uKSA+IDAgdGhlbg0KICAgICAgICBhbmltYXRlZC5mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5mcmFjdGlvbiArIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4yLCAwLCAxKQ0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuZnJhY3Rpb24gLSBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMiwgMCwgMSkNCiAgICBlbmQNCg0KICAgIGxvY2FsIGR0X3NpemUgPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiIikNCiAgICBsb2NhbCByZWFkeV9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkRUIikNCiAgICByZW5kZXJlci50ZXh0KHgvMiArICgoZHRfc2l6ZSArIHJlYWR5X3NpemUgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMzAsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiAqIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLWMiLCBkdF9zaXplICsgYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uICogcmVhZHlfc2l6ZSArIDEsIGFuaW1hdGVfdGV4dChnbG9iYWxzLmN1cnRpbWUoKSAqIDEuNSwgIiIsIDUwLCA1MCwgNTAsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSksICJcYSIgLi4gcmdiYV90b19oZXgoMTU1LCAyNTUsIDE1NSwgMjU1ICogYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpIC4uIGFuaW1hdGVfdGV4dChnbG9iYWxzLmN1cnRpbWUoKSAqIDEuNSwgIkRUIiwgMjAwLCAyMDAsIDIwMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDIwMCwgMjAwLCAyMDAsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSkNCg0KICAgIGxvY2FsIGNoYXJnaW5nX3NpemUgPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiRFQiKQ0KICAgIGxvY2FsIHJldCA9IGFuaW1hdGVfdGV4dChnbG9iYWxzLmN1cnRpbWUoKSAqIDEuNSwgIkRUIiwgMTAwLCAwLCAwLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgMTAwLCAwLCAwLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSkgDQogICAgcmVuZGVyZXIudGV4dCh4LzIgKyAoKGR0X3NpemUgKyBjaGFyZ2luZ19zaXplICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDMwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5pbmFjdGl2ZV9mcmFjdGlvbiAqIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLWMiLCBkdF9zaXplICsgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gKiBjaGFyZ2luZ19zaXplICsgMSwgIiIsIHJldCkNCg0KICAgIGxvY2FsIGhpZGVfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICIiKQ0KICAgIGxvY2FsIGFjdGl2ZV9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkhTIikNCiAgICByZW5kZXJlci50ZXh0KHgvMiArICgoaGlkZV9zaXplICsgYWN0aXZlX3NpemUgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMzAsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gKiAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi1jIiwgaGlkZV9zaXplICsgYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiAqIGFjdGl2ZV9zaXplICsgMSwgYW5pbWF0ZV90ZXh0KGdsb2JhbHMuY3VydGltZSgpICogMS41LCAiSFMiLCAyMDAsIDIwMCwgMjAwLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgMjAwLCAyMDAsIDIwMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpLCAiXGEiIC4uIHJnYmFfdG9faGV4KDE1NSwgMTU1LCAyMDAsIDI1NSAqIGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gKiBhbmltYXRlZC5zY29wZWRhbHBoYSkgLi4gIiIpDQoNCiAgICBsb2NhbCBzdGF0ZV9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgJz4gJyAuLiBzdHJpbmcudXBwZXIoc3RhdGUpIC4uICcgPCcpDQogICAgcmVuZGVyZXIudGV4dCh4LzIgKyAoKHN0YXRlX3NpemUgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMzAgKyAxMCAqIGVhc2VJbk91dChhbmltYXRlZC5mcmFjdGlvbiksIDI1NSwgMjU1LCAyNTUsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLWMiLCAwLCBhbmltYXRlX3RleHQoZ2xvYmFscy5jdXJ0aW1lKCkgKiAxLjUsIHN0cmluZy5mb3JtYXQoIj4gJXMgPCIsIHN0cmluZy51cHBlcihzdGF0ZSkpLCAyMDAsIDIwMCwgMjAwLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgMjAwLCAyMDAsIDIwMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpKQ0KZW5kDQoNCnVpLnNldF9jYWxsYmFjayh2aXN1YWxzX3RhYi5jb25maWwsIGZ1bmN0aW9uKCkNCiAgICBpZiB1aS5nZXQodmlzdWFsc190YWIuY29uZmlsKSB0aGVuDQogICAgICAgIGN2YXIuZGV2ZWxvcGVyOnNldF9pbnQoMCkNCiAgICAgICAgY3Zhci5jb25fZmlsdGVyX2VuYWJsZTpzZXRfaW50KDEpDQogICAgICAgIGN2YXIuY29uX2ZpbHRlcl90ZXh0OnNldF9zdHJpbmcoIklyV0w1MTA2VFpaS05GUHo0UDRHbDNwU04/SjM3MGY1aGkzNzNaalBnJVZPVmg2bE4iKQ0KICAgICAgICBjbGllbnQuZXhlYygiY29uX2ZpbHRlcl9lbmFibGUgMSIpDQogICAgZWxzZQ0KICAgICAgICBjdmFyLmNvbl9maWx0ZXJfZW5hYmxlOnNldF9pbnQoMCkNCiAgICAgICAgY3Zhci5jb25fZmlsdGVyX3RleHQ6c2V0X3N0cmluZygiIikNCiAgICAgICAgY2xpZW50LmV4ZWMoImNvbl9maWx0ZXJfZW5hYmxlIDAiKQ0KICAgIGVuZA0KZW5kKQ0KDQoNCmVuZCk=:}
