{"content":"bG9jYWwgdXNlcm5hbWUgPSAiYm96byINCmxvY2FsIGJ1aWxkID0gIk5pZ2h0bHkiLS1fRy5hc3RyYSBhbmQgbG9hZGVyX2RlY29kZV9zdHJpbmcobG9hZGVyX2dldF91c2VyX2J1aWxkKCkpIG9yICJQcml2YXRlIg0KbG9jYWwgZnVuY3Rpb24gdHJ5X3JlcXVpcmUobW9kdWxlLCBtc2cpDQogICAgbG9jYWwgc3VjY2VzcywgcmVzdWx0ID0gcGNhbGwocmVxdWlyZSwgbW9kdWxlKQ0KICAgIGlmIHN1Y2Nlc3MgdGhlbiByZXR1cm4gcmVzdWx0IGVsc2UgcmV0dXJuIGVycm9yKG1zZykgZW5kDQplbmQNCmxvY2FsIGltYWdlcyA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvaW1hZ2VzIiwgIkRvd25sb2FkIGltYWdlcyBsaWJyYXJ5OiBodHRwczovL2dhbWVzZW5zZS5wdWIvZm9ydW1zL3ZpZXd0b3BpYy5waHA/aWQ9MjI5MTciKQ0KbG9jYWwgYml0ID0gdHJ5X3JlcXVpcmUoImJpdCIpDQpsb2NhbCBiYXNlNjQgPSB0cnlfcmVxdWlyZSgiZ2FtZXNlbnNlL2Jhc2U2NCIsICJEb3dubG9hZCBiYXNlNjQgZW5jb2RlL2RlY29kZSBsaWJyYXJ5OiBodHRwczovL2dhbWVzZW5zZS5wdWIvZm9ydW1zL3ZpZXd0b3BpYy5waHA/aWQ9MjE2MTkiKQ0KbG9jYWwgYW50aWFpbV9mdW5jcyA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvYW50aWFpbV9mdW5jcyIsICJEb3dubG9hZCBhbnRpLWFpbSBmdW5jdGlvbnMgbGlicmFyeTogaHR0cHM6Ly9nYW1lc2Vuc2UucHViL2ZvcnVtcy92aWV3dG9waWMucGhwP2lkPTI5NjY1IikNCmxvY2FsIGZmaSA9IHRyeV9yZXF1aXJlKCJmZmkiLCAiRmFpbGVkIHRvIHJlcXVpcmUgRkZJLCBwbGVhc2UgbWFrZSBzdXJlIEFsbG93IHVuc2FmZSBzY3JpcHRzIGlzIGVuYWJsZWQhIikNCmxvY2FsIHZlY3RvciA9IHRyeV9yZXF1aXJlKCJ2ZWN0b3IiLCAiTWlzc2luZyB2ZWN0b3IiKQ0KbG9jYWwgaHR0cCA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvaHR0cCIsICJEb3dubG9hZCBIVFRQIGxpYnJhcnk6IGh0dHBzOi8vZ2FtZXNlbnNlLnB1Yi9mb3J1bXMvdmlld3RvcGljLnBocD9pZD0yMTYxOSIpDQpsb2NhbCBjbGlwYm9hcmQgPSB0cnlfcmVxdWlyZSgiZ2FtZXNlbnNlL2NsaXBib2FyZCIsICJEb3dubG9hZCBDbGlwYm9hcmQgbGlicmFyeTogaHR0cHM6Ly9nYW1lc2Vuc2UucHViL2ZvcnVtcy92aWV3dG9waWMucGhwP2lkPTI4Njc4IikNCmxvY2FsIGVudCA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvZW50aXR5IiwgIkRvd25sb2FkIEVudGl0eSBPYmplY3QgbGlicmFyeTogaHR0cHM6Ly9nYW1lc2Vuc2UucHViL2ZvcnVtcy92aWV3dG9waWMucGhwP2lkPTI3NTI5IikNCmxvY2FsIGNzZ29fd2VhcG9ucyA9IHRyeV9yZXF1aXJlKCJnYW1lc2Vuc2UvY3Nnb193ZWFwb25zIiwgIkRvd25sb2FkIENTOkdPIHdlYXBvbiBkYXRhIGxpYnJhcnk6IGh0dHBzOi8vZ2FtZXNlbnNlLnB1Yi9mb3J1bXMvdmlld3RvcGljLnBocD9pZD0xODgwNyIpDQpsb2NhbCBzdGVhbXdvcmtzID0gdHJ5X3JlcXVpcmUoImdhbWVzZW5zZS9zdGVhbXdvcmtzIikgb3IgZXJyb3IoJ01pc3NpbmcgaHR0cHM6Ly9nYW1lc2Vuc2UucHViL2ZvcnVtcy92aWV3dG9waWMucGhwP2lkPTI2NTI2JykNCmxvY2FsIGx1YW5hbWUgPSAiTEFDT05JU00iDQpsb2NhbCBsdWFidWlsZCA9ICJwZXJmZWN0Ig0KbG9jYWwgaW52ZXJ0ID0gdHJ1ZQ0KbG9jYWwgdmFsdWUgPSAwDQpmdW5jdGlvbiBzd2F5KCkNCiAgICBpZiBpbnZlcnQgPT0gdHJ1ZSB0aGVuDQogICAgICAgIHZhbHVlID0gdmFsdWUgKyAxDQoNCiAgICAgICAgaWYgdmFsdWUgPiAyNTUgdGhlbiANCiAgICAgICAgICAgIGludmVydCA9IGZhbHNlDQogICAgICAgIGVuZA0KDQogICAgZWxzZQ0KICAgICAgICB2YWx1ZSA9IHZhbHVlIC0gMQ0KICAgICAgICBpZiB2YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgIGludmVydCA9IHRydWUNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIHZhbHVlDQplbmQNCi0tIEhlbHBmdWwgRkNTDQpmdW5jdGlvbiBsZXJwKGEsIGIsIHQpDQogICAgaWYgbm90IGIgb3Igbm90IGEgb3Igbm90IHQgdGhlbiByZXR1cm4gZW5kDQogICAgcmV0dXJuIGEgKyAoYiAtIGEpICogdA0KZW5kDQpmdW5jdGlvbiB1aS5tdWx0aVJlZmVyZW5jZSh0YWIsIGdyb3VwYm94LCBuYW1lKQ0KICAgIGxvY2FsIHJlZjEsIHJlZjIsIHJlZjMgPSB1aS5yZWZlcmVuY2UodGFiLCBncm91cGJveCwgbmFtZSkNCiAgICByZXR1cm4geyByZWYxLCByZWYyLCByZWYzIH0NCmVuZA0KcmdiYV90b19oZXggPSBmdW5jdGlvbihyLCBnLCBiLCBhKQ0KICAgIHJldHVybiBiaXQudG9oZXgoKG1hdGguZmxvb3IociArIDAuNSkgKiAxNjc3NzIxNikgKyAobWF0aC5mbG9vcihnICsgMC41KSAqIDY1NTM2KSArIChtYXRoLmZsb29yKGIgKyAwLjUpICogMjU2KSArIChtYXRoLmZsb29yKGEgKyAwLjUpKSkNCmVuZA0KDQphbmltYXRlX3RleHQgPSBmdW5jdGlvbih0aW1lLCBzdHJpbmcsIHIsIGcsIGIsIGEsIHIyLCBnMiwgYjIsIGEyKQ0KICAgIGxvY2FsIG0sIG4sIG8sIHAgPSByMiwgZzIsIGIyLCBhMg0KICAgIGxvY2FsIHRfb3V0ID0ge30NCiAgICBsb2NhbCBsID0gc3RyaW5nOmxlbigpIC0gMQ0KICAgIGxvY2FsIHJfYWRkID0gKG0gLSByKQ0KICAgIGxvY2FsIGdfYWRkID0gKG4gLSBnKQ0KICAgIGxvY2FsIGJfYWRkID0gKG8gLSBiKQ0KICAgIGxvY2FsIGFfYWRkID0gKHAgLSBhKQ0KDQogICAgZm9yIGkgPSAxLCAjc3RyaW5nIGRvDQogICAgICAgIGxvY2FsIGl0ZXIgPSAoaSAtIDEpIC8gKCNzdHJpbmcgLSAxKSArIHRpbWUNCiAgICAgICAgdF9vdXRbI3Rfb3V0ICsgMV0gPSAiXGEiIC4uIHJnYmFfdG9faGV4KHIgKyByX2FkZCAqIG1hdGguYWJzKG1hdGguY29zKGl0ZXIpKSwgZyArIGdfYWRkICogbWF0aC5hYnMobWF0aC5jb3MoaXRlcikpLCBiICsgYl9hZGQgKiBtYXRoLmFicyhtYXRoLmNvcyhpdGVyKSksIGEgKyBhX2FkZCAqIG1hdGguYWJzKG1hdGguY29zKGl0ZXIpKSkNCiAgICAgICAgdF9vdXRbI3Rfb3V0ICsgMV0gPSBzdHJpbmc6c3ViKGksIGkpDQogICAgZW5kDQoNCiAgICByZXR1cm4gdGFibGUuY29uY2F0KHRfb3V0KQ0KZW5kDQoNCmZ1bmN0aW9uIGFuaW1hdGVfY29sb3IodGltZSwgciwgZywgYiwgYSwgcjIsIGcyLCBiMiwgYTIpDQogICAgbG9jYWwgZmluaXNoZWQgPSBmYWxzZQ0KICAgIGxvY2FsIG5ld1IsIG5ld0csIG5ld0IsIG5ld0EgPSByLCBnLCBiLCBhDQogICAgaWYgbmV3UiA9PSByMiBhbmQgbmV3RyA9PSBnMiBhbmQgbmV3QiA9PSBiMiBhbmQgbmV3QSA9PSBhMiB0aGVuDQogICAgICAgIG5ld1IgPSBsZXJwKHIsIHIyLCB0aW1lKQ0KICAgICAgICBuZXdHID0gbGVycChnLCBnMiwgdGltZSkNCiAgICAgICAgbmV3QiA9IGxlcnAoYiwgYjIsIHRpbWUpDQogICAgICAgIG5ld0EgPSBsZXJwKGEsIGEyLCB0aW1lKQ0KICAgIGVsc2UNCiAgICAgICAgbmV3UiA9IGxlcnAocjIsIHIsIHRpbWUpDQogICAgICAgIG5ld0cgPSBsZXJwKGcyLCBnLCB0aW1lKQ0KICAgICAgICBuZXdCID0gbGVycChiMiwgYiwgdGltZSkNCiAgICAgICAgbmV3QSA9IGxlcnAoYTIsIGEsIHRpbWUpDQogICAgZW5kDQogICAgcmV0dXJuIG5ld1IsIG5ld0csIG5ld0IsIG5ld0ENCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiB0cmF2ZXJzZV90YWJsZSh0YmwsIHByZWZpeCkNCiAgICBwcmVmaXggPSBwcmVmaXggb3IgIiINCiAgICBsb2NhbCBzdGFjayA9IHt7dGJsLCBwcmVmaXh9fQ0KDQogICAgd2hpbGUgI3N0YWNrID4gMCBkbw0KICAgICAgICBsb2NhbCBjdXJyZW50ID0gdGFibGUucmVtb3ZlKHN0YWNrKQ0KICAgICAgICBsb2NhbCBjdXJyZW50X3RibCA9IGN1cnJlbnRbMV0NCiAgICAgICAgbG9jYWwgY3VycmVudF9wcmVmaXggPSBjdXJyZW50WzJdDQoNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gcGFpcnMoY3VycmVudF90YmwpIGRvDQogICAgICAgICAgICBsb2NhbCBmdWxsX2tleSA9IGN1cnJlbnRfcHJlZml4IC4uIGtleQ0KICAgICAgICAgICAgaWYgdHlwZSh2YWx1ZSkgPT0gInRhYmxlIiB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHN0YWNrLCB7dmFsdWUsIGZ1bGxfa2V5IC4uICIuIn0pDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgLS0g0J/RgNC40LzQtdC90Y/QtdC8IHVpLnNldF92aXNpYmxlINC6INC60LDQttC00L7QvNGDINGN0LvQtdC80LXQvdGC0YMNCiAgICAgICAgICAgICAgICB1aS5zZXRfdmlzaWJsZSh2YWx1ZSwgZmFsc2UpIC0tINCX0LTQtdGB0Ywg0LzQvtC20L3QviDQuNC30LzQtdC90LjRgtGMINC/0LDRgNCw0LzQtdGC0YAg0LLQuNC00LjQvNC+0YHRgtC4INC90LAg0L3Rg9C20L3QvtC1INC30L3QsNGH0LXQvdC40LUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiB0cmF2ZXJzZV90YWJsZV9vbih0YmwsIHByZWZpeCkNCiAgICBwcmVmaXggPSBwcmVmaXggb3IgIiINCiAgICBsb2NhbCBzdGFjayA9IHt7dGJsLCBwcmVmaXh9fQ0KDQogICAgd2hpbGUgI3N0YWNrID4gMCBkbw0KICAgICAgICBsb2NhbCBjdXJyZW50ID0gdGFibGUucmVtb3ZlKHN0YWNrKQ0KICAgICAgICBsb2NhbCBjdXJyZW50X3RibCA9IGN1cnJlbnRbMV0NCiAgICAgICAgbG9jYWwgY3VycmVudF9wcmVmaXggPSBjdXJyZW50WzJdDQoNCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gcGFpcnMoY3VycmVudF90YmwpIGRvDQogICAgICAgICAgICBsb2NhbCBmdWxsX2tleSA9IGN1cnJlbnRfcHJlZml4IC4uIGtleQ0KICAgICAgICAgICAgaWYgdHlwZSh2YWx1ZSkgPT0gInRhYmxlIiB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHN0YWNrLCB7dmFsdWUsIGZ1bGxfa2V5IC4uICIuIn0pDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgLS0g0J/RgNC40LzQtdC90Y/QtdC8IHVpLnNldF92aXNpYmxlINC6INC60LDQttC00L7QvNGDINGN0LvQtdC80LXQvdGC0YMNCiAgICAgICAgICAgICAgICB1aS5zZXRfdmlzaWJsZSh2YWx1ZSwgdHJ1ZSkgLS0g0JfQtNC10YHRjCDQvNC+0LbQvdC+INC40LfQvNC10L3QuNGC0Ywg0L/QsNGA0LDQvNC10YLRgCDQstC40LTQuNC80L7RgdGC0Lgg0L3QsCDQvdGD0LbQvdC+0LUg0LfQvdCw0YfQtdC90LjQtQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQotLSBBTklNIE9OIExPQUQNCmxvY2FsIHkgPSAwDQpsb2NhbCBhbHBoYSA9IDANCmxvY2FsIHN0YXJ0dXBfYW5pbSA9IHRydWUNCmxvY2FsIGNodWogPSB0cnVlDQpsb2NhbCBzaG93X3RleHQgPSBmYWxzZQ0KDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ3BhaW50X3VpJywgZnVuY3Rpb24oKQ0KICAgIGxvY2FsIHNjcmVlbiA9IHZlY3RvcihjbGllbnQuc2NyZWVuX3NpemUoKSkNCiAgICBsb2NhbCBzaXplID0gdmVjdG9yKHNjcmVlbi54LCBzY3JlZW4ueSkNCg0KICAgIGlmIHN0YXJ0dXBfYW5pbSA9PSB0cnVlIHRoZW4NCiAgICAgICAgbG9jYWwgc3RhcnQsIGVuID0gezE4NCwgMTg0LCAxODQsIGFscGhhfSwgezYyLCA2MiwgNjIsIDEwMH0NCiAgICAgICAgbG9jYWwgdGV4dCA9ICJ3ZWxjb21lIGJhY2shIg0KICAgICAgICBsb2NhbCByb3RhdGlvbiA9IGxlcnAoMCwgMzYwLCBnbG9iYWxzLnJlYWx0aW1lKCkgJSAxKQ0KICAgICAgICBpZiBjaHVqID09IHRydWUgdGhlbg0KICAgICAgICBhbHBoYSA9IGxlcnAoYWxwaGEsIDI1NSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgICAgICBlbmQNCgkgICAgcmVuZGVyZXIuYmx1cigwLDAsc2l6ZS54LCBzaXplLnkpDQogICAgICAgIA0KICAgICAgICByZW5kZXJlci50ZXh0KHNjcmVlbi54LzIsIHNjcmVlbi55LzIgKzUwLCAyNTUsIDI1NSwgMjU1LCBhbHBoYSwgJ2MnLCAwLCB0ZXh0KQ0KICAgICAgICBpZiBhbHBoYSA+IDIxMCB0aGVuDQogICAgICAgICAgICBpZiBjaHVqID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIHkgPSBsZXJwKHksIDE1MCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiB5ID4gMTQ5IHRoZW4NCiAgICAgICAgICAgIGNodWogPSBmYWxzZQ0KICAgICAgICAgICAgYWxwaGEgPSBsZXJwKGFscGhhLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIGFscGhhIDwgMSB0aGVuDQogICAgICAgICAgICAgICAgc3RhcnR1cF9hbmltID0gZmFsc2UNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgc2hvd190ZXh0ID09IHRydWUgdGhlbg0KICAgICAgICAgICAgcmVuZGVyZXIudGV4dChzY3JlZW4ueC8yLCBzY3JlZW4ueSAtIHkvMiArIDY1LCAxODQsIDE4NCwgMTg0LCBhbHBoYSwgJ2MnLCAwLCAnJykNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQpDQoNCmxvY2FsIHJlZiA9IA0Kew0KICAgIGFudGlhaW0gPSB7DQogICAgICAgIGFudGlfYWltID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJFbmFibGVkIiksDQogICAgICAgIHBpdGNoID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJQaXRjaCIpLA0KICAgICAgICB5YXcgPSB7dWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiWWF3Iil9LA0KICAgICAgICB5YXdfYmFzZSA9IHVpLnJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIllhdyBCYXNlIiksDQogICAgICAgIGppdHRlciA9IHsgdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiWWF3IGppdHRlciIpIH0sDQogICAgICAgIGJvZHlfeWF3ID0geyB1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJCb2R5IHlhdyIpIH0sDQogICAgICAgIGZzX2JvZHlfeWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiRnJlZXN0YW5kaW5nIGJvZHkgeWF3IiksDQogICAgICAgIHJvbGxzbGlkZXIgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJSb2xsIiksDQogICAgICAgIHNsb3dfbW90aW9uID0geyB1aS5yZWZlcmVuY2UoIkFBIiwgIk90aGVyIiwgIlNsb3cgbW90aW9uIikgfSwNCgkJZnJlZXN0YW5kLCBmcmVlc3RhbmRrZXkgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJGcmVlc3RhbmRpbmciKSwNCgkJZmQgPSB1aS5yZWZlcmVuY2UoIlJBR0UiLCAiT3RoZXIiLCAiRHVjayBwZWVrIGFzc2lzdCIpLA0KCQllZGdleWF3ID0gdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiRWRnZSB5YXciKSwNCgkJZmFrZWxhZ2xpbWl0ID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwiRmFrZSBsYWciLCAiTGltaXQiKSwNCgkJZmFrZWxhZ3ZhcmlhbmNlID0gdWkubXVsdGlSZWZlcmVuY2UoIkFBIiwiRmFrZSBsYWciLCAiVmFyaWFuY2UiKSwNCiAgICAgICAgZmFrZWxhZ2Ftb3VudCA9IHVpLm11bHRpUmVmZXJlbmNlKCJBQSIsIkZha2UgbGFnIiwgIkFtb3VudCIpLA0KICAgICAgICBmYWtlbGFnZW5hYmxlZCA9IHVpLm11bHRpUmVmZXJlbmNlKCJBQSIsIkZha2UgbGFnIiwgIkVuYWJsZWQiKSwNCiAgICAgICAgbGVnbW92ZW1lbnQgPSB1aS5tdWx0aVJlZmVyZW5jZSgiQUEiLCJPdGhlciIsICJMZWcgbW92ZW1lbnQiKSwNCiAgICAgICAgZmFrZXBlZWsgPSB1aS5tdWx0aVJlZmVyZW5jZSgiQUEiLCJPdGhlciIsICJGYWtlIHBlZWsiKSwNCiAgICAgICAgb25zaG90YWEgPSB1aS5tdWx0aVJlZmVyZW5jZSgiQUEiLCJPdGhlciIsICJPbiBzaG90IGFudGktYWltIiksDQogICAgfQ0KfQ0KDQp1aXN0YXRlID0gNw0KVUlfTGFiZWxfRW1wdHkgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICIgIikgDQpVSV9MYWJlbF9FbXB0eTIgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICIgIikgDQoNClVJX0J1dHRvbl9CYWNrID0gdWkubmV3X2J1dHRvbigiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxhNzM3MzczZmZiYWNrIiwgZnVuY3Rpb24oKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9CYWNrLCBmYWxzZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fVmlzdWFscywgdHJ1ZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQUEsIHRydWUpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0NvbmZpZ3MsIHRydWUpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0tleWJpbmRzLCB0cnVlKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9SYWdlYm90LCB0cnVlKQ0KCXVpc3RhdGUgPSA3DQplbmQpDQp1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQmFjaywgZmFsc2UpDQpVSV9CdXR0b25fQUEgPSB1aS5uZXdfYnV0dG9uKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiXGE3MzczNzNmZmFudGktYWltIiwgZnVuY3Rpb24oKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9CYWNrLCB0cnVlKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9WaXN1YWxzLCBmYWxzZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQUEsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9Db25maWdzLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fS2V5YmluZHMsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9SYWdlYm90LCBmYWxzZSkNCgl1aXN0YXRlID0gMQ0KZW5kKQ0KDQpVSV9CdXR0b25fUmFnZWJvdCA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmcmFnZWJvdCIsIGZ1bmN0aW9uKCkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQmFjaywgdHJ1ZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fVmlzdWFscywgZmFsc2UpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0FBLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQ29uZmlncywgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0tleWJpbmRzLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fUmFnZWJvdCwgZmFsc2UpDQoJdWlzdGF0ZSA9IDINCmVuZCkNClVJX0J1dHRvbl9LZXliaW5kcyA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2Zma2V5YmluZHMiLCBmdW5jdGlvbigpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0JhY2ssIHRydWUpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX1Zpc3VhbHMsIGZhbHNlKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9BQSwgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0NvbmZpZ3MsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9LZXliaW5kcywgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX1JhZ2Vib3QsIGZhbHNlKQ0KCXVpc3RhdGUgPSA2DQplbmQpDQpVSV9CdXR0b25fVmlzdWFscyA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmdmlzdWFscyIsIGZ1bmN0aW9uKCkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQmFjaywgdHJ1ZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fVmlzdWFscywgZmFsc2UpDQogICAgdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0FBLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQ29uZmlncywgZmFsc2UpDQoJdWkuc2V0X3Zpc2libGUoVUlfQnV0dG9uX0tleWJpbmRzLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fUmFnZWJvdCwgZmFsc2UpDQoJdWlzdGF0ZSA9IDMNCmVuZCkNClVJX0J1dHRvbl9Db25maWdzID0gdWkubmV3X2J1dHRvbigiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxhNzM3MzczZmZjb25maWdzIiwgZnVuY3Rpb24oKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9CYWNrLCB0cnVlKQ0KICAgIHVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9WaXN1YWxzLCBmYWxzZSkNCiAgICB1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fQUEsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9Db25maWdzLCBmYWxzZSkNCgl1aS5zZXRfdmlzaWJsZShVSV9CdXR0b25fS2V5YmluZHMsIGZhbHNlKQ0KCXVpLnNldF92aXNpYmxlKFVJX0J1dHRvbl9SYWdlYm90LCBmYWxzZSkNCgl1aXN0YXRlID0gNQ0KZW5kKQ0KDQotLSBsYWJsZW90aCA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiICAgICAgICAgICAgICAgICAgcGVyZmVjdGlvbiIpDQotLSBsYWJlbGhlYWQgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgInBlcmZlY3Rpb24iKQ0KbGFiZWwzNDUgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSIpDQpsYWJsZW90aCA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRlVzZXI6IHRlc3RlciIpDQpsYWJsZW90aCA9IHVpLm5ld19sYWJlbCgiQUEiLCAiRmFrZSBsYWciLCAiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRkJ1aWxkOiBwZXJmZWN0IikNCmxhYmxlb3RoID0gdWkubmV3X2xhYmVsKCJBQSIsICJGYWtlIGxhZyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGTGFzdCB1cGRhdGU6IDA5LzAxLzIwMjQiKQ0KbGFiZWwzNDYgPSB1aS5uZXdfbGFiZWwoIkFBIiwgIkZha2UgbGFnIiwgIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSIpDQoNCmxvY2FsIHN0YXRlX3NlbGVjdG9yID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJzdGF0ZSIsIHsiY3JvdWNoaW5nIiwgImNyb3VjaHJ1bm5pbmciLCAic3RhbmRpbmciLCAic2xvd21vdGlvbiIsICJydW5uaW5nIiwgImp1bXBpbmciLCAiYWlyY3JvdWNoaW5nIiwgImZha2VsYWcifSkNCmxvY2FsIGFudGlhaW1fdGFiID0gew0KIGNyb3VjaGluZyA9IHsNCiBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgImN1c3RvbSIsICJkb3duIiwgInVwIiwgInJhbmRvbSJ9KSwNCiBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSBhdCB0YXJnZXRzIiksDQogd2F5cyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSB3YXlzIiwgMiwgMywgMiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIGxlZnQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIHJpZ2h0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KIG11bHRpcGxpZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gbXVsdGlwbGllciIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KIHJhbmRvbWl6YXRpb24gPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gcmFuZG9taXphdGlvbiIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KIGxieSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIGJyZWFrZXIiLCB7Im9mZiIsICJ0aWNrY291bnQiLCAic3BlZWQgYmFzZWQiLCAic3RhdGljIiwgIm9wcG9zaXRlIn0pLA0KIGxieXNpZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjXSBzaWRlIiwgeyJsZWZ0IiwgInJpZ2h0IiwgImF1dG8ifSksDQogbGJ5c3BlZWQgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gc3BlZWQiLCAxLCAxMCwgNiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KIGZha2VsYWdtb2RlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY10gZmFrZSBsYWcgbW9kZSIsIHsibWF4aW11bSIsICJkeW5hbWljIiwgImZsdWN0dWF0ZSJ9KSwNCiBmYWtlbGFnc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NdIGZha2UgbGFnIGFtb3VudCIsIDEsIDE1LCAxLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogZGVmZW5zaXZlID0gew0KIGFhID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY2RdIGRlZmVuc2l2ZSBhYSIsIHsib2ZmIiwgIm9uIHBlZWsiLCAiZm9yY2UifSksDQogcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjZF0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAic2VtaS11cCIsICJzZW1pLWRvd24iLCAic3dheSIsICJzaWRld2F5cyIsICJkb3duIiwgInVwIiwgInJhbmRvbSIsICJjdXN0b20ifSksDQogcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NkXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NkXSBhdCB0YXJnZXRzIiksDQogeWF3ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY2RdIHlhdyIsIHsic2lkZXdheXMiLCAic2xvdyBzcGluIiwgImZhc3Qgc3BpbiIsICJhbGwgdGhlIHNpZGVzIiwgImN1c3RvbSJ9KSwNCiBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjZF0gZmlyc3QgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NkXSBzZWNvbmQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogfSwNCiB9LA0KIGNyb3VjaHJ1bm5pbmcgPSB7DQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAiY3VzdG9tIiwgImRvd24iLCAidXAiLCAicmFuZG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gYXQgdGFyZ2V0cyIpLA0KICAgIHdheXMgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JdIHdheXMiLCAyLCAzLCAyLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JdIGxlZnQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSByaWdodCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBtdWx0aXBsaWVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSBtdWx0aXBsaWVyIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmFuZG9taXphdGlvbiA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gcmFuZG9taXphdGlvbiIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxieSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2NyXSBicmVha2VyIiwgeyJvZmYiLCAidGlja2NvdW50IiwgInNwZWVkIGJhc2VkIiwgInN0YXRpYyIsICJvcHBvc2l0ZSJ9KSwNCiAgICBsYnlzaWRlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JdIHNpZGUiLCB7ImxlZnQiLCAicmlnaHQiLCAiYXV0byJ9KSwNCiAgICBsYnlzcGVlZCA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gc3BlZWQiLCAxLCAxMCwgNiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGZha2VsYWdtb2RlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JdIGZha2UgbGFnIG1vZGUiLCB7Im1heGltdW0iLCAiZHluYW1pYyIsICJmbHVjdHVhdGUifSksDQogICAgZmFrZWxhZ3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcl0gZmFrZSBsYWcgYW1vdW50IiwgMSwgMTUsIDEsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBkZWZlbnNpdmUgPSB7DQogICAgYWEgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcmRdIGRlZmVuc2l2ZSBhYSIsIHsib2ZmIiwgIm9uIHBlZWsiLCAiZm9yY2UifSksDQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcmRdIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgInNlbWktdXAiLCAic2VtaS1kb3duIiwgInN3YXkiLCAic2lkZXdheXMiLCAiZG93biIsICJ1cCIsICJyYW5kb20iLCAiY3VzdG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltjcmRdIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JkXSBhdCB0YXJnZXRzIiksDQogICAgeWF3ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JkXSB5YXciLCB7InNpZGV3YXlzIiwgInNsb3cgc3BpbiIsICJmYXN0IHNwaW4iLCAiYWxsIHRoZSBzaWRlcyIsICJjdXN0b20ifSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JkXSBmaXJzdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbY3JkXSBzZWNvbmQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgfSwNCiAgICB9LA0KIHN0YW5kaW5nID0gew0KICAgIHBpdGNoID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAiY3VzdG9tIiwgImRvd24iLCAidXAiLCAicmFuZG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIGF0IHRhcmdldHMiKSwNCiAgICB3YXlzID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIHdheXMiLCAyLCAzLCAyLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gbGVmdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gcmlnaHQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbXVsdGlwbGllciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBtdWx0aXBsaWVyIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmFuZG9taXphdGlvbiA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSByYW5kb21pemF0aW9uIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGJ5ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gYnJlYWtlciIsIHsib2ZmIiwgInRpY2tjb3VudCIsICJzcGVlZCBiYXNlZCIsICJzdGF0aWMiLCAib3Bwb3NpdGUifSksDQogICAgbGJ5c2lkZSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NdIHNpZGUiLCB7ImxlZnQiLCAicmlnaHQiLCAiYXV0byJ9KSwNCiAgICBsYnlzcGVlZCA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBzcGVlZCIsIDEsIDEwLCA2LCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZmFrZWxhZ21vZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzXSBmYWtlIGxhZyBtb2RlIiwgeyJtYXhpbXVtIiwgImR5bmFtaWMiLCAiZmx1Y3R1YXRlIn0pLA0KICAgIGZha2VsYWdzbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc10gZmFrZSBsYWcgYW1vdW50IiwgMSwgMTUsIDEsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBkZWZlbnNpdmUgPSB7DQogICAgYWEgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzZF0gZGVmZW5zaXZlIGFhIiwgeyJvZmYiLCAib24gcGVlayIsICJmb3JjZSJ9KSwNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NkXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJzZW1pLXVwIiwgInNlbWktZG93biIsICJzd2F5IiwgInNpZGV3YXlzIiwgImRvd24iLCAidXAiLCAicmFuZG9tIiwgImN1c3RvbSJ9KSwNCiAgICBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc2RdIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc2RdIGF0IHRhcmdldHMiKSwNCiAgICB5YXcgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzZF0geWF3IiwgeyJzaWRld2F5cyIsICJzbG93IHNwaW4iLCAiZmFzdCBzcGluIiwgImFsbCB0aGUgc2lkZXMiLCAiY3VzdG9tIn0pLA0KICAgIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NkXSBmaXJzdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc2RdIHNlY29uZCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICB9LA0KICAgIH0sDQogc2xvd21vdGlvbiA9IHsNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJjdXN0b20iLCAiZG93biIsICJ1cCIsICJyYW5kb20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBhdCB0YXJnZXRzIiksDQogICAgd2F5cyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbV0gd2F5cyIsIDIsIDMsIDIsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbV0gbGVmdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIHJpZ2h0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIG11bHRpcGxpZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIG11bHRpcGxpZXIiLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByYW5kb21pemF0aW9uID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSByYW5kb21pemF0aW9uIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGJ5ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbc21dIGJyZWFrZXIiLCB7Im9mZiIsICJ0aWNrY291bnQiLCAic3BlZWQgYmFzZWQiLCAic3RhdGljIiwgIm9wcG9zaXRlIn0pLA0KICAgIGxieXNpZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbV0gc2lkZSIsIHsibGVmdCIsICJyaWdodCIsICJhdXRvIn0pLA0KICAgIGxieXNwZWVkID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBzcGVlZCIsIDEsIDEwLCA2LCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZmFrZWxhZ21vZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbV0gZmFrZSBsYWcgbW9kZSIsIHsibWF4aW11bSIsICJkeW5hbWljIiwgImZsdWN0dWF0ZSJ9KSwNCiAgICBmYWtlbGFnc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtXSBmYWtlIGxhZyBhbW91bnQiLCAxLCAxNSwgMSwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGRlZmVuc2l2ZSA9IHsNCiAgICBhYSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtZF0gZGVmZW5zaXZlIGFhIiwgeyJvZmYiLCAib24gcGVlayIsICJmb3JjZSJ9KSwNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtZF0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAic2VtaS11cCIsICJzZW1pLWRvd24iLCAic3dheSIsICJzaWRld2F5cyIsICJkb3duIiwgInVwIiwgInJhbmRvbSIsICJjdXN0b20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW3NtZF0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbWRdIGF0IHRhcmdldHMiKSwNCiAgICB5YXcgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbWRdIHlhdyIsIHsic2lkZXdheXMiLCAic2xvdyBzcGluIiwgImZhc3Qgc3BpbiIsICJhbGwgdGhlIHNpZGVzIiwgImN1c3RvbSJ9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbWRdIGZpcnN0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltzbWRdIHNlY29uZCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICB9LA0KICAgIH0sDQogcnVubmluZyA9IHsNCiAgICBwaXRjaCA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgImN1c3RvbSIsICJkb3duIiwgInVwIiwgInJhbmRvbSJ9KSwNCiAgICBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSBhdCB0YXJnZXRzIiksDQogICAgd2F5cyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSB3YXlzIiwgMiwgMywgMiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIGxlZnQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIHJpZ2h0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIG11bHRpcGxpZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gbXVsdGlwbGllciIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJhbmRvbWl6YXRpb24gPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gcmFuZG9taXphdGlvbiIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxieSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIGJyZWFrZXIiLCB7Im9mZiIsICJ0aWNrY291bnQiLCAic3BlZWQgYmFzZWQiLCAic3RhdGljIiwgIm9wcG9zaXRlIn0pLA0KICAgIGxieXNpZGUgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttXSBzaWRlIiwgeyJsZWZ0IiwgInJpZ2h0IiwgImF1dG8ifSksDQogICAgbGJ5c3BlZWQgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gc3BlZWQiLCAxLCAxMCwgNiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGZha2VsYWdtb2RlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbV0gZmFrZSBsYWcgbW9kZSIsIHsibWF4aW11bSIsICJkeW5hbWljIiwgImZsdWN0dWF0ZSJ9KSwNCiAgICBmYWtlbGFnc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21dIGZha2UgbGFnIGFtb3VudCIsIDEsIDE1LCAxLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgZGVmZW5zaXZlID0gew0KICAgIGFhID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbWRdIGRlZmVuc2l2ZSBhYSIsIHsib2ZmIiwgIm9uIHBlZWsiLCAiZm9yY2UifSksDQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttZF0gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAic2VtaS11cCIsICJzZW1pLWRvd24iLCAic3dheSIsICJzaWRld2F5cyIsICJkb3duIiwgInVwIiwgInJhbmRvbSIsICJjdXN0b20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21kXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21kXSBhdCB0YXJnZXRzIiksDQogICAgeWF3ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbWRdIHlhdyIsIHsic2lkZXdheXMiLCAic2xvdyBzcGluIiwgImZhc3Qgc3BpbiIsICJhbGwgdGhlIHNpZGVzIiwgImN1c3RvbSJ9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlttZF0gZmlyc3QgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW21kXSBzZWNvbmQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgfSwNCiAgICB9LA0KIGp1bXBpbmcgPSB7DQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSBwaXRjaCIsIHsibG9jYWwgdmlldyIsICJjdXN0b20iLCAiZG93biIsICJ1cCIsICJyYW5kb20ifSksDQogICAgcGl0Y2hfc2xpZGVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gYXQgdGFyZ2V0cyIpLA0KICAgIHdheXMgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gd2F5cyIsIDIsIDMsIDIsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsZWZ0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSBsZWZ0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSByaWdodCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBtdWx0aXBsaWVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIG11bHRpcGxpZXIiLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByYW5kb21pemF0aW9uID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIHJhbmRvbWl6YXRpb24iLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBsYnkgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSBicmVha2VyIiwgeyJvZmYiLCAidGlja2NvdW50IiwgInNwZWVkIGJhc2VkIiwgInN0YXRpYyIsICJvcHBvc2l0ZSJ9KSwNCiAgICBsYnlzaWRlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbal0gc2lkZSIsIHsibGVmdCIsICJyaWdodCIsICJhdXRvIn0pLA0KICAgIGxieXNwZWVkID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIHNwZWVkIiwgMSwgMTAsIDYsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBmYWtlbGFnbW9kZSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pdIGZha2UgbGFnIG1vZGUiLCB7Im1heGltdW0iLCAiZHluYW1pYyIsICJmbHVjdHVhdGUifSksDQogICAgZmFrZWxhZ3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqXSBmYWtlIGxhZyBhbW91bnQiLCAxLCAxNSwgMSwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGRlZmVuc2l2ZSA9IHsNCiAgICBhYSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pkXSBkZWZlbnNpdmUgYWEiLCB7Im9mZiIsICJvbiBwZWVrIiwgImZvcmNlIn0pLA0KICAgIHBpdGNoID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbamRdIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgInNlbWktdXAiLCAic2VtaS1kb3duIiwgInN3YXkiLCAic2lkZXdheXMiLCAiZG93biIsICJ1cCIsICJyYW5kb20iLCAiY3VzdG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqZF0gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqZF0gYXQgdGFyZ2V0cyIpLA0KICAgIHlhdyA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2pkXSB5YXciLCB7InNpZGV3YXlzIiwgInNsb3cgc3BpbiIsICJmYXN0IHNwaW4iLCAiYWxsIHRoZSBzaWRlcyIsICJjdXN0b20ifSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbamRdIGZpcnN0IHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJpZ2h0X3lhdyA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltqZF0gc2Vjb25kIHlhdyIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIH0sDQogICAgfSwNCiBhaXJjcm91Y2hpbmcgPSB7DQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gcGl0Y2giLCB7ImxvY2FsIHZpZXciLCAiY3VzdG9tIiwgImRvd24iLCAidXAiLCAicmFuZG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gY3VzdG9tIHBpdGNoIiwgLTg5LCA4OSwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGF0X3RhcmdldHMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gYXQgdGFyZ2V0cyIpLA0KICAgIHdheXMgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNdIHdheXMiLCAyLCAzLCAyLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNdIGxlZnQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmlnaHRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSByaWdodCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBtdWx0aXBsaWVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSBtdWx0aXBsaWVyIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgcmFuZG9taXphdGlvbiA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gcmFuZG9taXphdGlvbiIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxieSA9IHVpLm5ld19jb21ib2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2FjXSBicmVha2VyIiwgeyJvZmYiLCAidGlja2NvdW50IiwgInNwZWVkIGJhc2VkIiwgInN0YXRpYyIsICJvcHBvc2l0ZSJ9KSwNCiAgICBsYnlzaWRlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNdIHNpZGUiLCB7ImxlZnQiLCAicmlnaHQiLCAiYXV0byJ9KSwNCiAgICBsYnlzcGVlZCA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gc3BlZWQiLCAxLCAxMCwgNiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGZha2VsYWdtb2RlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNdIGZha2UgbGFnIG1vZGUiLCB7Im1heGltdW0iLCAiZHluYW1pYyIsICJmbHVjdHVhdGUifSksDQogICAgZmFrZWxhZ3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY10gZmFrZSBsYWcgYW1vdW50IiwgMSwgMTUsIDEsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBkZWZlbnNpdmUgPSB7DQogICAgYWEgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY2RdIGRlZmVuc2l2ZSBhYSIsIHsib2ZmIiwgIm9uIHBlZWsiLCAiZm9yY2UifSksDQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY2RdIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgInNlbWktdXAiLCAic2VtaS1kb3duIiwgInN3YXkiLCAic2lkZXdheXMiLCAiZG93biIsICJ1cCIsICJyYW5kb20iLCAiY3VzdG9tIn0pLA0KICAgIHBpdGNoX3NsaWRlciA9IHVpLm5ld19zbGlkZXIoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIlthY2RdIGN1c3RvbSBwaXRjaCIsIC04OSwgODksIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBhdF90YXJnZXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNkXSBhdCB0YXJnZXRzIiksDQogICAgeWF3ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNkXSB5YXciLCB7InNpZGV3YXlzIiwgInNsb3cgc3BpbiIsICJmYXN0IHNwaW4iLCAiYWxsIHRoZSBzaWRlcyIsICJjdXN0b20ifSksDQogICAgbGVmdF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNkXSBmaXJzdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbYWNkXSBzZWNvbmQgeWF3IiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgfSwNCiAgICB9LA0KIGZha2VsYWcgPSB7DQogICAgcGl0Y2ggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgIltsYWddIHBpdGNoIiwgeyJsb2NhbCB2aWV3IiwgImN1c3RvbSIsICJkb3duIiwgInVwIiwgInJhbmRvbSJ9KSwNCiAgICBwaXRjaF9zbGlkZXIgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSBjdXN0b20gcGl0Y2giLCAtODksIDg5LCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgYXRfdGFyZ2V0cyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2xhZ10gYXQgdGFyZ2V0cyIpLA0KICAgIHdheXMgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSB3YXlzIiwgMiwgMywgMiwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIGxlZnRfeWF3ID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2xhZ10gbGVmdCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICByaWdodF95YXcgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSByaWdodCB5YXciLCAtMTgwLCAxODAsIDAsIHRydWUsIG5pbCwgMSwgeyB9KSwNCiAgICBtdWx0aXBsaWVyID0gdWkubmV3X3NsaWRlcigiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiW2xhZ10gbXVsdGlwbGllciIsIC0xODAsIDE4MCwgMCwgdHJ1ZSwgbmlsLCAxLCB7IH0pLA0KICAgIHJhbmRvbWl6YXRpb24gPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSByYW5kb21pemF0aW9uIiwgLTE4MCwgMTgwLCAwLCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgbGJ5ID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSBicmVha2VyIiwgeyJvZmYiLCAidGlja2NvdW50IiwgInNwZWVkIGJhc2VkIiwgInN0YXRpYyIsICJvcHBvc2l0ZSJ9KSwNCiAgICBsYnlzaWRlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSBzaWRlIiwgeyJsZWZ0IiwgInJpZ2h0IiwgImF1dG8ifSksDQogICAgbGJ5c3BlZWQgPSB1aS5uZXdfc2xpZGVyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJbbGFnXSBzcGVlZCIsIDEsIDEwLCA2LCB0cnVlLCBuaWwsIDEsIHsgfSksDQogICAgfSwNCiBvdGhlciA9IHsNCiAgICBzYWZlX2tuaWZlID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIk90aGVyIiwgInNhZmUga25pZmUiKSwNCiAgICBzYWZlX3pldXMgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiT3RoZXIiLCAic2FmZSB0YXNlciIpLA0KICAgIHNhZmVfaGVhZCA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJPdGhlciIsICJzYWZlIGhlYWQgb24gaGVpZ2h0IGFkdmFudGFnZSIpLA0KICAgIGF2b2lkX2JhY2tzdGFiID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIk90aGVyIiwgImF2b2lkIGJhY2tzdGFiIiksDQogICAgc3RhdGljX2ZyZWVzdGFuZCA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJPdGhlciIsICJzdGF0aWMgb24gZnMiKSwNCiAgICBmbGlja29ubWFudWxzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsICJPdGhlciIsICJmbGljayBvcHBvc2l0ZSBlIG9uIG1hbnVhbCAmIGZzIiksDQogICAgYm9tYnNpdGVlZml4ID0gdWkubmV3X2NoZWNrYm94KCJBQSIsICJPdGhlciIsICJib21ic2l0ZSBlIGZpeCIpLA0KICAgIGxlZ2l0YWEgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiT3RoZXIiLCAibGVnaXQgYWEiLCB7Im9mZiIsICIyIHdheSIsICJzdGF0aWMiLCAiMyB3YXkifSksDQogfSwNCn0NCiBrZXliaW5kc190YWIgPSB7DQogICAgZWRnZXlhdyA9IHVpLm5ld19ob3RrZXkoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGIGVkZ2UgeWF3IiwgZmFsc2UpLA0KICAgIGZyZWVzdGFuZCA9IHVpLm5ld19ob3RrZXkoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGIGZyZWVzdGFuZCIsIGZhbHNlKSwNCiAgICBtYW51YWxfbGVmdCA9IHVpLm5ld19ob3RrZXkoIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwiXGE4QUVDRjFGRuKAoiAgXGFGRkZGRkZGRiBtYW51YWwgbGVmdCIsIGZhbHNlKSwNCiAgICBtYW51YWxfcmlnaHQgPSB1aS5uZXdfaG90a2V5KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsIlxhOEFFQ0YxRkbigKIgIFxhRkZGRkZGRkYgbWFudWFsIHJpZ2h0IiwgZmFsc2UpLA0KICAgIG1hbnVhbF9mb3J3YXJkID0gdWkubmV3X2hvdGtleSgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGIG1hbnVhbCBmb3J3YXJkIiwgZmFsc2UpLA0KICAgIG5vX2RlZmVuc2l2ZSA9IHVpLm5ld19ob3RrZXkoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGIGRpc2FibGUgZGVmZW5zaXZlIGFhIiwgZmFsc2UpLA0KICAgIGhpZGVzaG90cyA9IHVpLm5ld19ob3RrZXkoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYThBRUNGMUZG4oCiICBcYUZGRkZGRkZGIGhpZGVzaG90cyIsIGZhbHNlKSwNCiB9DQogcmFnZWJvdF90YWIgPSB7DQogICAgY3VzdG9tX2V4cGxvaXRzID0gdWkubmV3X2NoZWNrYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJjdXN0b20gZXhwbG9pdHMiKSwNCiB9DQoNCiB2aXN1YWxzX3RhYiA9IHsNCiAgICBwaXRjaHplcm8gPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgInBpdGNoIHplcm8gb24gbGFuZCIpLA0KICAgIHN0YXRpY2xlZ3MgPSB1aS5uZXdfY2hlY2tib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgInN0YXRpYyBsZWdzIGluIGFpciIpLA0KICAgIGFuaW1maXggPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgImFuaW1maXgiLCB7Im9mZiIsICJtb29ud2FsayIsICJuYXNhd2FsayIsICJzaGFrZSBwbGF5ZXIgbW9kZWwifSksDQogICAgaW5kaWNhdG9ycyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAibGFjb25pc20gaW5kcyIpLA0KICAgIGV2ZW50bG9ncyA9IHVpLm5ld19jaGVja2JveCgiQUEiLCJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiZXZlbnQgbG9ncyIpLA0KICAgIGNlbnRlcl9pbmRpY2F0b3JzID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJjcm9zc2hhaXIgaW5kcyIsIHsib2ZmIiwgImRhbmdlcm91cyIsICJtaW5pbWFsaXNtIiwgIm1vZGVybiJ9KSwNCiAgICBvbnNjb3BlID0gdWkubmV3X2NvbWJvYm94KCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJvbiBzY29wZSBhbmltYXRpb24iLCB7Im9mZiIsICJsZWZ0IiwgInJpZ2h0IiwgImFscGhhIn0pLA0KICAgIGFjY2VudGxhYmVsID0gdWkubmV3X2xhYmVsKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJBY2NlbnQgY29sb3IiKSwNCiAgICBhY2NlbnQgPSB1aS5uZXdfY29sb3JfcGlja2VyKCJBQSIsIkFudGktYWltYm90IGFuZ2xlcyIsICJBY2NlbnQgY29sb3IiKSwNCiAgICBhcnJvd3MgPSB1aS5uZXdfY29tYm9ib3goIkFBIiwiQW50aS1haW1ib3QgYW5nbGVzIiwgImFycm93cyIsIHsiT2ZmIiwgIk1hbnVhbCIsICJPbGQiLCAiVFM0IiwgIkFsd2F5cyJ9KSwNCiB9DQoNCg0KDQoNCg0KIC0tIENGRw0KbG9jYWwgZGF0YWJhc2VfbmFtZSA9ICJsYWNvbmlzbV9jZmciDQpsb2NhbCBkYiA9IGRhdGFiYXNlLnJlYWQoZGF0YWJhc2VfbmFtZSkgb3IgeyBjb25maWdzID0ge30gfQ0KbG9jYWwgY29uZmlnX2xpc3QgPSB7fQ0KbG9jYWwgYmluZHMgPSB7fQ0KZnVuY3Rpb24gdWkubXVsdGlSZWZlcmVuY2UodGFiLCBncm91cGJveCwgbmFtZSkNCiAgICBsb2NhbCByZWYxLCByZWYyLCByZWYzID0gdWkucmVmZXJlbmNlKHRhYiwgZ3JvdXBib3gsIG5hbWUpDQogICAgcmV0dXJuIHsgcmVmMSwgcmVmMiwgcmVmMyB9DQplbmQNCmxvY2FsIHJlZmVyZW5jZXMgPSB7DQp9DQoNCmxvY2FsIENvbmZpZ3MgPSB7IH0NCmxvY2FsIG1lbnUgPSB7fSBkbw0KICAgIG1lbnUudXBkYXRlX2xpc3QgPSBmdW5jdGlvbih1cGRhdGVfbGlzdGJveCkNCiAgICAgICAgY29uZmlnX2xpc3QgPSB7fQ0KDQogICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGRiLmNvbmZpZ3MpIGRvDQogICAgICAgICAgICB0YWJsZS5pbnNlcnQoY29uZmlnX2xpc3QsIHYubmFtZSkNCiAgICAgICAgZW5kDQogICAgDQogICAgICAgIGlmICh1cGRhdGVfbGlzdGJveCkgdGhlbg0KICAgICAgICAgICAgdWkudXBkYXRlKG1lbnUubGlzdGJveCwgY29uZmlnX2xpc3QpDQogICAgICAgIGVuZA0KICAgIA0KICAgICAgICByZXR1cm4gY29uZmlnX2xpc3QNCiAgICBlbmQNCiAgICBtZW51Lmxpc3Rib3ggPSB1aS5uZXdfbGlzdGJveCgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIkFudGktYWltIGNvbmZpZyBsaXN0IiwgbWVudS51cGRhdGVfbGlzdChmYWxzZSkpDQogICAgbWVudS50ZXh0Ym94ID0gdWkubmV3X3RleHRib3goIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJBbnRpLWFpbSBjb25maWcgbmFtZSIpDQogICAgdWkuc2V0X2NhbGxiYWNrKG1lbnUubGlzdGJveCwgZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBpbmRleCA9IHVpLmdldChtZW51Lmxpc3Rib3gpDQoNCiAgICAgICAgaWYgaW5kZXggPT0gbmlsIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgICAgIGxvY2FsIG5hbWUgPSBjb25maWdfbGlzdFtpbmRleCArIDFdDQoNCiAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoYmluZHMpIGRvDQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZSh2LnJlZiwgZmFsc2UpDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvY2FsIGJpbmQgPSBiaW5kc1tuYW1lXQ0KICAgICAgICBpZiBiaW5kID09IG5pbCB0aGVuDQogICAgICAgICAgICBiaW5kc1tuYW1lXSA9IHsNCiAgICAgICAgICAgICAgICByZWYgPSB1aS5uZXdfaG90a2V5KCJBQSIsICJGYWtlIGxhZyIsIHN0cmluZy5mb3JtYXQoIkxvYWQgdGhlIGNvbmZpZzogXGFjMTdmODJmZiVzIiwgbmFtZSkpLA0KICAgICAgICAgICAgICAgIHN0YXRlID0gZmFsc2UsDQogICAgICAgICAgICAgICAgZGVsZXRlZCA9IGZhbHNlLA0KICAgICAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICB1aS5zZXRfdmlzaWJsZShiaW5kLnJlZiwgdHJ1ZSkNCiAgICAgICAgZW5kDQoNCiAgICAgICAgdWkuc2V0KG1lbnUudGV4dGJveCwgbmFtZSkNCiAgICBlbmQpDQogICAgQ29uZmlncy5Mb2FkID0gdWkubmV3X2J1dHRvbigiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxhNzM3MzczZmZMb2FkIiwgZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBpbmRleCA9IHVpLmdldChtZW51Lmxpc3Rib3gpDQoNCiAgICAgICAgaWYgaW5kZXggPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGNsaWVudC5lcnJvcl9sb2coIlNlbGVjdCBhIGNvbmZpZyBmcm9tIGxpc3Rib3ggYmVmb3JlIGxvYWRpbmciKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvY2FsIGNmZyA9IGRiLmNvbmZpZ3NbY29uZmlnX2xpc3RbaW5kZXggKyAxXV0NCg0KICAgICAgICBpZiB0eXBlKGNmZykgfj0gInRhYmxlIiB0aGVuDQogICAgICAgICAgICBjbGllbnQuZXJyb3JfbG9nKCdBdHRlbXB0IHRvIGxvYWQgYSBjb3JydXB0ZWQgb3Igbm9uLWV4aXN0ZW50IGNvbmZpZycpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgZW5kDQoNCiAgICAgICAgZm9yIGksIHZhbCBpbiBwYWlycyhjZmcudmFsdWVzKSBkbw0KICAgICAgICAgICAgbG9jYWwgc3VjY2VzcyA9IHRydWUNCiAgICAgICAgICAgIGxvY2FsIHJlZiA9IHJlZmVyZW5jZXNbaV0NCiAgICAgICBpZiB0eXBlKHJlZikgPT0gInRhYmxlIiB0aGVuDQogICBzdWNjZXNzID0gcGNhbGwodWkuc2V0LCByZWZbMV0sIHZhbFsxXSkNCiAgaWYgbm90IHN1Y2Nlc3MgdGhlbiBjbGllbnQuZXJyb3JfbG9nKCJBdHRlbXB0IHRvIGxvYWQgYW4gb3V0ZGF0ZWQgY29uZmlnIikgcmV0dXJuIGVuZA0KICAgc3VjY2VzcyA9IHBjYWxsKHVpLnNldCwgcmVmWzJdLCB2YWxbMl0pDQogIGlmIG5vdCBzdWNjZXNzIHRoZW4gY2xpZW50LmVycm9yX2xvZygiQXR0ZW1wdCB0byBsb2FkIGFuIG91dGRhdGVkIGNvbmZpZyIpIHJldHVybiBlbmQNCiBlbHNlDQogIHN1Y2Nlc3MgPSBwY2FsbCh1aS5zZXQsIHJlZiwgdmFsKQ0KICAgaWYgbm90IHN1Y2Nlc3MgdGhlbiBjbGllbnQuZXJyb3JfbG9nKCJBdHRlbXB0IHRvIGxvYWQgYW4gb3V0ZGF0ZWQgY29uZmlnIikgcmV0dXJuIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBtZW51LnVwZGF0ZV9saXN0KHRydWUpDQogICAgZW5kKQ0KICAgIENvbmZpZ3MuU2F2ZSA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmU2F2ZSIsIGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbmFtZSA9IHVpLmdldChtZW51LnRleHRib3gpDQoNCiAgICAgICAgaWYgbmFtZSA9PSAiIiB0aGVuDQogICAgICAgICAgICBjbGllbnQuZXJyb3JfbG9nKCdGaWxsIGluIHRoZSBjb25maWcgbmFtZSB0ZXh0Ym94IGJlZm9yZSBzYXZpbmcnKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvY2FsIHRlbXAgPSB7IFsibmFtZSJdID0gbmFtZSwgWyJ2YWx1ZXMiXSA9IHt9IH0NCiAgICAgICAgZm9yIGksIHJlZiBpbiBwYWlycyhyZWZlcmVuY2VzKSBkbw0KICAgICAgICAgICAgaWYgdHlwZShyZWYpID09ICJ0YWJsZSIgdGhlbg0KICAgICAgICAgICAgICAgIHRlbXAudmFsdWVzW2ldID0geyB1aS5nZXQocmVmWzFdKSwgdWkuZ2V0KHJlZlsyXSkgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRlbXAudmFsdWVzW2ldID0gdWkuZ2V0KHJlZikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZGIuY29uZmlnc1tuYW1lXSA9IHRlbXANCiAgICAgICAgZGF0YWJhc2Uud3JpdGUoZGF0YWJhc2VfbmFtZSwgZGIpDQoNCiAgICAgICAgbWVudS51cGRhdGVfbGlzdCh0cnVlKQ0KICAgIGVuZCkNCiAgICBDb25maWdzLkRlbGV0ZSA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmRGVsZXRlIiwgZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBpbmRleCA9IHVpLmdldChtZW51Lmxpc3Rib3gpDQoNCiAgICAgICAgaWYgaW5kZXggPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGNsaWVudC5lcnJvcl9sb2coIlNlbGVjdCBhIGNvbmZpZyBmcm9tIGxpc3Rib3ggYmVmb3JlIGRlbGV0aW5nIikNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBlbmQNCg0KICAgICAgICBsb2NhbCBuYW1lID0gY29uZmlnX2xpc3RbaW5kZXggKyAxXQ0KDQogICAgICAgIGlmIG5hbWUgPT0gIm5pbCIgdGhlbg0KICAgICAgICAgICAgY2xpZW50LmVycm9yX2xvZygnQXR0ZW1wdCB0byBkZWxldGUgbm9uLWV4aXN0ZW50IGNvbmZpZycpDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgZW5kDQogICAgICAgIGJpbmRzW25hbWVdLmRlbGV0ZWQgPSB0cnVlDQogICAgICAgIGRiLmNvbmZpZ3NbbmFtZV0gPSBuaWwNCiAgICAgICAgZGF0YWJhc2Uud3JpdGUoZGF0YWJhc2VfbmFtZSwgZGIpDQoNCiAgICAgICAgbWVudS51cGRhdGVfbGlzdCh0cnVlKQ0KICAgIGVuZCkNCiAgICBDb25maWdzLkltcG9ydCA9IHVpLm5ld19idXR0b24oIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJcYTczNzM3M2ZmSW1wb3J0IGZyb20gY2xpcGJvYXJkIiwgZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBzdWNjZXNzLCBjZmcgPSBwY2FsbChqc29uLnBhcnNlLCBjbGlwYm9hcmQuZ2V0KCkpDQoNCiAgICAgICAgaWYgbm90IHN1Y2Nlc3MgdGhlbg0KICAgICAgICAgICAgY2xpZW50LmVycm9yX2xvZygnQXR0ZW1wdCB0byBsb2FkIGFuIGludmFsaWQgY29uZmlnJykNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBlbmQNCg0KICAgICAgICBmb3IgaSwgdmFsIGluIHBhaXJzKGNmZykgZG8NCiAgICAgICAgICAgIGxvY2FsIHN1Y2Nlc3MgPSB0cnVlDQogICAgICAgICAgICBsb2NhbCByZWYgPSByZWZlcmVuY2VzW2ldDQogICAgICAgICAgICBpZiB0eXBlKHJlZikgPT0gInRhYmxlIiB0aGVuDQogICAgICAgICAgICAgICAgc3VjY2VzcyA9IHBjYWxsKHVpLnNldCwgcmVmWzFdLCB2YWxbMV0pDQogICAgICAgICAgICAgICAgaWYgbm90IHN1Y2Nlc3MgdGhlbiBjbGllbnQuZXJyb3JfbG9nKCJBdHRlbXB0IHRvIGxvYWQgYW4gb3V0ZGF0ZWQgY29uZmlnIikgcmV0dXJuIGVuZA0KICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBwY2FsbCh1aS5zZXQsIHJlZlsyXSwgdmFsWzJdKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4gY2xpZW50LmVycm9yX2xvZygiQXR0ZW1wdCB0byBsb2FkIGFuIG91dGRhdGVkIGNvbmZpZyIpIHJldHVybiBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBzdWNjZXNzID0gcGNhbGwodWkuc2V0LCByZWYsIHZhbCkNCiAgICAgICAgICAgICAgICBpZiBub3Qgc3VjY2VzcyB0aGVuIGNsaWVudC5lcnJvcl9sb2coIkF0dGVtcHQgdG8gbG9hZCBhbiBvdXRkYXRlZCBjb25maWciKSByZXR1cm4gZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KICAgIENvbmZpZ3MuRXhwb3J0ID0gdWkubmV3X2J1dHRvbigiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIlxhNzM3MzczZmZFeHBvcnQgdG8gY2xpcGJvYXJkIiwgZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCB0ZW1wID0ge30NCg0KICAgICAgICBmb3IgaSwgcmVmIGluIHBhaXJzKHJlZmVyZW5jZXMpIGRvDQogICAgICAgICAgICBpZiB0eXBlKHJlZikgPT0gInRhYmxlIiB0aGVuDQogICAgICAgICAgICAgICAgdGVtcFtpXSA9IHsgdWkuZ2V0KHJlZlsxXSksIHVpLmdldChyZWZbMl0pIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdWkuZ2V0KHJlZikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCg0KICAgICAgICBjbGlwYm9hcmQuc2V0KGpzb24uc3RyaW5naWZ5KHRlbXApKQ0KICAgIGVuZCkNCiAgICBsb2NhbCB2aXNpYmxlID0gdHJ1ZQ0KZW5kDQpmdW5jdGlvbiBmbGF0dGVuVGFibGUoc291cmNlLCBkZXN0aW5hdGlvbiwgcHJlZml4KQ0KICAgIGZvciBrZXksIHZhbHVlIGluIHBhaXJzKHNvdXJjZSkgZG8NCiAgICAgICAgbG9jYWwgZnVsbEtleSA9IHByZWZpeCBhbmQgKHByZWZpeCAuLiAiLiIgLi4ga2V5KSBvciBrZXkNCiAgICAgICAgaWYgdHlwZSh2YWx1ZSkgPT0gInRhYmxlIiB0aGVuDQogICAgICAgICAgICBmbGF0dGVuVGFibGUodmFsdWUsIGRlc3RpbmF0aW9uLCBmdWxsS2V5KSAtLSDQoNC10LrRg9GA0YHQuNCy0L3QviDQvtCx0YrQtdC00LjQvdGP0LXQvCDQstC70L7QttC10L3QvdGD0Y4g0YLQsNCx0LvQuNGG0YMNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZGVzdGluYXRpb25bZnVsbEtleV0gPSB2YWx1ZSAtLSDQlNC+0LHQsNCy0LvRj9C10Lwg0LrQu9GO0Ycg0Lgg0LfQvdCw0YfQtdC90LjQtSDQsiDQv9C70L7RgdC60YPRjiDRgtCw0LHQu9C40YbRgw0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KZmxhdHRlblRhYmxlKGFudGlhaW1fdGFiLCByZWZlcmVuY2VzKQ0KZmxhdHRlblRhYmxlKHZpc3VhbHNfdGFiLCByZWZlcmVuY2VzKQ0KZmxhdHRlblRhYmxlKHJhZ2Vib3RfdGFiLCByZWZlcmVuY2VzKQ0KZnVuY3Rpb24gZmxhdHRlblRhYmxlVmFsdWVzKHNvdXJjZSkNCiAgICBsb2NhbCBmbGF0dGVuZWRWYWx1ZXMgPSB7fQ0KDQogICAgbG9jYWwgZnVuY3Rpb24gZmxhdHRlbihzb3VyY2UpDQogICAgICAgIGZvciBfLCB2YWx1ZSBpbiBwYWlycyhzb3VyY2UpIGRvDQogICAgICAgICAgICBpZiB0eXBlKHZhbHVlKSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICBmbGF0dGVuKHZhbHVlKSAtLSDQoNC10LrRg9GA0YHQuNCy0L3QviDQvtCx0YDQsNCx0LDRgtGL0LLQsNC10Lwg0LLQu9C+0LbQtdC90L3Rg9GOINGC0LDQsdC70LjRhtGDDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGZsYXR0ZW5lZFZhbHVlcywgdmFsdWUpIC0tINCU0L7QsdCw0LLQu9GP0LXQvCDQt9C90LDRh9C10L3QuNC1INCyINC/0LvQvtGB0LrQuNC5INGB0L/QuNGB0L7Qug0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgZmxhdHRlbihzb3VyY2UpDQoNCiAgICByZXR1cm4gZmxhdHRlbmVkVmFsdWVzDQplbmQNCi0tDQpVSV9FeHBvcnRfQ29uZGl0aW9uID0gdWkubmV3X2J1dHRvbignQUEnLCAnRmFrZSBsYWcnLCAnXGE3MzczNzNmZkV4cG9ydCBjdXJyZW50IGNvbmRpdGlvbicsIGZ1bmN0aW9uKCkNCiAgICBsb2NhbCB0ZW1wID0ge30NCiAgICBjdXJyZW50Y29uZHVpID0gYW50aWFpbV90YWJbdWkuZ2V0KHN0YXRlX3NlbGVjdG9yKV0NCiAgICBmb3IgaywgdiBpbiBpcGFpcnMoZmxhdHRlblRhYmxlVmFsdWVzKGN1cnJlbnRjb25kdWkpKSBkbw0KICAgICAgICB0YWJsZS5pbnNlcnQodGVtcCwgdWkuZ2V0KHYpKQ0KICAgIGVuZA0KDQogICAgY2xpcGJvYXJkLnNldChiYXNlNjQuZW5jb2RlKGJhc2U2NC5lbmNvZGUoanNvbi5zdHJpbmdpZnkodGVtcCksICJiYXNlNjQiKSwgImJhc2U2NCIpKQ0KZW5kKQ0KDQpVSV9JbXBvcnRfQ29uZGl0aW9uID0gdWkubmV3X2J1dHRvbignQUEnLCAnRmFrZSBsYWcnLCAnXGE3MzczNzNmZkltcG9ydCB0byBjdXJyZW50IGNvbmRpdGlvbicsIGZ1bmN0aW9uKCkNCiAgICBsb2NhbCB0ZW1wID0ganNvbi5wYXJzZShiYXNlNjQuZGVjb2RlKGJhc2U2NC5kZWNvZGUoY2xpcGJvYXJkLmdldCgpLCJiYXNlNjQiKSwgImJhc2U2NCIpKQ0KICAgIGN1cnJlbnRjb25kdWkgPSBhbnRpYWltX3RhYlt1aS5nZXQoc3RhdGVfc2VsZWN0b3IpXQ0KICAgIGZvciBpPTEsICN0ZW1wIGRvDQogICAgICAgIHVpLnNldChmbGF0dGVuVGFibGVWYWx1ZXMoY3VycmVudGNvbmR1aSlbaV0sIHRlbXBbaV0pDQogICAgZW5kDQplbmQpDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJwYWludF91aSIsIGZ1bmN0aW9uKCkNCiAgICBpZiB1aXN0YXRlID09IDEgdGhlbg0KICAgICAgICB1aS5zZXRfdmlzaWJsZShVSV9FeHBvcnRfQ29uZGl0aW9uLCB0cnVlKQ0KICAgICAgICB1aS5zZXRfdmlzaWJsZShVSV9JbXBvcnRfQ29uZGl0aW9uLCB0cnVlKQ0KICAgICAgICBlbHNlDQogICAgICAgIHVpLnNldF92aXNpYmxlKFVJX0V4cG9ydF9Db25kaXRpb24sIGZhbHNlKQ0KICAgICAgICB1aS5zZXRfdmlzaWJsZShVSV9JbXBvcnRfQ29uZGl0aW9uLCBmYWxzZSkNCiAgICAgICAgZW5kDQp0cmF2ZXJzZV90YWJsZShyZWYpDQoNCi0tIENGRyBUQUINCmlmIHVpc3RhdGUgPT0gNSB0aGVuDQogICAgdWkuc2V0X3Zpc2libGUobWVudS5saXN0Ym94LHRydWUpDQogICAgdWkuc2V0X3Zpc2libGUobWVudS50ZXh0Ym94LHRydWUpDQogICAgdHJhdmVyc2VfdGFibGVfb24oQ29uZmlncykNCmVsc2UNCiAgICB1aS5zZXRfdmlzaWJsZShtZW51Lmxpc3Rib3gsZmFsc2UpDQogICAgdWkuc2V0X3Zpc2libGUobWVudS50ZXh0Ym94LGZhbHNlKQ0KICAgIHRyYXZlcnNlX3RhYmxlKENvbmZpZ3MpDQogICAgZm9yIF8sIHYgaW4gcGFpcnMoYmluZHMpIGRvDQogICAgICAgIHVpLnNldF92aXNpYmxlKHYucmVmLCBmYWxzZSkNCiAgICAgIGVuZA0KZW5kDQotLSBBQSBUQUINCmlmIHVpc3RhdGUgfj0gMSB0aGVuIHRyYXZlcnNlX3RhYmxlKGFudGlhaW1fdGFiKSB1aS5zZXRfdmlzaWJsZShzdGF0ZV9zZWxlY3RvciwgZmFsc2UpIGVsc2UgDQogICAgY3VycmVudGNvbmRpdGlvbiA9IGFudGlhaW1fdGFiW3VpLmdldChzdGF0ZV9zZWxlY3RvcildDQp0cmF2ZXJzZV90YWJsZShhbnRpYWltX3RhYikNCnRyYXZlcnNlX3RhYmxlX29uKGFudGlhaW1fdGFiLm90aGVyKQ0KdHJhdmVyc2VfdGFibGVfb24oY3VycmVudGNvbmRpdGlvbikgdWkuc2V0X3Zpc2libGUoc3RhdGVfc2VsZWN0b3IsIHRydWUpIA0KaWYgdWkuZ2V0KGN1cnJlbnRjb25kaXRpb24ucGl0Y2gpIH49ICJjdXN0b20iIHRoZW4gdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5waXRjaF9zbGlkZXIsIGZhbHNlKSBlbHNlIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ucGl0Y2hfc2xpZGVyLCB0cnVlKSBlbmQNCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLndheXMpIH49IDIgdGhlbiB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmxlZnRfeWF3LCBmYWxzZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5yaWdodF95YXcsIGZhbHNlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLnJhbmRvbWl6YXRpb24sIGZhbHNlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLm11bHRpcGxpZXIsIHRydWUpIGVsc2UgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5yYW5kb21pemF0aW9uLCB0cnVlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmxlZnRfeWF3LCB0cnVlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLnJpZ2h0X3lhdywgdHJ1ZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5tdWx0aXBsaWVyLCBmYWxzZSkgZW5kDQppZiB1aS5nZXQoY3VycmVudGNvbmRpdGlvbi5sYnkpID09ICJ0aWNrY291bnQiIHRoZW4gdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5sYnlzaWRlLCBmYWxzZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5sYnlzcGVlZCwgZmFsc2UpIGVuZA0KaWYgdWkuZ2V0KGN1cnJlbnRjb25kaXRpb24ubGJ5KSA9PSAic3RhdGljIiBvciB1aS5nZXQoY3VycmVudGNvbmRpdGlvbi5sYnkpID09ICJvcHBvc2l0ZSIgdGhlbiB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmxieXNpZGUsIHRydWUpIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubGJ5c3BlZWQsIGZhbHNlKSBlbmQNCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLmxieSkgPT0gInNwZWVkIGJhc2VkIiB0aGVuIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubGJ5c2lkZSwgZmFsc2UpIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubGJ5c3BlZWQsIHRydWUpIGVuZA0KaWYgdWkuZ2V0KGN1cnJlbnRjb25kaXRpb24ubGJ5KSA9PSAib2ZmIiB0aGVuIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24ubGJ5c2lkZSxmYWxzZSkgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5sYnlzcGVlZCwgZmFsc2UpIGVuZA0KaWYgdWkuZ2V0KHN0YXRlX3NlbGVjdG9yKSB+PSAiZmFrZWxhZyIgdGhlbg0KaWYgdWkuZ2V0KGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlLmFhKSA9PSAib2ZmIiB0aGVuIHRyYXZlcnNlX3RhYmxlKGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS5hYSwgdHJ1ZSkNCmVsc2UNCnRyYXZlcnNlX3RhYmxlX29uKGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlKQ0KaWYgdWkuZ2V0KGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlLnBpdGNoKSB+PSAiY3VzdG9tIiB0aGVuIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlLnBpdGNoX3NsaWRlciwgZmFsc2UpIGVsc2UgdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5kZWZlbnNpdmUucGl0Y2hfc2xpZGVyLCB0cnVlKSBlbmQNCmlmIHVpLmdldChjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS55YXcpIH49ICJjdXN0b20iIHRoZW4gdWkuc2V0X3Zpc2libGUoY3VycmVudGNvbmRpdGlvbi5kZWZlbnNpdmUubGVmdF95YXcsIGZhbHNlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS5yaWdodF95YXcsIGZhbHNlKSBlbHNlIHVpLnNldF92aXNpYmxlKGN1cnJlbnRjb25kaXRpb24uZGVmZW5zaXZlLmxlZnRfeWF3LCB0cnVlKSB1aS5zZXRfdmlzaWJsZShjdXJyZW50Y29uZGl0aW9uLmRlZmVuc2l2ZS5yaWdodF95YXcsIHRydWUpIGVuZA0KZW5kDQplbmQNCmVuZA0KLS0NCg0KDQotLSBLRVlCSU5EUyBUQUINCmlmIHVpc3RhdGUgPT0gNiB0aGVuIA0KdHJhdmVyc2VfdGFibGVfb24oa2V5YmluZHNfdGFiKQ0KZWxzZSANCnRyYXZlcnNlX3RhYmxlKGtleWJpbmRzX3RhYikNCmVuZA0KDQotLSBSQUdFQk9UIFRBQg0KaWYgdWlzdGF0ZSA9PSAyIHRoZW4NCnRyYXZlcnNlX3RhYmxlX29uKHJhZ2Vib3RfdGFiKQ0KZWxzZQ0KdHJhdmVyc2VfdGFibGUocmFnZWJvdF90YWIpDQplbmQNCi0tDQppZiB1aXN0YXRlID09IDMgdGhlbg0KdHJhdmVyc2VfdGFibGVfb24odmlzdWFsc190YWIpDQplbHNlDQp0cmF2ZXJzZV90YWJsZSh2aXN1YWxzX3RhYikNCmVuZA0KZW5kKQ0KbG9jYWwgZ3JhbV9jcmVhdGUgPSBmdW5jdGlvbih2YWx1ZSwgY291bnQpIGxvY2FsIGdyYW0gPSB7IH07IGZvciBpPTEsIGNvdW50IGRvIGdyYW1baV0gPSB2YWx1ZTsgZW5kIHJldHVybiBncmFtOyBlbmQNCmxvY2FsIGdyYW1fdXBkYXRlID0gZnVuY3Rpb24odGFiLCB2YWx1ZSwgZm9yY2VkKSBsb2NhbCBuZXdfdGFiID0gdGFiOyBpZiBmb3JjZWQgb3IgbmV3X3RhYlsjbmV3X3RhYl0gfj0gdmFsdWUgdGhlbiB0YWJsZS5pbnNlcnQobmV3X3RhYiwgdmFsdWUpOyB0YWJsZS5yZW1vdmUobmV3X3RhYiwgMSk7IGVuZDsgdGFiID0gbmV3X3RhYjsgZW5kDQpsb2NhbCBnZXRfYXZlcmFnZSA9IGZ1bmN0aW9uKHRhYikgbG9jYWwgZWxlbWVudHMsIHN1bSA9IDAsIDA7IGZvciBrLCB2IGluIHBhaXJzKHRhYikgZG8gc3VtID0gc3VtICsgdjsgZWxlbWVudHMgPSBlbGVtZW50cyArIDE7IGVuZCByZXR1cm4gc3VtIC8gZWxlbWVudHM7IGVuZA0KYnJlYWtlciA9IHsNCiAgICBkZWZlbnNpdmUgPSAwLA0KICAgIGRlZmVuc2l2ZV9jaGVjayA9IDAsDQogICAgY21kID0gMCwNCiAgICBsYXN0X29yaWdpbiA9IG5pbCwNCiAgICBvcmlnaW4gPSBuaWwsDQogICAgdHBfZGlzdCA9IDAsDQogICAgdHBfZGF0YSA9IGdyYW1fY3JlYXRlKDAsMykNCn0NCnRpY2tiYXNlID0gMA0KIGZ1bmN0aW9uIGdldF92ZWxvY2l0eShwbGF5ZXIpDQogICAgbG9jYWwgeCx5LHogPSBlbnRpdHkuZ2V0X3Byb3AocGxheWVyLCAibV92ZWNWZWxvY2l0eSIpDQogICAgaWYgeCA9PSBuaWwgdGhlbiByZXR1cm4gZW5kDQogICAgcmV0dXJuIG1hdGguc3FydCh4KnggKyB5KnkgKyB6KnopDQplbmQNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInJ1bl9jb21tYW5kIiwgZnVuY3Rpb24oY21kKQ0KICAgIGJyZWFrZXIuY21kID0gY21kLmNvbW1hbmRfbnVtYmVyDQogICAgbWUgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgaWYgbm90IG1lIG9yIG5vdCBlbnRpdHkuaXNfYWxpdmUobWUpIHRoZW4gICAgIA0KICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgYnJlYWtlci5kZWZlbnNpdmVfY2hlY2sgPSAwDQogICAgICAgIHJldHVybiBlbmQNCiAgICAgICAgaWYgbWF0aC5hYnModGlja2Jhc2UgLSBicmVha2VyLmRlZmVuc2l2ZV9jaGVjaykgPiA2NCB0aGVuDQogICAgICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KICAgICAgICBlbmQNCmVuZCkNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicHJlZGljdF9jb21tYW5kIiwgZnVuY3Rpb24oY21kKQ0KICAgIG1lID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgICAgICBpZiBub3QgbWUgb3Igbm90IGVudGl0eS5pc19hbGl2ZShtZSkgdGhlbiAgICAgDQogICAgICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KICAgICAgICAgICAgcmV0dXJuIGVuZA0KICAgIGlmIGNtZC5jb21tYW5kX251bWJlciA9PSBicmVha2VyLmNtZCB0aGVuDQogICAgICAgIHRpY2tiYXNlID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX25UaWNrQmFzZSIpDQogICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gbWF0aC5tYXgodGlja2Jhc2UsIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrKQ0KICAgICAgICBicmVha2VyLmNtZCA9IDANCiAgICAgICAgaWYgbWF0aC5hYnModGlja2Jhc2UgLSBicmVha2VyLmRlZmVuc2l2ZV9jaGVjaykgPiA2NCB0aGVuDQogICAgICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgYnJlYWtlci5kZWZlbnNpdmVfY2hlY2sgPiB0aWNrYmFzZSB0aGVuICAgICAgICAgIA0KICAgICAgICAgICAgYnJlYWtlci5kZWZlbnNpdmUgPSBtYXRoLmFicyh0aWNrYmFzZSAtIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrIC0gMSkNCiAgICAgICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGlmIG1hdGguYWJzKHRpY2tiYXNlIC0gYnJlYWtlci5kZWZlbnNpdmVfY2hlY2spID4gNjQgdGhlbg0KICAgICAgICBicmVha2VyLmRlZmVuc2l2ZSA9IDANCiAgICAgICAgYnJlYWtlci5kZWZlbnNpdmVfY2hlY2sgPSAwDQogICAgZW5kDQplbmQpDQpmb3JyZWFsdGltZSA9IDANCmZ1bmN0aW9uIHNtb290aEppdHRlcihzd2l0Y2h5YXcxLCBzd2l0Y2h5YXcyLCBzd2l0Y2hpbmdzcGVlZCkNCiAgICBpZiBnbG9iYWxzLmN1cnRpbWUoKSA+IGZvcnJlYWx0aW1lICsgMSAvIChzd2l0Y2hpbmdzcGVlZCAqIDIpIHRoZW4NCiAgICAgICAgZmluYWx5YXdnZyA9IHN3aXRjaHlhdzENCiAgICAgICAgaWYgZ2xvYmFscy5jdXJ0aW1lKCkgLSBmb3JyZWFsdGltZSA+IDIgLyAoc3dpdGNoaW5nc3BlZWQgKiAyKSB0aGVuDQogICAgICAgICAgICBmb3JyZWFsdGltZSA9IGdsb2JhbHMuY3VydGltZSgpDQogICAgICAgIGVuZA0KICAgIGVsc2UNCiAgICAgICAgZmluYWx5YXdnZyA9IHN3aXRjaHlhdzINCiAgICBlbmQNCiAgICByZXR1cm4gZmluYWx5YXdnZw0KZW5kDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJsZXZlbF9pbml0IiwgZnVuY3Rpb24oKQ0KICAgICAgICBicmVha2VyLmNtZCA9IDANCiAgICAgICAgYnJlYWtlci5kZWZlbnNpdmUgPSAwDQogICAgICAgIGJyZWFrZXIuZGVmZW5zaXZlX2NoZWNrID0gMA0KICAgIGZvcnJlYWx0aW1lID0gMA0KZW5kKQ0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicm91bmRfc3RhcnQiLCBmdW5jdGlvbigpDQogICAgYnJlYWtlci5jbWQgPSAwDQogICAgYnJlYWtlci5kZWZlbnNpdmUgPSAwDQogICAgYnJlYWtlci5kZWZlbnNpdmVfY2hlY2sgPSAwDQplbmQpDQpmdW5jdGlvbiBkZXN5bmNzaWRlKCkNCiAgICBpZiBub3QgZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSBvciBub3QgZW50aXR5LmlzX2FsaXZlKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpIHRoZW4NCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgbG9jYWwgYm9keXlhdyA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAxMSkgKiAxMjAgLSA2MA0KICAgIGxvY2FsIHNpZGUgPSBib2R5eWF3ID4gMCBhbmQgLTEgb3IgMQ0KICAgIHJldHVybiBzaWRlDQplbmQNCmNvbmR0b3Rha2UgPSAiIg0KZnVuY3Rpb24gY2FsY3VsYXRlX2JvZHlfZnMoKQ0KICAgIGlmIG5vdCBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpIG9yIG5vdCBjbGllbnQuY3VycmVudF90aHJlYXQoKSB0aGVuDQogICAgICAgIHJldHVybiAxDQogICAgZW5kDQogICAgbG9jYWwgeDEsIHkxLCB6MSA9IGVudGl0eS5oaXRib3hfcG9zaXRpb24oZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgMCkNCiAgICBsb2NhbCB4MiwgeTIsIHoyID0gZW50aXR5LmhpdGJveF9wb3NpdGlvbihjbGllbnQuY3VycmVudF90aHJlYXQoKSwgMCkNCg0KICAgIGxvY2FsIHJlc3VsdA0KICAgIGlmIHgyIC0geDEgPCAxMCB0aGVuDQogICAgICAgIHJlc3VsdCA9IC0xDQogICAgZWxzZQ0KICAgICAgICByZXN1bHQgPSAxDQogICAgZW5kDQoNCiAgICByZXR1cm4gcmVzdWx0DQplbmQNCmxvY2FsIGFudGlfYWltcyA9IHsNCiAgICBjb25kaXRpb24gPSAiIiwNCn0NCmxvY2FsIGhlbHBlcnMgPSB7DQogICAgbHAgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLA0KICAgIGdyb3VuZF90aWNrcyA9IDAsDQp9DQpza2VldGZha2VsYWdsaW1pdCA9IHVpLnJlZmVyZW5jZSgiQUEiLCJGYWtlIGxhZyIsICJMaW1pdCIpDQpza2VldGZha2VsYWdhbW91bnQgPSB1aS5yZWZlcmVuY2UoIkFBIiwiRmFrZSBsYWciLCAiQW1vdW50IikNCmxvY2FsIGtleXNmb3JpbmRzID0gDQp7DQogICBkb3VibGV0YXAgPSB1aS5tdWx0aVJlZmVyZW5jZSgiUkFHRSIsICJBaW1ib3QiLCAiRG91YmxlIHRhcCIpOw0KICAgaGlkZXNob3RzID0gIHVpLm11bHRpUmVmZXJlbmNlKCJBQSIsICJPdGhlciIsICJPbiBzaG90IGFudGktYWltIik7DQogICBmcmVlc3RhbmQgPSB1aS5tdWx0aVJlZmVyZW5jZSgiQUEiLCAiQW50aS1haW1ib3QgYW5nbGVzIiwgIkZyZWVzdGFuZGluZyIpOw0KICAgZG1nID0gdWkubXVsdGlSZWZlcmVuY2UoIlJBR0UiLCAiQWltYm90IiwgIk1pbmltdW0gZGFtYWdlIG92ZXJyaWRlIik7DQp9ICANCmZ1bmN0aW9uIGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkNCiAgICBscCA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICBpZiBub3QgbHAgdGhlbiByZXR1cm4gZW5kDQogICAgbG9jYWwgZmxhZ3MgPSBlbnRpdHkuZ2V0X3Byb3AobHAsICdtX2ZGbGFncycpDQogICAgaWYgYml0LmJhbmQoZmxhZ3MsIDEpID09IDAgdGhlbg0KICAgICAgICBoZWxwZXJzLmdyb3VuZF90aWNrcyA9IDANCiAgICBlbHNlaWYgaGVscGVycy5ncm91bmRfdGlja3MgPD0gNDUgdGhlbg0KICAgICAgICBoZWxwZXJzLmdyb3VuZF90aWNrcyA9IGhlbHBlcnMuZ3JvdW5kX3RpY2tzICsgMQ0KICAgIGVuZA0KICAgIHJldHVybiBoZWxwZXJzLmdyb3VuZF90aWNrcyA+PSA0NQ0KZW5kDQpmdW5jdGlvbiBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkNCiAgICBscCA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICBpZiBub3QgbHAgb3Igbm90IGVudGl0eS5pc19hbGl2ZShscCkgdGhlbiByZXR1cm4gZW5kDQogICAgICAgICAgICBpZiBub3QgZW50aXR5LmlzX2FsaXZlKGxwKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgIGxvY2FsIGR1Y2tfYW10ID0gZW50aXR5LmdldF9wcm9wKGxwLCAnbV9mbER1Y2tBbW91bnQnKQ0KICAgICAgICAgICAgbG9jYWwgc3BlZWQgPSB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKGxwLCAnbV92ZWNWZWxvY2l0eScpKTpsZW5ndGgoKQ0KICAgICAgICAgICAgaWYgdWkuZ2V0KGtleXNmb3JpbmRzLmRvdWJsZXRhcFsxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMl0pIGFuZCBub3QgdWkuZ2V0KHJlZi5hbnRpYWltLmZkKSBvciB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzFdKSBhbmQgbm90IHVpLmdldChyZWYuYW50aWFpbS5mZCkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMl0pIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBub3QgaGVscGVyczppc19vbl9ncm91bmQoKSBhbmQgZHVja19hbXQgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAianVtcGluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgZHVja19hbXQgPiAwIGFuZCBub3QgaGVscGVyczppc19vbl9ncm91bmQoKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiYWlyY3JvdWNoaW5nIg0KICAgICAgICAgICAgICAgIGVsc2VpZiBkdWNrX2FtdCA+IDAgYW5kIHNwZWVkIDwgMyBhbmQgaGVscGVyczppc19vbl9ncm91bmQoKSBhbmQgbm90IHVpLmdldChyZWYuYW50aWFpbS5mZCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNyb3VjaGluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgZHVja19hbXQgPiAwIGFuZCBzcGVlZCA+IDMgYW5kIGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkgYW5kIG5vdCB1aS5nZXQocmVmLmFudGlhaW0uZmQpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjcm91Y2hydW5uaW5nIg0KICAgICAgICAgICAgICAgIGVsc2VpZiBzcGVlZCA+IDIgYW5kIG5vdCB1aS5nZXQocmVmLmFudGlhaW0uc2xvd19tb3Rpb25bMl0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJydW5uaW5nIg0KICAgICAgICAgICAgICAgIGVsc2VpZiB1aS5nZXQocmVmLmFudGlhaW0uc2xvd19tb3Rpb25bMl0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJzbG93bW90aW9uIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJzdGFuZGluZyINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gImZha2VsYWciDQogICAgICAgICAgICBlbmQNCmVuZA0KZnVuY3Rpb24gYW50aV9haW1zOmdldF9mYWtlbGFnX2NvbmQoKQ0KICAgIGxwID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgIGlmIG5vdCBscCBvciBub3QgZW50aXR5LmlzX2FsaXZlKGxwKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgIGlmIG5vdCBlbnRpdHkuaXNfYWxpdmUobHApIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgbG9jYWwgZHVja19hbXQgPSBlbnRpdHkuZ2V0X3Byb3AobHAsICdtX2ZsRHVja0Ftb3VudCcpDQogICAgICAgICAgICBsb2NhbCBzcGVlZCA9IHZlY3RvcihlbnRpdHkuZ2V0X3Byb3AobHAsICdtX3ZlY1ZlbG9jaXR5JykpOmxlbmd0aCgpDQogICAgICAgICAgICAgICAgaWYgbm90IGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkgYW5kIGR1Y2tfYW10ID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gImp1bXBpbmciDQogICAgICAgICAgICAgICAgZWxzZWlmIGR1Y2tfYW10ID4gMCBhbmQgbm90IGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gImFpcmNyb3VjaGluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgZHVja19hbXQgPiAwIGFuZCBzcGVlZCA8IDMgYW5kIGhlbHBlcnM6aXNfb25fZ3JvdW5kKCkgYW5kIG5vdCB1aS5nZXQocmVmLmFudGlhaW0uZmQpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJjcm91Y2hpbmciDQogICAgICAgICAgICAgICAgZWxzZWlmIGR1Y2tfYW10ID4gMCBhbmQgc3BlZWQgPiAzIGFuZCBoZWxwZXJzOmlzX29uX2dyb3VuZCgpIGFuZCBub3QgdWkuZ2V0KHJlZi5hbnRpYWltLmZkKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiY3JvdWNocnVubmluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgc3BlZWQgPiAyIGFuZCBub3QgdWkuZ2V0KHJlZi5hbnRpYWltLnNsb3dfbW90aW9uWzJdKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAicnVubmluZyINCiAgICAgICAgICAgICAgICBlbHNlaWYgdWkuZ2V0KHJlZi5hbnRpYWltLnNsb3dfbW90aW9uWzJdKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAic2xvd21vdGlvbiINCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAic3RhbmRpbmciDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KLS0gQ1JFQVRFIE1PVkUNCmxvY2FsIGN1c3RvbWludmVydCA9IHRydWUNCmxvY2FsIGN1c3RvbXZhbHVlID0gMA0KICBmdW5jdGlvbiBjdXN0b21zd2F5KCkNCiAgICBpZiBjdXN0b21pbnZlcnQgPT0gdHJ1ZSB0aGVuDQogICAgICAgIGN1c3RvbXZhbHVlID0gY3VzdG9tdmFsdWUgKyAwLjENCg0KICAgICAgICBpZiBjdXN0b212YWx1ZSA+IDEgdGhlbiANCiAgICAgICAgICAgIGN1c3RvbWludmVydCA9IGZhbHNlDQogICAgICAgIGVuZA0KDQogICAgZWxzZQ0KICAgICAgICBjdXN0b212YWx1ZSA9IGN1c3RvbXZhbHVlIC0gMC4xDQogICAgICAgIGlmIGN1c3RvbXZhbHVlIDwgMCB0aGVuDQogICAgICAgICAgICBjdXN0b212YWx1ZSA9IDANCiAgICAgICAgICAgIGN1c3RvbWludmVydCA9IHRydWUNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIGN1c3RvbXZhbHVlDQplbmQNCmxvY2FsIGZ1bmN0aW9uIGdldF9lbnRfZGlzdChlbnRfMSwgZW50XzIpDQogICAgbG9jYWwgZW50MV9wb3MgPSB2ZWN0b3IoZW50aXR5LmdldF9wcm9wKGVudF8xLCAibV92ZWNPcmlnaW4iKSkNCiAgICBsb2NhbCBlbnQyX3BvcyA9IHZlY3RvcihlbnRpdHkuZ2V0X3Byb3AoZW50XzIsICJtX3ZlY09yaWdpbiIpKQ0KDQogICAgbG9jYWwgZGlzdCA9IGVudDFfcG9zOmRpc3QoZW50Ml9wb3MpDQoNCiAgICByZXR1cm4gZGlzdA0KZW5kDQpsb2NhbCBmdW5jdGlvbiBpc192aXNpYmxlKGVudCkNCiAgICBsb2NhbCBtZSA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICBsb2NhbCBsX3gsIGxfeSwgbF96ID0gZW50aXR5LmhpdGJveF9wb3NpdGlvbihtZSwgMCkNCiAgICBsb2NhbCBlX3gsIGVfeSwgZV96ID0gZW50aXR5LmhpdGJveF9wb3NpdGlvbihlbnQsIDApDQoNCiAgICBsb2NhbCBmcmFjLCBlbnQgPSBjbGllbnQudHJhY2VfbGluZShtZSwgbF94LCBsX3ksIGxfeiwgZV94LCBlX3ksIGVfeikNCg0KICAgIHJldHVybiBmcmFjID4gMC42NQ0KZW5kDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJzZXR1cF9jb21tYW5kIiwgZnVuY3Rpb24oY21kKQ0KICAgIG1lID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgIGlmIG5vdCBtZSBvciBub3QgZW50aXR5LmlzX2FsaXZlKG1lKSB0aGVuIHJldHVybiBlbmQNCiAgICBicmVha2VyLnRpY2tiYXNlX2NoZWNrID0gZ2xvYmFscy50aWNrY291bnQoKSA+IGVudGl0eS5nZXRfcHJvcChtZSwgIm1fblRpY2tiYXNlIikNCmVuZCkNCmxvY2FsIGZ1bmN0aW9uIGFudGliYWNrc3RhYigpIA0KICAgIGxvY2FsIGJlc3RlbmVteSA9IGNsaWVudC5jdXJyZW50X3RocmVhdCgpDQogICAgbG9jYWwgbHAgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQogICAgaWYgbm90IGJlc3RlbmVteSBvciBub3QgbHAgdGhlbiByZXR1cm4gZmFsc2UgZW5kDQogICAgaWYgZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGJlc3RlbmVteSkpID09ICJDS25pZmUiIGFuZCBpc192aXNpYmxlKGJlc3RlbmVteSkgYW5kIGdldF9lbnRfZGlzdChscCwgYmVzdGVuZW15KSA8IDQ1MCBhbmQgYmVzdGVuZW15IH49IG5pbCB0aGVuIA0KICAgICAgICByZXR1cm4gdHJ1ZSANCiAgICBlbHNlIA0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCmVuZA0KZnVuY3Rpb24gc2FmZWhlYWR0YXJnZXQoKSANCiAgICBsb2NhbCBiZXN0ZW5lbXkgPSBjbGllbnQuY3VycmVudF90aHJlYXQoKQ0KICAgIGlmIGJlc3RlbmVteSA9PSBuaWwgdGhlbiByZXR1cm4gZmFsc2UgZW5kDQogICAgaWYgZW50aXR5LmdldF9jbGFzc25hbWUoZW50aXR5LmdldF9wbGF5ZXJfd2VhcG9uKGJlc3RlbmVteSkpIH49ICJDS25pZmUiIGFuZCBnZXRfZW50X2Rpc3QobHAsIGJlc3RlbmVteSkgPiAyNSB0aGVuDQogICAgICAgIGxvY2FsIG9yaWdpbiA9IHZlY3RvcihlbnRpdHkuZ2V0X29yaWdpbihlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpKSkNCiAgICAgICAgbG9jYWwgb3JpZ2luMiA9IHZlY3RvcihlbnRpdHkuZ2V0X29yaWdpbihiZXN0ZW5lbXkpKQ0KICAgICAgICByZXR1cm4gb3JpZ2luLnogLSBvcmlnaW4yLnogPiA3MA0KICAgIGVsc2UNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQplbmQNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInBsYXllcl9kZWF0aCIsIGZ1bmN0aW9uKGUpDQogICAgbG9jYWwgYXR0YWNrZXJfZW50aW5kZXggPSBjbGllbnQudXNlcmlkX3RvX2VudGluZGV4KGUuYXR0YWNrZXIpDQoJbG9jYWwgdmljdGltX2VudGluZGV4ICAgPSBjbGllbnQudXNlcmlkX3RvX2VudGluZGV4KGUudXNlcmlkKQ0KCWxvY2FsIGxvY2FsX3BsYXllciAJCT0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KaWYgdmljdGltX2VudGluZGV4ID09IGxvY2FsX3BsYXllciB0aGVuDQogICAgbG9jYWwgbWVzc2FnZSA9IHN0cmluZy5mb3JtYXQoInlvdSd2ZSBnb3Qga2lsbGVkIGJ5ICVzIHwgc2FmZWhlYWQ6ICVzIHwgYnJva2VuIGxjOiAlcyIsIGVudGl0eS5nZXRfcGxheWVyX25hbWUoYXR0YWNrZXJfZW50aW5kZXgpLCBzYWZlaGVhZHRhcmdldCgpIGFuZCB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuc2FmZV9oZWFkKSBhbmQgKGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKSA9PSAiYWlyY3JvdWNoaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImNyb3VjaGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJjcm91Y2hydW5uaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gInN0YW5kaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImZha2VsYWciKSwgaXNfZGVmZW5zaXZlKQ0KICAgIHByaW50KG1lc3NhZ2UpDQplbmQNCmVuZCkNCmZyZWVzdGFuZCwgZnJlZXN0YW5ka2V5ID0gdWkucmVmZXJlbmNlKCJBQSIsICJBbnRpLWFpbWJvdCBhbmdsZXMiLCAiRnJlZXN0YW5kaW5nIikNCmxhc3RfcHJlc3NfdCA9IDANCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicGFpbnRfdWkiLCBmdW5jdGlvbigpDQogICAgaWYgdWkuZ2V0KGtleWJpbmRzX3RhYi5oaWRlc2hvdHMpIHRoZW4NCiAgICAgICAgdWkuc2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1sxXSwgdHJ1ZSkNCiAgICAgICAgdWkuc2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1syXSwgIkFsd2F5cyBvbiIpDQogICAgZWxzZSANCiAgICAgICAgdWkuc2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1sxXSwgZmFsc2UpDQogICAgICAgIHVpLnNldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMl0sICJPbiBob3RrZXkiKQ0KICAgIGVuZA0KICAgIGlmIHVpLmdldChrZXliaW5kc190YWIuZWRnZXlhdykgdGhlbg0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZWRnZXlhdywgdHJ1ZSkNCgllbHNlIA0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZWRnZXlhdywgZmFsc2UpDQogICAgZW5kDQogICAgdWkuc2V0KGtleWJpbmRzX3RhYi5tYW51YWxfcmlnaHQsICJPbiBob3RrZXkiKQ0KICAgIHVpLnNldChrZXliaW5kc190YWIubWFudWFsX2xlZnQsICJPbiBob3RrZXkiKQ0KICAgIHVpLnNldChrZXliaW5kc190YWIubWFudWFsX2ZvcndhcmQsICJPbiBob3RrZXkiKQ0KICAgIGlmIHVpLmdldChrZXliaW5kc190YWIubWFudWFsX3JpZ2h0KSBhbmQgbGFzdF9wcmVzc190ICsgMC4yIDwgZ2xvYmFscy5jdXJ0aW1lKCkgdGhlbg0KICAgICAgICBtYW51YWxfZGlyID0gbWFudWFsX2RpciA9PSAyIGFuZCAwIG9yIDINCiAgICAgICAgbGFzdF9wcmVzc190ID0gZ2xvYmFscy5jdXJ0aW1lKCkNCiAgICBlbHNlaWYgdWkuZ2V0KGtleWJpbmRzX3RhYi5tYW51YWxfbGVmdCkgYW5kIGxhc3RfcHJlc3NfdCArIDAuMiA8IGdsb2JhbHMuY3VydGltZSgpIHRoZW4NCiAgICAgICAgbWFudWFsX2RpciA9IG1hbnVhbF9kaXIgPT0gMSBhbmQgMCBvciAxDQogICAgICAgIGxhc3RfcHJlc3NfdCA9IGdsb2JhbHMuY3VydGltZSgpDQogICAgZWxzZWlmIHVpLmdldChrZXliaW5kc190YWIubWFudWFsX2ZvcndhcmQpIGFuZCBsYXN0X3ByZXNzX3QgKyAwLjIgPCBnbG9iYWxzLmN1cnRpbWUoKSB0aGVuDQogICAgICAgIG1hbnVhbF9kaXIgPSBtYW51YWxfZGlyID09IDMgYW5kIDAgb3IgMw0KICAgICAgICBsYXN0X3ByZXNzX3QgPSBnbG9iYWxzLmN1cnRpbWUoKQ0KICAgIGVsc2VpZiBsYXN0X3ByZXNzX3QgPiBnbG9iYWxzLmN1cnRpbWUoKSB0aGVuDQogICAgICAgIGxhc3RfcHJlc3NfdCA9IGdsb2JhbHMuY3VydGltZSgpDQogICAgZW5kDQogICAgaWYgdWkuZ2V0KGtleWJpbmRzX3RhYi5mcmVlc3RhbmQpIGFuZCBtYW51YWxfZGlyID09IDAgdGhlbg0KCQl1aS5zZXQoZnJlZXN0YW5kLCB0cnVlKQ0KICAgICAgICB1aS5zZXQoZnJlZXN0YW5ka2V5LCAiQWx3YXlzIG9uIikgDQogICAgZWxzZSANCgl1aS5zZXQoZnJlZXN0YW5kLCBmYWxzZSkNCiAgICAgICAgdWkuc2V0KGZyZWVzdGFuZGtleSwgIk9uIGhvdGtleSIpICAgIA0KCQllbmQNCmVuZCkNCmFic3RvZmxpY2sgPSAwDQpjbGFtcGVyID0gZnVuY3Rpb24oY291bnQpDQppZiBjb3VudCA+IDE4MCB0aGVuIA0KcmV0dXJuIC0xODAgKyAoY291bnQgLSAxODApDQplbHNlaWYgY291bnQgPCAtMTgwIHRoZW4NCnJldHVybiAxODAgLSAoLTE4MCAtIGNvdW50KQ0KZW5kDQplbmQNCm1hbnVhbF9kaXIgPSAwDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCJzZXR1cF9jb21tYW5kIiwgZnVuY3Rpb24oY21kKQ0KICAgIGxvY2FsIHRwX2Ftb3VudCA9IGdldF9hdmVyYWdlKGJyZWFrZXIudHBfZGF0YSkvZ2V0X3ZlbG9jaXR5KGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkpKjEwMCANCiAgICBleHBsb2l0aW5nID0gdWkuZ2V0KGtleXNmb3JpbmRzLmRvdWJsZXRhcFsxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMl0pIGFuZCBub3QgdWkuZ2V0KHJlZi5hbnRpYWltLmZkKSBvciB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzFdKSBhbmQgbm90IHVpLmdldChyZWYuYW50aWFpbS5mZCkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMl0pIA0KICAgIGlzX2RlZmVuc2l2ZSA9IG5vdCB1aS5nZXQoa2V5YmluZHNfdGFiLm5vX2RlZmVuc2l2ZSkgYW5kIGJyZWFrZXIudGlja2Jhc2VfY2hlY2sgYW5kIGJyZWFrZXIuZGVmZW5zaXZlID4gMiBhbmQgYnJlYWtlci5kZWZlbnNpdmUgPCAxNCBhbmQgZXhwbG9pdGluZw0KICAgIC0tIGFuZCBub3QgKHRwX2Ftb3VudCA+PSAyNSBhbmQgYnJlYWtlci5kZWZlbnNpdmUgPj0gMTIpDQogICAgaGFuZGxlX2FhID0gZnVuY3Rpb24ocGl0Y2gsIHBpdGNoc2xpZGVyLCBhdF90YXJnZXRzLCB3YXlzLCBsZWZ0X3lhdywgcmlnaHRfeWF3LCBtdWx0aXBsaWVyLCByYW5kb21pemF0aW9uLCBsYnksIGxieXNpZGUsIGxieXNwZWVkLCBmYWtlbGFnbW9kZSwgZmFrZWxhZ3NsaWRlciwgZGVmZW5zaXZlbW9kZSwgZGVmZW5zaXZlcGl0Y2gsIGRlZmVuc2l2ZXNsaWRlciwgZGVmZW5zaXZlYXR0YXJnZXRzLCBkZWZlbnNpdmV5YXcsIGRlZmVuc2l2ZWxlZnQsIGRlZmVuc2l2ZXJpZ2h0KQ0KICAgICAgICBjbWQuZm9yY2VfZGVmZW5zaXZlID0gZGVmZW5zaXZlbW9kZSA9PSAiZm9yY2UiIGFuZCBub3QgKHRwX2Ftb3VudCA+PSAyNSBhbmQgYnJlYWtlci5kZWZlbnNpdmUgPj0gMTIpDQogICAgICAgIGlmIHBpdGNoID09ICJsb2NhbCB2aWV3IiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk9mZiIpIGVsc2VpZiBwaXRjaCA9PSAiY3VzdG9tIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgcGl0Y2hzbGlkZXIpIGVsc2VpZiBwaXRjaCA9PSAicmFuZG9tIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIlJhbmRvbSIpIGVsc2VpZiBwaXRjaCA9PSAidXAiIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiVXAiKSBlbHNlaWYgcGl0Y2ggPT0gImRvd24iIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiTWluaW1hbCIpIGVuZA0KICAgICAgICBpZiBhdF90YXJnZXRzIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpIGVsc2UgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpIGVuZA0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgaWYgd2F5cyA9PSAzIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIlNraXR0ZXIiKSB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCBtdWx0aXBsaWVyKSB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAwKSANCiAgICAgICAgZWxzZSANCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJSYW5kb20iKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgcmFuZG9taXphdGlvbikNCiAgICAgICAgaWYgZGVzeW5jc2lkZSgpID09IC0xIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgbGVmdF95YXcpIGVsc2UgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgcmlnaHRfeWF3KSBlbmQNCiAgICAgICAgZW5kDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgICAgICBpZiBsYnkgPT0gIm9wcG9zaXRlIiB0aGVuDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJPcHBvc2l0ZSIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIHRydWUpDQogICAgICAgIGVsc2VpZiBsYnkgPT0gInN0YXRpYyIgdGhlbg0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiU3RhdGljIikNCiAgICAgICAgICAgIGlmIGxieXNpZGUgPT0gImxlZnQiIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAtNTgpIGVsc2VpZiBsYnlzaWRlID09ICJyaWdodCIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDU4KSBlbHNlaWYgbGJ5c2lkZSA9PSAiYXV0byIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDU4ICogY2FsY3VsYXRlX2JvZHlfZnMoKSkgZW5kDQogICAgICAgIGVsc2VpZiBsYnkgPT0gInRpY2tjb3VudCIgdGhlbiANCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIkppdHRlciIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIC0xKQ0KICAgICAgICBlbHNlaWYgbGJ5ID09ICJzcGVlZCBiYXNlZCIgdGhlbg0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiU3RhdGljIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgc21vb3RoSml0dGVyKC02MCw2MCxsYnlzcGVlZCkpDQogICAgICAgIGVsc2VpZiBsYnkgPT0gIm9mZiIgdGhlbg0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT2ZmIikNCiAgICAgICAgZW5kDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mYWtlbGFnZW5hYmxlZFsxXSwgdHJ1ZSkNCiAgICAgICAgLS0gdWkuc2V0KHJlZi5hbnRpYWltLmZha2VsYWd2YXJpYW5jZSwgbWF0aC5yYW5kb20oMSw1KSkNCiAgICAgICAgaWYgZmFrZWxhZ21vZGUgPT0gIm1heGltdW0iIHRoZW4NCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZha2VsYWdhbW91bnRbMV0sICJNYXhpbXVtIikNCiAgICAgICAgZWxzZWlmIGZha2VsYWdtb2RlID09ICJkeW5hbWljIiB0aGVuDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mYWtlbGFnYW1vdW50WzFdLCAiRHluYW1pYyIpDQogICAgICAgIGVsc2VpZiBmYWtlbGFnbW9kZSA9PSAiZmx1Y3R1YXRlIiB0aGVuDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mYWtlbGFnYW1vdW50WzFdLCAiRmx1Y3R1YXRlIikNCiAgICAgICAgZW5kDQogICAgICAgIHVpLnNldChza2VldGZha2VsYWdsaW1pdCwgZmFrZWxhZ3NsaWRlcikNCiAgICAgICAgLS0gU0FGRUtOSUZFDQogICAgICAgIGlmIHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5zYWZlX2tuaWZlKSBhbmQgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJhaXJjcm91Y2hpbmciIGFuZCBlbnRpdHkuZ2V0X2NsYXNzbmFtZShlbnRpdHkuZ2V0X3BsYXllcl93ZWFwb24oZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSkpID09ICJDS25pZmUiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk1pbmltYWwiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJTdGF0aWMiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICAgICAgZW5kDQogICAgICAgIC0tIFNBRkVaRVVTDQogICAgICAgIGlmIHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5zYWZlX3pldXMpIGFuZCBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImFpcmNyb3VjaGluZyIgYW5kIGVudGl0eS5nZXRfY2xhc3NuYW1lKGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpKSkgPT0gIkNXZWFwb25UYXNlciIgdGhlbg0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiQ3VzdG9tIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgODkpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJBdCB0YXJnZXRzIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJSYW5kb20iKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIlN0YXRpYyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgIGVuZCANCiAgICAgICAgLS0gU0FGRSBIRUFEIA0KICAgICAgICBpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuc2FmZV9oZWFkKSBhbmQgc2FmZWhlYWR0YXJnZXQoKSBhbmQgKGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKSA9PSAiYWlyY3JvdWNoaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImNyb3VjaGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJjcm91Y2hydW5uaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gInN0YW5kaW5nIiBvciBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImZha2VsYWciKSB0aGVuDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiTWluaW1hbCIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJBdCB0YXJnZXRzIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgMCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIlN0YXRpYyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIGZhbHNlKQ0KICAgIGVuZCAgICAgDQogICAgICAgICAtLSBTVEFUSUMgRlJFRVNUQU5EDQogICAgaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLnN0YXRpY19mcmVlc3RhbmQpIGFuZCB1aS5nZXQoa2V5YmluZHNfdGFiLmZyZWVzdGFuZCkgdGhlbg0KICAgICAgICBpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuZmxpY2tvbm1hbnVscykgdGhlbiBjbWQuZm9yY2VfZGVmZW5zaXZlID0gMSBlbmQNCiAgICBpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuZmxpY2tvbm1hbnVscykgYW5kIGlzX2RlZmVuc2l2ZSB0aGVuDQogICAgICAgIGNtZC55YXcgPSBhYnN0b2ZsaWNrICsgMTgwDQogICAgICAgIGNtZC5waXRjaCA9IDEwODANCiAgICAgICAgY21kLmZvcmNlX2RlZmVuc2l2ZSA9IDENCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiQ3VzdG9tIikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzJdLCAwKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIGNsYW1wZXIoYWJzdG9mbGljaykpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJTdGF0aWMiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpICAgDQogICAgZWxzZQ0KICAgIGFic3RvZmxpY2sgPSBhbnRpYWltX2Z1bmNzLmdldF9hYnNfeWF3KCkNCiAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJBdCB0YXJnZXRzIikNCiAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAwKQ0KICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiU3RhdGljIikNCiAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCB0cnVlKQ0KICAgIGVuZA0KICAgICAgICBlbmQgICANCiAgICAgICAgLS0gREVGRU5TSVZFIEFBDQogICAgICAgIGlmIGlzX2RlZmVuc2l2ZSBhbmQgZGVmZW5zaXZlbW9kZSB+PSAib2ZmIiB0aGVuIA0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT2ZmIikNCiAgICAgICAgaWYgZGVmZW5zaXZlcGl0Y2ggPT0gImxvY2FsIHZpZXciIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiT2ZmIikgDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmVwaXRjaCA9PSAic2lkZXdheXMiIHRoZW4gIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgLTY5IC0gMTkgKiBjdXN0b21zd2F5KCkpDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmVwaXRjaCA9PSAic3dheSIgdGhlbiAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiQ3VzdG9tIikgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzJdLCAtODAgKiBjdXN0b21zd2F5KCkpDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmVwaXRjaCA9PSAiY3VzdG9tIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgZGVmZW5zaXZlc2xpZGVyKSANCiAgICAgICAgZWxzZWlmIGRlZmVuc2l2ZXBpdGNoID09ICJzZW1pLXVwIiB0aGVuICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKSB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIC00NSkNCiAgICAgICAgZWxzZWlmIGRlZmVuc2l2ZXBpdGNoID09ICJzZW1pLWRvd24iIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiQ3VzdG9tIikgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzJdLCA0NSkgIA0KICAgICAgICBlbHNlaWYgZGVmZW5zaXZlcGl0Y2ggPT0gInVwIiB0aGVuIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsyXSwgLTg5KQ0KICAgICAgICBlbHNlaWYgZGVmZW5zaXZlcGl0Y2ggPT0gImRvd24iIHRoZW4gdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiTWluaW1hbCIpIA0KICAgICAgICBlbHNlaWYgZGVmZW5zaXZlcGl0Y2ggPT0gInJhbmRvbSIgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJSYW5kb20iKSANCiAgICAgICAgZW5kIA0KICAgICAgICBpZiBkZWZlbnNpdmVhdHRhcmdldHMgdGhlbiB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJBdCB0YXJnZXRzIikgZWxzZSB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikgZW5kDQogICAgICAgIGlmIGRlZmVuc2l2ZXlhdyB+PSAiYWxsIHRoZSBzaWRlcyIgdGhlbg0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIlJhbmRvbSIpIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgIGlmIGRlZmVuc2l2ZXlhdyA9PSAic2xvdyBzcGluIiB0aGVuDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICJTcGluIikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMzApDQogICAgICAgIGVsc2VpZiBkZWZlbnNpdmV5YXcgPT0gImZhc3Qgc3BpbiIgdGhlbg0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiU3BpbiIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDExNykNCiAgICAgICAgZWxzZWlmIGRlZmVuc2l2ZXlhdyA9PSAic2lkZXdheXMiIHRoZW4NCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIHNtb290aEppdHRlcihtYXRoLnJhbmRvbSgtOTAsLTEwNyksIG1hdGgucmFuZG9tKDkwLDEwNyksIDEwKSkNCiAgICAgICAgZWxzZWlmIGRlZmVuc2l2ZXlhdyA9PSAiY3VzdG9tIiB0aGVuDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCBzbW9vdGhKaXR0ZXIoZGVmZW5zaXZlbGVmdCwgZGVmZW5zaXZlcmlnaHQsIDEwKSkNCiAgICAgICAgZW5kDQogICAgZWxzZSANCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIlNraXR0ZXIiKSB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAtMTgwKQ0KICAgICAgICBlbmQgDQoNCg0KICAgICAgICBlbmQNCiAgICAtLQ0KICAgICAgICAtLSBNQU5VQUwgQUENCiAgICAgICAgaWYgbWFudWFsX2RpciA9PSAyIHRoZW4NCiAgICAgICAgICAgIGNtZC5mb3JjZV9kZWZlbnNpdmUgPSAxDQogICAgICAgICAgICBpZiBub3QgaXNfZGVmZW5zaXZlIG9yIG5vdCB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuZmxpY2tvbm1hbnVscykgdGhlbiANCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk1pbmltYWwiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDkwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIk9mZnNldCIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT2ZmIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgMCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgICAgICBlbHNlIA0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIkN1c3RvbSIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIC05MCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIG1hbnVhbF9kaXIgPT0gMSB0aGVuDQogICAgICAgICAgICBjbWQuZm9yY2VfZGVmZW5zaXZlID0gMQ0KICAgICAgICAgICAgaWYgbm90IGlzX2RlZmVuc2l2ZSBvciBub3QgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmZsaWNrb25tYW51bHMpIHRoZW4gDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiTWluaW1hbCIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgLTkwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT2ZmIikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICAgICAgICAgICAgICBlbHNlIA0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIDApDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgOTApDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJPZmYiKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBtYW51YWxfZGlyID09IDMgdGhlbg0KICAgICAgICAgICAgY21kLmZvcmNlX2RlZmVuc2l2ZSA9IDENCiAgICAgICAgICAgIGlmIG5vdCBpc19kZWZlbnNpdmUgb3Igbm90IHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5mbGlja29ubWFudWxzKSB0aGVuIA0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk1pbmltYWwiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMl0sIDE4MCkNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJDdXN0b20iKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMl0sIDApDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzFdLCAiMTgwIikNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMCkNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIk9mZnNldCIpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIk9mZiIpDQogICAgICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1syXSwgMCkNCiAgICAgICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KLS0tDQogICAgY29uZHRvdGFrZSA9IGFudGlhaW1fdGFiW2FudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKV0NCiAgICBjb25kdG90YWtlZmxhZ3MgPSBhbnRpYWltX3RhYlthbnRpX2FpbXM6Z2V0X2Zha2VsYWdfY29uZCgpXQ0KICAgIGxvY2FsIHBpdGNoID0gdWkuZ2V0KGNvbmR0b3Rha2UucGl0Y2gpDQogICAgbG9jYWwgcGl0Y2hzbGlkZXIgPSB1aS5nZXQoY29uZHRvdGFrZS5waXRjaF9zbGlkZXIpIA0KICAgIGxvY2FsIGF0X3RhcmdldHMgPSB1aS5nZXQoY29uZHRvdGFrZS5hdF90YXJnZXRzKSANCiAgICBsb2NhbCB3YXlzID0gdWkuZ2V0KGNvbmR0b3Rha2Uud2F5cykgDQogICAgbG9jYWwgbGVmdF95YXcgPSB1aS5nZXQoY29uZHRvdGFrZS5sZWZ0X3lhdykgDQogICAgbG9jYWwgcmlnaHRfeWF3ID0gdWkuZ2V0KGNvbmR0b3Rha2UucmlnaHRfeWF3KSANCiAgICBsb2NhbCBtdWx0aXBsaWVyID0gdWkuZ2V0KGNvbmR0b3Rha2UubXVsdGlwbGllcikgDQogICAgbG9jYWwgcmFuZG9taXphdGlvbiA9IHVpLmdldChjb25kdG90YWtlLnJhbmRvbWl6YXRpb24pIA0KICAgIGxvY2FsIGxieSA9IHVpLmdldChjb25kdG90YWtlLmxieSkgDQogICAgbG9jYWwgbGJ5c2lkZSA9IHVpLmdldChjb25kdG90YWtlLmxieXNpZGUpICANCiAgICBsb2NhbCBsYnlzcGVlZCA9IHVpLmdldChjb25kdG90YWtlLmxieXNwZWVkKSANCiAgICBpZiBhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgfj0gImZha2VsYWciIHRoZW4NCiAgICAgZmFrZWxhZ21vZGUgPSB1aS5nZXQoY29uZHRvdGFrZS5mYWtlbGFnbW9kZSkgDQogICAgIGZha2VsYWdzbGlkZXIgPSB1aS5nZXQoY29uZHRvdGFrZS5mYWtlbGFnc2xpZGVyKSANCiAgICAgZGVmZW5zaXZlbW9kZSA9IHVpLmdldChjb25kdG90YWtlLmRlZmVuc2l2ZS5hYSkgDQogICAgIGRlZmVuc2l2ZXBpdGNoID0gdWkuZ2V0KGNvbmR0b3Rha2UuZGVmZW5zaXZlLnBpdGNoKSAgDQogICAgIGRlZmVuc2l2ZXNsaWRlciA9IHVpLmdldChjb25kdG90YWtlLmRlZmVuc2l2ZS5waXRjaF9zbGlkZXIpIA0KICAgICBkZWZlbnNpdmVhdHRhcmdldHMgPSB1aS5nZXQoY29uZHRvdGFrZS5kZWZlbnNpdmUuYXRfdGFyZ2V0cykgDQogICAgIGRlZmVuc2l2ZXlhdyA9IHVpLmdldChjb25kdG90YWtlLmRlZmVuc2l2ZS55YXcpIA0KICAgICBkZWZlbnNpdmVsZWZ0ID0gdWkuZ2V0KGNvbmR0b3Rha2UuZGVmZW5zaXZlLmxlZnRfeWF3KSANCiAgICAgZGVmZW5zaXZlcmlnaHQgPSB1aS5nZXQoY29uZHRvdGFrZS5kZWZlbnNpdmUucmlnaHRfeWF3KSANCiAgICBlbHNlDQogICAgICAgICBmYWtlbGFnbW9kZSA9IHVpLmdldChjb25kdG90YWtlZmxhZ3MuZmFrZWxhZ21vZGUpIA0KICAgICAgICAgZmFrZWxhZ3NsaWRlciA9IHVpLmdldChjb25kdG90YWtlZmxhZ3MuZmFrZWxhZ3NsaWRlcikgDQogICAgICAgICBkZWZlbnNpdmVtb2RlID0gdWkuZ2V0KGNvbmR0b3Rha2VmbGFncy5kZWZlbnNpdmUuYWEpIA0KICAgICAgICAgZGVmZW5zaXZlcGl0Y2ggPSB1aS5nZXQoY29uZHRvdGFrZWZsYWdzLmRlZmVuc2l2ZS5waXRjaCkgIA0KICAgICAgICAgZGVmZW5zaXZlc2xpZGVyID0gdWkuZ2V0KGNvbmR0b3Rha2VmbGFncy5kZWZlbnNpdmUucGl0Y2hfc2xpZGVyKSANCiAgICAgICAgIGRlZmVuc2l2ZWF0dGFyZ2V0cyA9IHVpLmdldChjb25kdG90YWtlZmxhZ3MuZGVmZW5zaXZlLmF0X3RhcmdldHMpIA0KICAgICAgICAgZGVmZW5zaXZleWF3ID0gdWkuZ2V0KGNvbmR0b3Rha2VmbGFncy5kZWZlbnNpdmUueWF3KSANCiAgICAgICAgIGRlZmVuc2l2ZWxlZnQgPSB1aS5nZXQoY29uZHRvdGFrZWZsYWdzLmRlZmVuc2l2ZS5sZWZ0X3lhdykgDQogICAgICAgICBkZWZlbnNpdmVyaWdodCA9IHVpLmdldChjb25kdG90YWtlZmxhZ3MuZGVmZW5zaXZlLnJpZ2h0X3lhdykgDQogICAgZW5kDQogICAgaWYgZXhwbG9pdGluZyBhbmQgdWkuZ2V0KHJhZ2Vib3RfdGFiLmN1c3RvbV9leHBsb2l0cykgdGhlbiANCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZha2VsYWdlbmFibGVkWzFdLCBmYWxzZSkNCiAgICBlbmQNCiAgICBoYW5kbGVfYWEocGl0Y2gsIHBpdGNoc2xpZGVyLCBhdF90YXJnZXRzLCB3YXlzLCBsZWZ0X3lhdywgcmlnaHRfeWF3LCBtdWx0aXBsaWVyLCByYW5kb21pemF0aW9uLCBsYnksIGxieXNpZGUsIGxieXNwZWVkLCBmYWtlbGFnbW9kZSwgZmFrZWxhZ3NsaWRlciwgZGVmZW5zaXZlbW9kZSwgZGVmZW5zaXZlcGl0Y2gsIGRlZmVuc2l2ZXNsaWRlciwgZGVmZW5zaXZlYXR0YXJnZXRzLCBkZWZlbnNpdmV5YXcsIGRlZmVuc2l2ZWxlZnQsIGRlZmVuc2l2ZXJpZ2h0KQ0KDQplbmQpDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInNldHVwX2NvbW1hbmQiLCBmdW5jdGlvbigpDQogICAgaWYgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLmF2b2lkX2JhY2tzdGFiKSBhbmQgYW50aWJhY2tzdGFiKCkgdGhlbg0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ucGl0Y2hbMV0sICJEb3duIikNCiAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiQXQgdGFyZ2V0cyIpDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAxODApDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCAwKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJTdGF0aWMiKQ0KICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgZW5kDQplbmQpDQoNCi0tIGJvbWJzaXRlIGUgZml4IA0KIGZ1bmN0aW9uIGRpc3RhbmNlM2QoeDEsIHkxLCB6MSwgeDIsIHkyLCB6MikNCglyZXR1cm4gbWF0aC5zcXJ0KCh4Mi14MSkqKHgyLXgxKSArICh5Mi15MSkqKHkyLXkxKSArICh6Mi16MSkqKHoyLXoxKSkNCmVuZA0KDQogZnVuY3Rpb24gZW50aXR5X2hhc19jNChlbnQpDQoJbG9jYWwgYm9tYiA9IGVudGl0eS5nZXRfYWxsKCJDQzQiKVsxXQ0KCXJldHVybiBib21iIH49IG5pbCBhbmQgZW50aXR5LmdldF9wcm9wKGJvbWIsICJtX2hPd25lckVudGl0eSIpID09IGVudA0KZW5kDQogY2xhc3NuYW1lcyA9IHsNCgkiQ1dvcmxkIiwNCgkiQ0NTUGxheWVyIiwNCgkiQ0Z1bmNCcnVzaCINCgl9DQogICAgdHJ5bm5hX3BsYW50ID0gZmFsc2UNCiAgICB1c2luZyA9IGZhbHNlDQotLSBMRUdJVCBBQSArIEJPTUJTSVRFIEUgRklYDQogICAgY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygic2V0dXBfY29tbWFuZCIsIGZ1bmN0aW9uKGNtZCkNCgkJbG9jYWwgcGxvY2FsID0gZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgICAgICBpZiBjbWQuaW5fdXNlID09IDEgdGhlbg0KICAgICAgICBpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIubGVnaXRhYSkgPT0gIm9mZiIgdGhlbg0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk9mZiIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd19iYXNlLCAiTG9jYWwgdmlldyIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMTgwKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMV0sICJPZmZzZXQiKQ0KICAgICAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzFdLCAiT2ZmIikNCiAgICAgICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIDApDQogICAgICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICAgICAgZWxzZWlmIHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5sZWdpdGFhKSA9PSAiMiB3YXkiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk9mZiIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMTgwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIkNlbnRlciIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzJdLCA5MCkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5ib2R5X3lhd1sxXSwgIkppdHRlciIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMl0sIC0xKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmZzX2JvZHlfeWF3LCBmYWxzZSkNCiAgICAgICAgZWxzZWlmIHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5sZWdpdGFhKSA9PSAiMyB3YXkiIHRoZW4NCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5waXRjaFsxXSwgIk9mZiIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3X2Jhc2UsICJMb2NhbCB2aWV3IikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdbMV0sICIxODAiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1syXSwgMTgwKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsxXSwgIlNraXR0ZXIiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmppdHRlclsyXSwgNzcpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJKaXR0ZXIiKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLmJvZHlfeWF3WzJdLCAtMSkNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5mc19ib2R5X3lhdywgZmFsc2UpDQogICAgICAgIGVsc2VpZiB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIubGVnaXRhYSkgPT0gInN0YXRpYyIgdGhlbg0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnBpdGNoWzFdLCAiT2ZmIikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS55YXdfYmFzZSwgIkxvY2FsIHZpZXciKQ0KICAgICAgICAgICAgdWkuc2V0KHJlZi5hbnRpYWltLnlhd1sxXSwgIjE4MCIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0ueWF3WzJdLCAxODApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uaml0dGVyWzFdLCAiT2Zmc2V0IikNCiAgICAgICAgICAgIHVpLnNldChyZWYuYW50aWFpbS5qaXR0ZXJbMl0sIDApDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uYm9keV95YXdbMV0sICJPcHBvc2l0ZSIpDQogICAgICAgICAgICB1aS5zZXQocmVmLmFudGlhaW0uZnNfYm9keV95YXcsIHRydWUpDQogICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kIA0KCQlpZiBub3QgcGxvY2FsIG9yIG5vdCBlbnRpdHkuaXNfYWxpdmUocGxvY2FsKSB0aGVuIHJldHVybiBlbmQNCgkJbG9jYWwgZGlzdGFuY2UgPSAxMDANCgkJbG9jYWwgYm9tYiA9IGVudGl0eS5nZXRfYWxsKCJDUGxhbnRlZEM0IilbMV0NCgkJbG9jYWwgYm9tYl94LCBib21iX3ksIGJvbWJfeiA9IGVudGl0eS5nZXRfcHJvcChib21iLCAibV92ZWNPcmlnaW4iKQ0KDQoJCWlmIGJvbWJfeCB+PSBuaWwgdGhlbg0KCQkJbG9jYWwgcGxheWVyX3gsIHBsYXllcl95LCBwbGF5ZXJfeiA9IGVudGl0eS5nZXRfcHJvcChwbG9jYWwsICJtX3ZlY09yaWdpbiIpDQoJCQlkaXN0YW5jZSA9IGRpc3RhbmNlM2QoYm9tYl94LCBib21iX3ksIGJvbWJfeiwgcGxheWVyX3gsIHBsYXllcl95LCBwbGF5ZXJfeikNCgkJZW5kDQoJCQ0KCQlsb2NhbCB0ZWFtX251bSA9IGVudGl0eS5nZXRfcHJvcChwbG9jYWwsICJtX2lUZWFtTnVtIikNCgkJbG9jYWwgZGVmdXNpbmcgPSB0ZWFtX251bSA9PSAzIGFuZCBkaXN0YW5jZSA8IDYyDQoNCgkJbG9jYWwgb25fYm9tYnNpdGUgPSBlbnRpdHkuZ2V0X3Byb3AocGxvY2FsLCAibV9iSW5Cb21iWm9uZSIpDQoNCgkJbG9jYWwgaGFzX2JvbWIgPSBlbnRpdHlfaGFzX2M0KHBsb2NhbCkNCgkJbG9jYWwgdHJ5bm5hX3BsYW50ID0gb25fYm9tYnNpdGUgfj0gMCBhbmQgdGVhbV9udW0gPT0gMiBhbmQgaGFzX2JvbWIgYW5kIG5vdCB1aS5nZXQoYW50aWFpbV90YWIub3RoZXIuYm9tYnNpdGVlZml4KQ0KCQkNCgkJbG9jYWwgcHgsIHB5LCBweiA9IGNsaWVudC5leWVfcG9zaXRpb24oKQ0KCQlsb2NhbCBwaXRjaCwgeWF3ID0gY2xpZW50LmNhbWVyYV9hbmdsZXMoKQ0KCQ0KCQlsb2NhbCBzaW5fcGl0Y2ggPSBtYXRoLnNpbihtYXRoLnJhZChwaXRjaCkpDQoJCWxvY2FsIGNvc19waXRjaCA9IG1hdGguY29zKG1hdGgucmFkKHBpdGNoKSkNCgkJbG9jYWwgc2luX3lhdyA9IG1hdGguc2luKG1hdGgucmFkKHlhdykpDQoJCWxvY2FsIGNvc195YXcgPSBtYXRoLmNvcyhtYXRoLnJhZCh5YXcpKQ0KDQoJCWxvY2FsIGRpcl92ZWMgPSB7IGNvc19waXRjaCAqIGNvc195YXcsIGNvc19waXRjaCAqIHNpbl95YXcsIC1zaW5fcGl0Y2ggfQ0KDQoJCWxvY2FsIGZyYWN0aW9uLCBlbnRpbmRleCA9IGNsaWVudC50cmFjZV9saW5lKHBsb2NhbCwgcHgsIHB5LCBweiwgcHggKyAoZGlyX3ZlY1sxXSAqIDgxOTIpLCBweSArIChkaXJfdmVjWzJdICogODE5MiksIHB6ICsgKGRpcl92ZWNbM10gKiA4MTkyKSkNCg0KCQlsb2NhbCB1c2luZyA9IHRydWUNCg0KCQlpZiBlbnRpbmRleCB+PSBuaWwgdGhlbg0KCQkJZm9yIGk9MCwgI2NsYXNzbmFtZXMgZG8NCgkJCQlpZiBlbnRpdHkuZ2V0X2NsYXNzbmFtZShlbnRpbmRleCkgPT0gY2xhc3NuYW1lc1tpXSB0aGVuDQoJCQkJCXVzaW5nID0gZmFsc2UNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCg0KCQlpZiBub3QgdXNpbmcgYW5kIG5vdCB0cnlubmFfcGxhbnQgYW5kIG5vdCBkZWZ1c2luZyB0aGVuDQoJCQljbWQuaW5fdXNlID0gMA0KCQllbmQNCmVuZCkNCg0KDQotLSBBTklNIEZVQ0tFUlMgQU5EIFNISVQNCmxvY2FsIGxlZ3NTYXZlZCA9IGZhbHNlDQpsb2NhbCBsZWdzVHlwZXMgPSB7WzFdID0gIk9mZiIsIFsyXSA9ICJBbHdheXMgc2xpZGUiLCBbM10gPSAiTmV2ZXIgc2xpZGUifQ0KbG9jYWwgZ3JvdW5kX3RpY2tzID0gMA0KbGVnTW92ZW1lbnQgPSB1aS5yZWZlcmVuY2UoIkFBIiwgIk90aGVyIiwgIkxlZyBtb3ZlbWVudCIpLA0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygicHJlX3JlbmRlciIsIGZ1bmN0aW9uKCkNCiAgICBpZiBub3QgZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSB0aGVuIHJldHVybiBlbmQNCiAgICBsb2NhbCBmbGFncyA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mRmxhZ3MiKQ0KICAgIGdyb3VuZF90aWNrcyA9IGJpdC5iYW5kKGZsYWdzLCAxKSA9PSAwIGFuZCAwIG9yIChncm91bmRfdGlja3MgPCA1IGFuZCBncm91bmRfdGlja3MgKyAxIG9yIGdyb3VuZF90aWNrcykNCiAgICANCg0KICAgIGlmIHVpLmdldCh2aXN1YWxzX3RhYi5zdGF0aWNsZWdzKSB0aGVuDQogICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAxLCA2KSANCiAgICBlbmQNCg0KICAgIGlmIHVpLmdldCh2aXN1YWxzX3RhYi5hbmltZml4KSA9PSAic2hha2UgcGxheWVyIG1vZGVsIiB0aGVuDQogICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCBtYXRoLnJhbmRvbSgwLCAxMCkvMTAsIDMpDQogICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCBtYXRoLnJhbmRvbSgwLCAxMCkvMTAsIDcpDQogICAgICAgIGVudGl0eS5zZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCBtYXRoLnJhbmRvbSgwLCAxMCkvMTAsIDYpDQogICAgZW5kDQoNCiAgICBpZiB1aS5nZXQodmlzdWFsc190YWIuYW5pbWZpeCkgPT0gIm5hc2F3YWxrIiB0aGVuDQogICAgICAgIGlmIG5vdCBsZWdzU2F2ZWQgdGhlbg0KICAgICAgICAgICAgbGVnc1NhdmVkID0gdWkuZ2V0KGxlZ01vdmVtZW50KQ0KICAgICAgICBlbmQNCiAgICAgICAgdWkuc2V0X3Zpc2libGUobGVnTW92ZW1lbnQsIGZhbHNlKQ0KICAgICAgICBpZiB1aS5nZXQodmlzdWFsc190YWIuYW5pbWZpeCkgPT0gIm5hc2F3YWxrIiB0aGVuDQogICAgICAgICAgICB1aS5zZXQobGVnTW92ZW1lbnQsIGxlZ3NUeXBlc1ttYXRoLnJhbmRvbSgxLCAzKV0pDQogICAgICAgICAgICBlbnRpdHkuc2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxQb3NlUGFyYW1ldGVyIiwgOSwgIDApDQogICAgICAgIGVuZA0KDQogICAgZWxzZWlmIChsZWdzU2F2ZWQgPT0gIk9mZiIgb3IgbGVnc1NhdmVkID09ICJBbHdheXMgc2xpZGUiIG9yIGxlZ3NTYXZlZCA9PSAiTmV2ZXIgc2xpZGUiKSB0aGVuDQogICAgICAgIHVpLnNldF92aXNpYmxlKGxlZ01vdmVtZW50LCB0cnVlKQ0KICAgICAgICB1aS5zZXQobGVnTW92ZW1lbnQsIGxlZ3NTYXZlZCkNCiAgICAgICAgbGVnc1NhdmVkID0gZmFsc2UNCiAgICBlbmQNCg0KICAgIGlmIHVpLmdldCh2aXN1YWxzX3RhYi5waXRjaHplcm8pIHRoZW4NCiAgICAgICAgZ3JvdW5kX3RpY2tzID0gYml0LmJhbmQoZmxhZ3MsIDEpID09IDEgYW5kIGdyb3VuZF90aWNrcyArIDEgb3IgMA0KDQogICAgICAgIGlmIGdyb3VuZF90aWNrcyA+IDIwIGFuZCBncm91bmRfdGlja3MgPCAxNTAgdGhlbg0KICAgICAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDAuNSwgMTIpDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLmFuaW1maXgpID09ICJtb29ud2FsayIgdGhlbg0KICAgICAgICBpZiBub3QgbGVnc1NhdmVkIHRoZW4NCiAgICAgICAgICAgIGxlZ3NTYXZlZCA9IHVpLmdldChsZWdNb3ZlbWVudCkNCiAgICAgICAgZW5kDQogICAgICAgIHVpLnNldF92aXNpYmxlKGxlZ01vdmVtZW50LCBmYWxzZSkNCiAgICAgICAgZW50aXR5LnNldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDAsIDcpDQogICAgICAgIGxvY2FsIG1lID0gZW50LmdldF9sb2NhbF9wbGF5ZXIoKQ0KICAgICAgICBsb2NhbCBmbGFncyA9IG1lOmdldF9wcm9wKCJtX2ZGbGFncyIpDQogICAgICAgIGxvY2FsIG9uZ3JvdW5kID0gYml0LmJhbmQoZmxhZ3MsIDEpIH49IDANCiAgICAgICAgaWYgbm90IG9uZ3JvdW5kIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG15X2FuaW1sYXllciA9IG1lOmdldF9hbmltX292ZXJsYXkoNikgLS0gTU9WRU1FTlRfTU9WRQ0KICAgICAgICAgICAgbXlfYW5pbWxheWVyLndlaWdodCA9IDENCiAgICAgICAgZW5kDQogICAgICAgIHVpLnNldChsZWdNb3ZlbWVudCwgIk9mZiIpDQogICAgZWxzZWlmIChsZWdzU2F2ZWQgPT0gIk9mZiIgb3IgbGVnc1NhdmVkID09ICJBbHdheXMgc2xpZGUiIG9yIGxlZ3NTYXZlZCA9PSAiTmV2ZXIgc2xpZGUiKSB0aGVuDQogICAgICAgIHVpLnNldF92aXNpYmxlKGxlZ01vdmVtZW50LCB0cnVlKQ0KICAgICAgICB1aS5zZXQobGVnTW92ZW1lbnQsIGxlZ3NTYXZlZCkNCiAgICAgICAgbGVnc1NhdmVkID0gZmFsc2UNCiAgICBlbmQNCg0KICAgIA0KZW5kKQ0KDQoNCi0tIExBQ09OSVNNIElORElDQVRPUlMNCmxvY2FsIGN1cnRpbWUgPSBnbG9iYWxzLmN1cnRpbWUNCmxvY2FsIHVuc2V0X2V2ZW50X2NhbGxiYWNrID0gY2xpZW50LnVuc2V0X2V2ZW50X2NhbGxiYWNrDQpsb2NhbCByZW5kZXJfY2lyY2xlX291dGxpbmUsIG1lYXN1cmVfdGV4dCwgcmVuZGVyX3RleHQgPSByZW5kZXJlci5jaXJjbGVfb3V0bGluZSwgcmVuZGVyZXIubWVhc3VyZV90ZXh0LCByZW5kZXJlci50ZXh0DQpsb2NhbCB0YWJsZV9pbnNlcnQgPSB0YWJsZS5pbnNlcnQNCmxvY2FsIHVpX2dldCA9IHVpLmdldA0KDQpsb2NhbCB4LCB5ID0gY2xpZW50LnNjcmVlbl9zaXplKCkNCg0KbG9jYWwgV2lkdGggPSA2DQpsb2NhbCBIZWlnaHQgPSAoeSAvIDIpICsgeSAvMTINCmZ1bmN0aW9uIGxlcnAoYSwgYiwgdCkNCiAgICBpZiBub3QgYiBvciBub3QgYSBvciBub3QgdCB0aGVuIHJldHVybiBlbmQNCiAgICByZXR1cm4gYSArIChiIC0gYSkgKiB0DQplbmQNCmxvY2FsIGluZGljYXRvcnMgPSB7fQ0KDQpsb2NhbCBUSU1FX1RPX1BMQU5UX0JPTUIgPSAzDQpsb2NhbCB0aW1lQXRCb21iV2lsbEJlUGxhbnRlZA0KDQpsb2NhbCBmdW5jdGlvbiBpbm5lckNpcmNsZU91dGxpbmVQZXJjZW50YWdlKCkNCglsb2NhbCB0aW1lRWxhcHNlZCA9IChjdXJ0aW1lKCkgKyBUSU1FX1RPX1BMQU5UX0JPTUIpIC0gdGltZUF0Qm9tYldpbGxCZVBsYW50ZWQNCglsb2NhbCB0aW1lRWxhcHNlZEluUGVyYyA9ICh0aW1lRWxhcHNlZCAvIFRJTUVfVE9fUExBTlRfQk9NQiAqIDEwMCkgKyAwLjUNCglyZXR1cm4gdGltZUVsYXBzZWRJblBlcmMgKiAwLjAxDQplbmQNCg0KLS0gR2FwIGJldHdlZW4gaW5kaWNhdG9ycyB0ZXh0DQpsb2NhbCBpbmRpY2F0b3JUZXh0R2FwID0gMzYNCg0KLS0gT3V0ZXIgY2lyY2xlDQpsb2NhbCBvX2NpcmNsZVJhZGl1cyA9IDYNCmxvY2FsIG9fY3JpY2xlVGhpY2tuZXNzID0gb19jaXJjbGVSYWRpdXMvMg0KDQotLSBJbm5lciBjaXJjbGUNCmxvY2FsIGlfY2lyY2xlUmFkaXVzID0gb19jaXJjbGVSYWRpdXMtMQ0KbG9jYWwgaV9jcmljbGVUaGlja25lc3MgPSAob19jaXJjbGVSYWRpdXMtMSkvMw0KZHRjaXJjbGUgPSAwDQotLSBNYWluDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdwYWludCcsIGZ1bmN0aW9uICgpDQogICAgaWYgc2FmZWhlYWR0YXJnZXQoKSBhbmQgdWkuZ2V0KGFudGlhaW1fdGFiLm90aGVyLnNhZmVfaGVhZCkgYW5kIChhbnRpX2FpbXM6Z2V0X2NvbmRpdGlvbl90eXBlKCkgPT0gImFpcmNyb3VjaGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJjcm91Y2hpbmciIG9yIGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKSA9PSAiY3JvdWNocnVubmluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJzdGFuZGluZyIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJmYWtlbGFnIikgdGhlbg0KICAgIHJlbmRlcmVyLmluZGljYXRvcigyNTUsIDI1NSwgMjU1LCAyMDAsICJTQUZFSEVBRCIpIGVuZA0KICAgIGlmIHVpLmdldChhbnRpYWltX3RhYi5vdGhlci5hdm9pZF9iYWNrc3RhYikgYW5kIGFudGliYWNrc3RhYigpIHRoZW4NCiAgICAgICAgcmVuZGVyZXIuaW5kaWNhdG9yKDI1NSwgMjU1LCAyNTUsIDIwMCwgIkFOVEkgQkFDS1NUQUIiKSBlbmQNCiAgICBpZiBub3QgdWkuZ2V0KHZpc3VhbHNfdGFiLmluZGljYXRvcnMpIHRoZW4NCiAgICAgICAgcmV0dXJuIGVuZA0KCWZvciBpPTEsICNpbmRpY2F0b3JzIGRvDQoJCWxvY2FsIGluZGljYXRvciA9IGluZGljYXRvcnNbaV0NCg0KCQlsb2NhbCB0ZXh0ID0gaW5kaWNhdG9yLnRleHQNCgkJbG9jYWwgciwgZywgYiwgYSA9IGluZGljYXRvci5yLCBpbmRpY2F0b3IuZywgaW5kaWNhdG9yLmIsIGluZGljYXRvci5hDQoNCgkJbG9jYWwgdGV4dEggPSBIZWlnaHQgKyAoaSotaW5kaWNhdG9yVGV4dEdhcCkgKyAoI2luZGljYXRvcnMqaW5kaWNhdG9yVGV4dEdhcCkNCiAgICAgICAgbV90ZXh0VywgbV90ZXh0SCA9IG1lYXN1cmVfdGV4dCgnK2InLCB0ZXh0KQ0KICAgICAgICByZW5kZXJlci5ncmFkaWVudChXaWR0aCwgdGV4dEgsIG1fdGV4dFcgKyA1MCwgbV90ZXh0SCArIDQsIDAsIDAsIDAsIDI1NSwgMCwgMCwgMCwgMCx0cnVlKQ0KICAgICAgICByZW5kZXJlci5ibHVyKFdpZHRoLCB0ZXh0SCwgbV90ZXh0VyArIDUwLCBtX3RleHRIICsgNCkNCiAgICAgICAgcmVuZGVyZXIucmVjdGFuZ2xlKFdpZHRoLCB0ZXh0SCwgMywgbV90ZXh0SCArIDQsIHIsIGcsIGIsIGEpDQoJCXJlbmRlcl90ZXh0KFdpZHRoICsgMTAsIHRleHRIICsgMiwgciwgZywgYiwgYSwgJytiJywgMCwgdGV4dCkNCiAgICAgICAgaWYgaW5kaWNhdG9yLnIgPT0gMjU1IGFuZCBpbmRpY2F0b3IuZyA9PSAwIGFuZCBpbmRpY2F0b3IuYiA9PSA1MCBhbmQgdGV4dDpmaW5kKCJEVCIpIHRoZW4NCgkJCWR0Y2lyY2xlID0gbGVycChkdGNpcmNsZSwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCQkJZWxzZWlmIHRleHQ6ZmluZCgiRFQiKSB0aGVuDQogICAgICAgICAgICBkdGNpcmNsZSA9IGxlcnAoZHRjaXJjbGUsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgkJCWVuZAkJCQ0KICAgICAgICAtLSBpZiB0ZXh0OmZpbmQoIkRUIikgdGhlbg0KICAgICAgICAtLSAgICAgcmVuZGVyZXIuY2lyY2xlX291dGxpbmUoV2lkdGggKyAyMiArIG1fdGV4dFcsIHRleHRIICsgKG1fdGV4dEggKyA0KSAvIDIgKyAyLCAwLCAwLCAwLCAyMDAsIDgsIDAsIDEuMCwgOCAvIDMpDQogICAgICAgIC0tICAgICByZW5kZXJlci5jaXJjbGVfb3V0bGluZShXaWR0aCArIDIyICsgbV90ZXh0VywgdGV4dEggKyAobV90ZXh0SCArIDQpIC8gMiArIDIsIHIsIGcsIGIsIGEsIDgsIDAsIGR0Y2lyY2xlLCA4IC8gMykNCiAgICAgICAgLS0gZW5kICAgICAgICANCgkJaWYgaXNCb21iQmVpbmdQbGFudGVkIGFuZCB0ZXh0OmZpbmQoJ0JvbWJzaXRlJykgdGhlbg0KCQkJbG9jYWwgbV90ZXh0VywgbV90ZXh0SCA9IG1lYXN1cmVfdGV4dCgnK2InLCB0ZXh0KQ0KDQoJCQlsb2NhbCBjcmljbGVXID0gV2lkdGgrbV90ZXh0VytvX2NpcmNsZVJhZGl1cys0DQoJCQlsb2NhbCBjcmljbGVIID0gdGV4dEgrKG1fdGV4dEgvMS43MSkNCg0KCQkJcmVuZGVyX2NpcmNsZV9vdXRsaW5lKGNyaWNsZVcsIGNyaWNsZUgsIDAsIDAsIDAsIDIwMCwgb19jaXJjbGVSYWRpdXMsIDAsIDEuMCwgb19jcmljbGVUaGlja25lc3MpDQoJCQlyZW5kZXJfY2lyY2xlX291dGxpbmUoY3JpY2xlVywgY3JpY2xlSCwgMjU1LCAyNTUsIDI1NSwgMjAwLCBpX2NpcmNsZVJhZGl1cywgMCwgaW5uZXJDaXJjbGVPdXRsaW5lUGVyY2VudGFnZSgpLCBpX2NyaWNsZVRoaWNrbmVzcykNCgkJZW5kDQoJZW5kDQoNCgktLSBSZXNldCBpbmRpY2F0b3IgdGFibGUNCglpbmRpY2F0b3JzID0ge30NCmVuZCkNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygnYm9tYl9iZWdpbnBsYW50JywgZnVuY3Rpb24gKCkNCgl0aW1lQXRCb21iV2lsbEJlUGxhbnRlZCA9IGN1cnRpbWUoKSArIFRJTUVfVE9fUExBTlRfQk9NQg0KCWlzQm9tYkJlaW5nUGxhbnRlZCA9IHRydWUNCmVuZCkNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygnYm9tYl9hYm9ydHBsYW50JywgZnVuY3Rpb24gKCkNCglpc0JvbWJCZWluZ1BsYW50ZWQgPSBmYWxzZQ0KZW5kKQ0KDQpjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdib21iX3BsYW50ZWQnLCBmdW5jdGlvbiAoKQ0KCWlzQm9tYkJlaW5nUGxhbnRlZCA9IGZhbHNlDQplbmQpDQoNCi0tDQpsb2NhbCBmdW5jdGlvbiBJbmRpY2F0b3JDYWxsYmFjayhpbmRpY2F0b3IpDQogICAgaWYgbm90IHVpLmdldCh2aXN1YWxzX3RhYi5pbmRpY2F0b3JzKSB0aGVuDQogICAgICAgIHJldHVybiBlbmQNCgl0YWJsZV9pbnNlcnQoaW5kaWNhdG9ycywgaW5kaWNhdG9yKQ0KZW5kDQoNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjaygnc2h1dGRvd24nLCBmdW5jdGlvbiAoKQ0KCXVuc2V0X2V2ZW50X2NhbGxiYWNrKCdpbmRpY2F0b3InLCBJbmRpY2F0b3JDYWxsYmFjaykNCmVuZCkNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soJ3BhaW50JywgZnVuY3Rpb24gKCkNCiAgICBpZiBub3QgdWkuZ2V0KHZpc3VhbHNfdGFiLmluZGljYXRvcnMpIHRoZW4NCgl1bnNldF9ldmVudF9jYWxsYmFjaygnaW5kaWNhdG9yJywgSW5kaWNhdG9yQ2FsbGJhY2spDQogICAgZWxzZQ0KICAgICAgICBjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrKCdpbmRpY2F0b3InLCBJbmRpY2F0b3JDYWxsYmFjaykNCiBlbmQNCmVuZCkNCi0tIEVWRU5UIExPR1MNCi0tIGxvY2FsIHZhcmlhYmxlcyBmb3IgQVBJIGZ1bmN0aW9ucy4gYW55IGNoYW5nZXMgdG8gdGhlIGxpbmUgYmVsb3cgd2lsbCBiZSBsb3N0IG9uIHJlLWdlbmVyYXRpb24NCmxvY2FsIGdsb2JhbHNfY3VydGltZSwgcmVxdWlyZSwgaXBhaXJzLCBtYXRoX2FicywgdGFibGVfaW5zZXJ0LCB0YWJsZV9yZW1vdmUsIHVpX2dldCwgdWlfbmV3X2NoZWNrYm94LCB1aV9yZWZlcmVuY2UsIHVpX3NldCwgdWlfc2V0X2NhbGxiYWNrLCB1aV9zZXRfZW5hYmxlZCwgZGVmZXIgPSBnbG9iYWxzLmN1cnRpbWUsIHJlcXVpcmUsIGlwYWlycywgbWF0aC5hYnMsIHRhYmxlLmluc2VydCwgdGFibGUucmVtb3ZlLCB1aS5nZXQsIHVpLm5ld19jaGVja2JveCwgdWkucmVmZXJlbmNlLCB1aS5zZXQsIHVpLnNldF9jYWxsYmFjaywgdWkuc2V0X2VuYWJsZWQsIGRlZmVyDQoNCg0KbG9jYWwgY3VzdG9tX2xvZ3MgPSB7fSBkbw0KICAgIGxvY2FsIGxvZ3MgPSB7fQ0KICAgIGZ1bmN0aW9uIGN1c3RvbV9sb2dzLmNvdW50X2xpbmVzKCkNCiAgICAgICAgbG9jYWwgY291bnQgPSAwDQogICAgICAgIGZvciBfLCBsb2cgaW4gaXBhaXJzKGxvZ3MpIGRvDQogICAgICAgICAgICBpZiBsb2cubmV3bGluZSB0aGVuIGNvdW50ID0gY291bnQgKyAxIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIGNvdW50DQogICAgZW5kDQogICAgDQogICAgZnVuY3Rpb24gY3VzdG9tX2xvZ3MucmVtb3ZlX2xpbmUoKQ0KICAgICAgICB3aGlsZSB0cnVlIGRvDQogICAgICAgICAgICBsb2NhbCBsb2cgPSB0YWJsZV9yZW1vdmUobG9ncywgMSkNCiAgICAgICAgICAgIGlmIGxvZy5uZXdsaW5lIHRoZW4NCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgZnVuY3Rpb24gY3VzdG9tX2xvZ3Mub3V0cHV0KGUpDQogICAgICAgIGxvY2FsIGN1cl9sb2cgPSB7IHRleHQgPSBlLnRleHQsIHIgPSBlLnIsIGcgPSBlLmcsIGIgPSBlLmIsIGEgPSBlLmEsIHRpbWUgPSBnbG9iYWxzX2N1cnRpbWUoKSwgbmV3bGluZSA9IChlLnRleHQ6c3ViKC0xKSB+PSAiXDAiKSB9DQogICAgICAgIHRhYmxlX2luc2VydChsb2dzLCBjdXJfbG9nKQ0KICAgIA0KICAgICAgICBpZiBjdXN0b21fbG9ncy5jb3VudF9saW5lcygpID4gNiB0aGVuDQogICAgICAgICAgICBjdXN0b21fbG9ncy5yZW1vdmVfbGluZSgpDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgZnVuY3Rpb24gY3VzdG9tX2xvZ3MucGFpbnQoKQ0KICAgICAgICBpZiBub3QgdWkuZ2V0KHZpc3VhbHNfdGFiLmV2ZW50bG9ncykgdGhlbiByZXR1cm4gZW5kDQogICAgICAgIGxvY2FsIHNjcmVlbl94LCBzY3JlZW5feSA9IGNsaWVudC5zY3JlZW5fc2l6ZSgpDQogICAgICAgIGxvY2FsIHggPSA4DQogICAgICAgIGxvY2FsIHkgPSBzY3JlZW5feSAvIDIgLSBzY3JlZW5feSAvIDE0LjQNCiAgICAgICAgbG9jYWwgaSA9IDENCiAgICANCiAgICAgICAgd2hpbGUgaSA8PSAjbG9ncyBkbw0KICAgICAgICAgICAgbG9jYWwgbG9nID0gbG9nc1tpXQ0KICAgICAgICAgICAgbG9jYWwgdGV4dF93aWR0aCwgdGV4dF9oZWlnaHQgPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIiIsbG9nLnRleHQpDQogICAgICAgICAgICByZW5kZXJlci5yZWN0YW5nbGUoeCAtIDIsIHksIDIsIHRleHRfaGVpZ2h0ICsgNCwgMjU1LCAyNTUsIDI1NSwgMjAwKQ0KICAgICAgICAgICAgcmVuZGVyZXIuZ3JhZGllbnQoeCwgeSwgdGV4dF93aWR0aCArIDUwLCB0ZXh0X2hlaWdodCArIDQsIDAsIDAsIDAsIDI1NSwgMCwgMCwgMCwgMCx0cnVlKQ0KICAgICAgICAgICAgcmVuZGVyZXIuYmx1cih4LCB5LCB0ZXh0X3dpZHRoICsgNTAsIHRleHRfaGVpZ2h0ICsgNCkNCiAgICAgICAgICAgIHJlbmRlcmVyLnRleHQoeCArIDUsIHkgKyAxLCBsb2cuciwgbG9nLmcsIGxvZy5iLCBsb2cuYSwgJycsIDAsIGxvZy50ZXh0KQ0KICAgIA0KICAgICAgICAgICAgaWYgbG9nLm5ld2xpbmUgdGhlbg0KICAgICAgICAgICAgICAgIHkgPSB5ICsgdGV4dF9oZWlnaHQgKyA4DQogICAgICAgICAgICAgICAgeCA9IDgNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB4ID0geCArIHRleHRfd2lkdGgNCiAgICAgICAgICAgIGVuZA0KICAgIA0KICAgICAgICAgICAgaWYgbWF0aF9hYnMoZ2xvYmFsc19jdXJ0aW1lKCkgLSBsb2cudGltZSkgPiA4IHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZV9yZW1vdmUobG9ncywgaSkNCiAgICAgICAgICAgICAgICB5ID0geSAtIHRleHRfaGVpZ2h0DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgaSA9IGkgKyAxDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KbG9jYWwgZHJhd19vdXRwdXQgPSB1aV9yZWZlcmVuY2UoIk1pc2MiLCAiTWlzY2VsbGFuZW91cyIsICJEcmF3IGNvbnNvbGUgb3V0cHV0IikNCnVpX3NldF9jYWxsYmFjayh1aV9yZWZlcmVuY2UoIkFBIiwgIkFudGktYWltYm90IGFuZ2xlcyIsICJldmVudCBsb2dzIiksIGZ1bmN0aW9uIChzZWxmKQ0KICAgIGxvY2FsIGVuYWJsZWQgPSB1aV9nZXQoc2VsZikNCiAgICBsb2NhbCB1cGRhdGVfY2FsbGJhY2sgPSBlbmFibGVkIGFuZCBjbGllbnQuc2V0X2V2ZW50X2NhbGxiYWNrIG9yIGNsaWVudC51bnNldF9ldmVudF9jYWxsYmFjaw0KDQogICAgdXBkYXRlX2NhbGxiYWNrKCJvdXRwdXQiLCBjdXN0b21fbG9ncy5vdXRwdXQpDQogICAgdXBkYXRlX2NhbGxiYWNrKCJwYWludCIsIGN1c3RvbV9sb2dzLnBhaW50KQ0KICAgIA0KICAgIHVpX3NldChkcmF3X291dHB1dCwgbm90IGVuYWJsZWQpDQogICAgdWlfc2V0X2VuYWJsZWQoZHJhd19vdXRwdXQsIG5vdCBlbmFibGVkKQ0KZW5kKQ0KDQpkZWZlcihmdW5jdGlvbiAoKQ0KICAgIHVpX3NldChkcmF3X291dHB1dCwgdHJ1ZSkNCiAgICB1aV9zZXRfZW5hYmxlZChkcmF3X291dHB1dCwgdHJ1ZSkNCmVuZCkNCg0KbG9jYWwgbG9nID0gY2xpZW50LmxvZw0KDQpsb2NhbCBoaXRncm91cF9uYW1lcyA9IHsNCiAgICAiZ2VuZXJpYyIsDQogICAgImhlYWQiLA0KICAgICJjaGVzdCIsDQogICAgInN0b21hY2giLA0KICAgICJsZWZ0IGFybSIsDQogICAgInJpZ2h0IGFybSIsDQogICAgImxlZnQgbGVnIiwNCiAgICAicmlnaHQgbGVnIiwNCiAgICAibmVjayIsDQogICAgIj8iLA0KICAgICJnZWFyIg0KfQ0KZHRfYWN0aXZlID0gZmFsc2UNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soImFpbV9maXJlIiwgZnVuY3Rpb24oZSkNCiAgICBpZiBub3QgdWkuZ2V0KHZpc3VhbHNfdGFiLmV2ZW50bG9ncykgdGhlbiByZXR1cm4gZW5kDQogICAgc3RvcmVkX3Nob3QgPSB7DQogICAgZGFtYWdlID0gZS5kYW1hZ2UsDQogICAgaGl0Ym94ID0gaGl0Z3JvdXBfbmFtZXNbZS5oaXRncm91cCArIDFdLA0KICAgIGxhZ2NvbXAgPSBlLnRlbGVwb3J0ZWQsDQogICAgYmFja3RyYWNrID0gZ2xvYmFscy50aWNrY291bnQoKSAtIGUudGljaw0KfQ0KZW5kKQ0KbG9jYWwgZnVuY3Rpb24gb25fYWltX21pc3NlZCggZXZlbnQgKQ0KICAgIGlmIG5vdCB1aS5nZXQodmlzdWFsc190YWIuZXZlbnRsb2dzKSB0aGVuIHJldHVybiBlbmQNCiAgICBvdXRwdXQgPSBzdHJpbmcuZm9ybWF0KCJtaXNzZWQgJXMgaW4gdGhlICVzIGZvciAlcyAoJXMgaGVhbHRoIHJlbWFpbmluZykgZHVlIHRvICVzIHwgYnQ9ICVzIHwgaGM9ICVzIixlbnRpdHkuZ2V0X3BsYXllcl9uYW1lKCBldmVudC50YXJnZXQgKSwgc3RvcmVkX3Nob3QuaGl0Ym94LCBzdG9yZWRfc2hvdC5kYW1hZ2UsIGVudGl0eS5nZXRfcHJvcCggZXZlbnQudGFyZ2V0LCAnbV9pSGVhbHRoJyksZXZlbnQucmVhc29uLCBzdG9yZWRfc2hvdC5iYWNrdHJhY2ssIGV2ZW50LmhpdF9jaGFuY2UpDQogICAgICBsb2cob3V0cHV0KQ0KZW5kDQoNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soICJhaW1fbWlzcyIsIG9uX2FpbV9taXNzZWQgKQ0KDQpsb2NhbCBmdW5jdGlvbiBvbl9haW1faGl0KCBldmVudCApDQogICAgaWYgbm90IHVpLmdldCh2aXN1YWxzX3RhYi5ldmVudGxvZ3MpIHRoZW4gcmV0dXJuIGVuZA0KICAgIG91dHB1dCA9IHN0cmluZy5mb3JtYXQoImhpdCAlcyBpbiB0aGUgJXMgKCVzKSBmb3IgJXMgKCVzKSAoJXMgaGVhbHRoIHJlbWFpbmluZykgfCBidD0gJXMgfCBoYz0gJXMiLGVudGl0eS5nZXRfcGxheWVyX25hbWUoIGV2ZW50LnRhcmdldCApLCBoaXRncm91cF9uYW1lc1sgZXZlbnQuaGl0Z3JvdXAgKyAxIF0sIHN0b3JlZF9zaG90LmhpdGJveCwgZXZlbnQuZGFtYWdlLCBzdG9yZWRfc2hvdC5kYW1hZ2UsIGVudGl0eS5nZXRfcHJvcCggZXZlbnQudGFyZ2V0LCAnbV9pSGVhbHRoJyksc3RvcmVkX3Nob3QuYmFja3RyYWNrLCBldmVudC5oaXRfY2hhbmNlKQ0KICAgIC0tb3V0cHV0ID0gJ2hpdCAnIC4uIGVudGl0eS5nZXRfcGxheWVyX25hbWUoIGV2ZW50LnRhcmdldCApIC4uICcgZm9yICcgLi4gZXZlbnQuZGFtYWdlIC4uICcgKCcuLiBzdG9yZWRfc2hvdC5kYW1hZ2UgLi4nKSAnIC4uIGVudGl0eQ0KICAgIGxvZyhvdXRwdXQpDQplbmQNCg0KY2xpZW50LnNldF9ldmVudF9jYWxsYmFjayggImFpbV9oaXQiLCBvbl9haW1faGl0ICkNCi0tIA0KbG9jYWwgYW5pbWF0ZWQgPQ0Kew0KZGVzeW5jc2l6ZSA9IDAsDQpuZXdzd2F5ID0gMCwNCmR0YWxwaGEgPSA3NSwNCmhzYWxwaGEgPSA3NSwNCmZzYWxwaGEgPSA3NSwNCmRtZ2FscGhhID0gNzUsIA0KbGNiYXIgPSAwLA0KYWRkaWN0aW9uID0gMCwNCmJhcmFscGhhID0gMSwNCnNjb3BlZGFscGhhID0gMSwNCnNjb3BlZGFsaWduID0gMCwNCmFycm93X2xlZnQgPSAwLA0KYXJyb3dfcmlnaHQgPSAwLA0KZm9yYXJyb3dzID0gMCwNCmluYWN0aXZlX2ZyYWN0aW9uID0gMCwNCmFjdGl2ZV9mcmFjdGlvbiA9IDAsIA0KZnJhY3Rpb24gPSAwLA0KaGlkZV9mcmFjdGlvbiA9IDAsDQpzY29wZWRfZnJhY3Rpb24gPSAwLA0KfQ0KY3R4X2NsYW1wID0gZnVuY3Rpb24odmFsLCBsb3dlciwgdXBwZXIpDQogICAgYXNzZXJ0KHZhbCBhbmQgbG93ZXIgYW5kIHVwcGVyLCAibm90IHZlcnkgdXNlZnVsIGVycm9yIG1lc3NhZ2UgaGVyZSIpDQogICAgaWYgbG93ZXIgPiB1cHBlciB0aGVuIGxvd2VyLCB1cHBlciA9IHVwcGVyLCBsb3dlciBlbmQgLS0gc3dhcCBpZiBib3VuZGFyaWVzIHN1cHBsaWVkIHRoZSB3cm9uZyB3YXkNCiAgICByZXR1cm4gbWF0aC5tYXgobG93ZXIsIG1hdGgubWluKHVwcGVyLCB2YWwpKQ0KZW5kDQplYXNlSW5PdXQgPSBmdW5jdGlvbih0KQ0KICAgIHJldHVybiAodCA+IDAuNSkgYW5kIDQqKCh0LTEpXjMpKzEgb3IgNCp0XjM7DQplbmQNCmZ1bmN0aW9uIHJvdW5kKG51bWJlcikNCiAgICByZXR1cm4gbWF0aC5mbG9vcihudW1iZXIgKyAwLjUpDQogIGVuZA0KLS0gQ0VOVEVSIElORElDQVRPUlMNCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInBhaW50IiwgZnVuY3Rpb24oKQ0KICAgIGxvY2FsIHBsYXllciA9IGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCkNCiAgICBpZiBub3QgcGxheWVyIG9yIG5vdCBlbnRpdHkuaXNfYWxpdmUocGxheWVyKSB0aGVuIHJldHVybiBlbmQNCiAgICBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBjdmV0NCA9IHVpLmdldCh2aXN1YWxzX3RhYi5hY2NlbnQpDQpsb2NhbCBzY3JfeCwgc2NyX3kgPSBjbGllbnQuc2NyZWVuX3NpemUoKQ0KcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSByZW5kZXJlci5tZWFzdXJlX3RleHQoImIiLCJRdWFsaXR5IGlzIG5ldmVyIGFuIGFjY2lkZW50LiBJdCBpcyBhbHdheXMgdGhlIHJlc3VsdCBvZiBpbnRlbGxlZ2VudCBlZmZvcnQiKSAvIDIsIHNjcl95IC0gMTUsIDI1NSwgMjU1LCAyNTUsIDUwLCAiYiIsIG5pbCwgYW5pbWF0ZV90ZXh0KGdsb2JhbHMuY3VydGltZSgpICogMS4yLCAiUXVhbGl0eSBpcyBuZXZlciBhbiBhY2NpZGVudC4gSXQgaXMgYWx3YXlzIHRoZSByZXN1bHQgb2YgaW50ZWxsZWdlbnQgZWZmb3J0IiwgMCwgMCwgMCwgMjU1LCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCAyNTUpKSANCmxvY2FsIHNjciA9IHsgY2xpZW50LnNjcmVlbl9zaXplKCkgfQ0KbG9jYWwgc2NwZCA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9iSXNTY29wZWQiKQ0KbG9jYWwgbWUgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpDQppZiBub3QgbWUgb3Igbm90IGVudGl0eS5pc19hbGl2ZShtZSkgdGhlbiByZXR1cm4gZW5kDQotLSBBcnJvd3MNCmlmIHVpLmdldCh2aXN1YWxzX3RhYi5hcnJvd3MpIH49ICJPZmYiIHRoZW4NCglpZiBzY3BkIH49IDAgdGhlbiBhbmltYXRlZC5mb3JhcnJvd3MgPSBsZXJwKGFuaW1hdGVkLmZvcmFycm93cywgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KSBlbHNlIGFuaW1hdGVkLmZvcmFycm93cyA9IGxlcnAoYW5pbWF0ZWQuZm9yYXJyb3dzLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpIGVuZA0KCWlmIHVpLmdldCh2aXN1YWxzX3RhYi5hcnJvd3MpID09ICJNYW51YWwiIHRoZW4NCglpZiBtYW51YWxfZGlyID09IDIgdGhlbg0KCWFuaW1hdGVkLmFycm93X3JpZ2h0ID0gbGVycChhbmltYXRlZC5hcnJvd19yaWdodCwgMjU1LCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZWxzZQ0KCWFuaW1hdGVkLmFycm93X3JpZ2h0ID0gbGVycChhbmltYXRlZC5hcnJvd19yaWdodCwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCWVuZA0KCWlmIG1hbnVhbF9kaXIgPT0gMSB0aGVuDQoJYW5pbWF0ZWQuYXJyb3dfbGVmdCA9IGxlcnAoYW5pbWF0ZWQuYXJyb3dfbGVmdCwgMjU1LCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZWxzZQ0KCWFuaW1hdGVkLmFycm93X2xlZnQgPSBsZXJwKGFuaW1hdGVkLmFycm93X2xlZnQsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbmQNCg0KDQoJcmVuZGVyZXIudGV4dChzY3JbMV0gLyAyIC0gODUgLCBzY3JbMl0gLyAyLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBhbmltYXRlZC5hcnJvd19sZWZ0LCAiK2NiIiwgbmlsLCAi4q6YIikgDQoJcmVuZGVyZXIudGV4dChzY3JbMV0gLyAyICsgODUgLCBzY3JbMl0gLyAyLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBhbmltYXRlZC5hcnJvd19yaWdodCwgIitjYiIsIG5pbCwgIuKumiIpIA0KCWVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIuYXJyb3dzKSA9PSAiVFM0IiB0aGVuDQoJeCA9IHNjclsxXQ0KCXkgPSBzY3JbMl0NCgkJbG9jYWwgYm9keXlhdyA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpLCAibV9mbFBvc2VQYXJhbWV0ZXIiLCAxMSkgKiAxMjAgLSA2MA0KCQlyZW5kZXJlci50cmlhbmdsZSh4IC8gMiArIDU1LCB5IC8gMiArIDIsIHggLyAyICsgNDIsIHkgLyAyIC0gNywgeCAvIDIgKyA0MiwgeSAvIDIgKyAxMSwgDQoJCW1hbnVhbF9kaXIgPT0gMiBhbmQgY3ZldDEgb3IgMjUsIA0KCQltYW51YWxfZGlyID09IDIgYW5kIGN2ZXQyIG9yIDI1LCANCgkJbWFudWFsX2RpciA9PSAyIGFuZCBjdmV0MyBvciAyNSwgDQoJCW1hbnVhbF9kaXIgPT0gMiBhbmQgMjU1ICogYW5pbWF0ZWQuZm9yYXJyb3dzIG9yIDE2MCAqIGFuaW1hdGVkLmZvcmFycm93cykNCg0KCQlyZW5kZXJlci50cmlhbmdsZSh4IC8gMiAtIDU1LCB5IC8gMiArIDIsIHggLyAyIC0gNDIsIHkgLyAyIC0gNywgeCAvIDIgLSA0MiwgeSAvIDIgKyAxMSwgDQoJCW1hbnVhbF9kaXIgPT0gMSBhbmQgY3ZldDEgb3IgMjUsIA0KCQltYW51YWxfZGlyID09IDEgYW5kIGN2ZXQyIG9yIDI1LCANCgkJbWFudWFsX2RpciA9PSAxIGFuZCBjdmV0MyBvciAyNSwgDQoJCW1hbnVhbF9kaXIgPT0gMSBhbmQgMjU1ICogYW5pbWF0ZWQuZm9yYXJyb3dzIG9yIDE2MCAqIGFuaW1hdGVkLmZvcmFycm93cykNCgkNCgkJcmVuZGVyZXIucmVjdGFuZ2xlKHggLyAyICsgMzgsIHkgLyAyIC0gNywgMiwgMTgsIA0KCQlib2R5eWF3IDwgLTEwIGFuZCBjdmV0MSBvciAyNSwNCgkJYm9keXlhdyA8IC0xMCBhbmQgY3ZldDIgb3IgMjUsDQoJCWJvZHl5YXcgPCAtMTAgYW5kIGN2ZXQzIG9yIDI1LA0KCQlib2R5eWF3IDwgLTEwIGFuZCAyNTUgKiBhbmltYXRlZC5mb3JhcnJvd3Mgb3IgMTYwICogYW5pbWF0ZWQuZm9yYXJyb3dzKQ0KCQlyZW5kZXJlci5yZWN0YW5nbGUoeCAvIDIgLSA0MCwgeSAvIDIgLSA3LCAyLCAxOCwJCQkNCgkJYm9keXlhdyA+IDEwIGFuZCBjdmV0MSBvciAyNSwNCgkJYm9keXlhdyA+IDEwIGFuZCBjdmV0MiBvciAyNSwNCgkJYm9keXlhdyA+IDEwIGFuZCBjdmV0MyBvciAyNSwNCgkJYm9keXlhdyA+IDEwIGFuZCAyNTUgKiBhbmltYXRlZC5mb3JhcnJvd3Mgb3IgMTYwICogYW5pbWF0ZWQuZm9yYXJyb3dzKQ0KCWVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIuYXJyb3dzKSA9PSAiT2xkIiB0aGVuDQoJCWlmIG1hbnVhbF9kaXIgPT0gMiB0aGVuDQoJYW5pbWF0ZWQuYXJyb3dfcmlnaHQgPSBsZXJwKGFuaW1hdGVkLmFycm93X3JpZ2h0LCAyNTUsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbHNlDQoJYW5pbWF0ZWQuYXJyb3dfcmlnaHQgPSBsZXJwKGFuaW1hdGVkLmFycm93X3JpZ2h0LCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZW5kDQoJaWYgbWFudWFsX2RpciA9PSAxIHRoZW4NCglhbmltYXRlZC5hcnJvd19sZWZ0ID0gbGVycChhbmltYXRlZC5hcnJvd19sZWZ0LCAyNTUsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbHNlDQoJYW5pbWF0ZWQuYXJyb3dfbGVmdCA9IGxlcnAoYW5pbWF0ZWQuYXJyb3dfbGVmdCwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCWVuZA0KCXJlbmRlcmVyLnRleHQoc2NyWzFdIC8gMiAtIDg1ICwgc2NyWzJdIC8gMiwgY3ZldDEsIGN2ZXQyLCBjdmV0MywgYW5pbWF0ZWQuYXJyb3dfbGVmdCwgIitjYiIsIG5pbCwgIjwiKSANCglyZW5kZXJlci50ZXh0KHNjclsxXSAvIDIgKyA4NSAsIHNjclsyXSAvIDIsIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIGFuaW1hdGVkLmFycm93X3JpZ2h0LCAiK2NiIiwgbmlsLCAiPiIpIA0KCWVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIuYXJyb3dzKSA9PSAiQWx3YXlzIiB0aGVuDQoJCQlpZiBtYW51YWxfZGlyID09IDIgdGhlbg0KCWFuaW1hdGVkLmFycm93X3JpZ2h0ID0gbGVycChhbmltYXRlZC5hcnJvd19yaWdodCwgMjU1LCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZWxzZQ0KCWFuaW1hdGVkLmFycm93X3JpZ2h0ID0gbGVycChhbmltYXRlZC5hcnJvd19yaWdodCwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KCWVuZA0KCWlmIG1hbnVhbF9kaXIgPT0gMSB0aGVuDQoJYW5pbWF0ZWQuYXJyb3dfbGVmdCA9IGxlcnAoYW5pbWF0ZWQuYXJyb3dfbGVmdCwgMjU1LCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQoJZWxzZQ0KCWFuaW1hdGVkLmFycm93X2xlZnQgPSBsZXJwKGFuaW1hdGVkLmFycm93X2xlZnQsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCgllbmQNCglyZW5kZXJlci50ZXh0KHNjclsxXSAvIDIgLSA1NSAsIHNjclsyXSAvIDIsIDI1NSwgMjU1LCAyNTUsIDUwICogYW5pbWF0ZWQuZm9yYXJyb3dzLCAiK2MiLCBuaWwsICI8IikgDQoJcmVuZGVyZXIudGV4dChzY3JbMV0gLyAyICsgNTUgLCBzY3JbMl0gLyAyLCAyNTUsIDI1NSwgMjU1LCA1MCAqIGFuaW1hdGVkLmZvcmFycm93cywgIitjIiwgbmlsLCAiPiIpIA0KCXJlbmRlcmVyLnRleHQoc2NyWzFdIC8gMiAtIDU1ICwgc2NyWzJdIC8gMiwgY3ZldDEsIGN2ZXQyLCBjdmV0MywgYW5pbWF0ZWQuYXJyb3dfbGVmdCwgIitjIiwgbmlsLCAiPCIpIA0KCXJlbmRlcmVyLnRleHQoc2NyWzFdIC8gMiArIDU1ICwgc2NyWzJdIC8gMiwgY3ZldDEsIGN2ZXQyLCBjdmV0MywgYW5pbWF0ZWQuYXJyb3dfcmlnaHQsICIrYyIsIG5pbCwgIj4iKSANCmVuZA0KCWVuZA0KLS0gQVJST1dTDQotLSBkYW5nZXJvdXMgaW5kaWNhdG9ycw0KaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLmNlbnRlcl9pbmRpY2F0b3JzKSA9PSAiZGFuZ2Vyb3VzIiB0aGVuDQppZiBzY3BkIH49IDAgdGhlbiANCmlmIHVpLmdldCh2aXN1YWxzX3RhYi5vbnNjb3BlKSA9PSAibGVmdCIgdGhlbiANCiAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBhbmltYXRlZC5zY29wZWRhbGlnbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIC00MCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5vbnNjb3BlKSA9PSAiYWxwaGEiIHRoZW4gDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxpZ24gPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFsaWduLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbHNlaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJyaWdodCIgdGhlbiANCiAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBhbmltYXRlZC5zY29wZWRhbGlnbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIDQwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbHNlaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJvZmYiIHRoZW4gDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxpZ24gPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFsaWduLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbmQNCmVsc2UNCiAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBhbmltYXRlZC5zY29wZWRhbGlnbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVuZA0KYW5nbGUgPSBtYXRoLm1pbig1NywgbWF0aC5hYnMoZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsUG9zZVBhcmFtZXRlciIsIDExKSoxMjAtNjApKQkNCmlmIGFuZ2xlID4gMzUgdGhlbg0KYW5pbWF0ZWQuZGVzeW5jc2l6ZSA9IGxlcnAoYW5pbWF0ZWQuZGVzeW5jc2l6ZSwgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgc3RyaW5nLnVwcGVyKGx1YW5hbWUpKSArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsIHN0cmluZy51cHBlcihsdWFidWlsZCkpICsgbWF0aC5yYW5kb20oMCwtMjApLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQplbHNlaWYgYW5nbGUgPiAxMCB0aGVuDQphbmltYXRlZC5kZXN5bmNzaXplID0gbGVycChhbmltYXRlZC5kZXN5bmNzaXplLCBhbmdsZSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZWxzZWlmIGFuZ2xlIDwgMTAgb3IgaXNfZnJlZXpldGltZSgpIHRoZW4NCmFuaW1hdGVkLmRlc3luY3NpemUgPSBsZXJwKGFuaW1hdGVkLmRlc3luY3NpemUsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVuZA0KaWYgc2hvdWxkb25mcmVlemV0aW1lIGFuZCBpc19mcmVlemV0aW1lKCkgdGhlbg0KICAgIGFuaW1hdGVkLmRlc3luY3NpemUgPSBsZXJwKGFuaW1hdGVkLmRlc3luY3NpemUsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVuZA0KZHRjaGFyZ2VkZm9yaW5kcyA9IGlzX2RlZmVuc2l2ZSBhbmQgMSBvciAwDQppZiBzd2F5KCkgPiAwIHRoZW4NCmFuaW1hdGVkLm5ld3N3YXkgPSBsZXJwKGFuaW1hdGVkLm5ld3N3YXksIHN3YXkoKSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZWxzZSANCmFuaW1hdGVkLm5ld3N3YXkgPSBsZXJwKGFuaW1hdGVkLm5ld3N3YXksIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCmVuZA0KaWYgYW5pbWF0ZWQuZGVzeW5jc2l6ZSA8IDIgb3IgYW50aV9haW1zOmdldF9jb25kaXRpb25fdHlwZSgpID09ICJXYXJtdXAiIHRoZW4NCiAgICBhbmltYXRlZC5hZGRpY3Rpb24gPSBsZXJwKGFuaW1hdGVkLmFkZGljdGlvbiwgOCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLmJhcmFscGhhID0gbGVycChhbmltYXRlZC5iYXJhbHBoYSwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZWxzZSANCiAgICBhbmltYXRlZC5hZGRpY3Rpb24gPSBsZXJwKGFuaW1hdGVkLmFkZGljdGlvbiwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLmJhcmFscGhhID0gbGVycChhbmltYXRlZC5iYXJhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KZW5kDQpyZW5kZXJlci50ZXh0KHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIHNjcl95IC8gMiArIDEyICsgYW5pbWF0ZWQuYWRkaWN0aW9uLCAyNTUsIDI1NSwgMjU1LCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi0iLCBuaWwsIHN0cmluZy51cHBlcihsdWFuYW1lKSkNCnJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzMgKyBhbmltYXRlZC5zY29wZWRhbGlnbiArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsIHN0cmluZy51cHBlcihsdWFuYW1lKSksIHNjcl95IC8gMiArIDEyICsgYW5pbWF0ZWQuYWRkaWN0aW9uLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBhbmltYXRlZC5uZXdzd2F5LCAiLSIsIG5pbCwgYW5pbWF0ZV90ZXh0KGdsb2JhbHMuY3VydGltZSgpLCBzdHJpbmcudXBwZXIobHVhYnVpbGQpLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCBhbmltYXRlZC5uZXdzd2F5ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIGN2ZXQxIC8gMS41LCBjdmV0MiAvIDEuNSwgY3ZldDMgLyAxLjUsIGFuaW1hdGVkLm5ld3N3YXkgKiBhbmltYXRlZC5zY29wZWRhbHBoYSkpDQpyZW5kZXJlci5yZWN0YW5nbGUoc2NyX3ggLyAyIC0gMzYgKyBhbmltYXRlZC5zY29wZWRhbGlnbiwgc2NyX3kgLyAyICsgMjMsIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsIHN0cmluZy51cHBlcihsdWFuYW1lKSkgKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCBzdHJpbmcudXBwZXIobHVhYnVpbGQpKSArIDgsIDUsIDAsIDAsIDAsIDI1NSAqIGFuaW1hdGVkLmJhcmFscGhhICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpDQpyZW5kZXJlci5ncmFkaWVudChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduLCBzY3JfeSAvIDIgKyAyNCwgYW5pbWF0ZWQuZGVzeW5jc2l6ZSwgMywgY3ZldDEsIGN2ZXQyLCBjdmV0MywgMjU1ICogYW5pbWF0ZWQuYmFyYWxwaGEgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgY3ZldDEgLyA0LCBjdmV0MiAvIDQsIGN2ZXQzIC8gNCwgMjU1ICogYW5pbWF0ZWQuYmFyYWxwaGEgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgdHJ1ZSkNCm9mZnNldGluZHMgPSBzY3JfeSAvIDIgKyAzMA0KaWYgdWkuZ2V0KGtleXNmb3JpbmRzLmRvdWJsZXRhcFsxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMl0pIHRoZW4gDQogICAgYW5pbWF0ZWQuZHRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuZHRhbHBoYSwyNTUsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLmhzYWxwaGEgPSBsZXJwKGFuaW1hdGVkLmhzYWxwaGEsNzUsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIHJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgKyBhbmltYXRlZC5zY29wZWRhbGlnbiwgb2Zmc2V0aW5kcywgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuZHRhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLSIsIG5pbCwgIkRPVUJMRVRBUCIpDQplbHNlDQogICAgYW5pbWF0ZWQuZHRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuZHRhbHBoYSw3NSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduLCBvZmZzZXRpbmRzLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5kdGFscGhhICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItIiwgbmlsLCAiRE9VQkxFVEFQIikNCmVuZA0KaWYgdWkuZ2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1sxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMl0pIHRoZW4gDQogICAgYW5pbWF0ZWQuaHNhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuaHNhbHBoYSwyNTUsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIHJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgKyBhbmltYXRlZC5zY29wZWRhbGlnbiArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJET1VCTEVUQVAiKSArIDIsIG9mZnNldGluZHMsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmhzYWxwaGEgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi0iLCBuaWwsICJPTlNIT1QiKQ0KZWxzZQ0KICAgIGFuaW1hdGVkLmhzYWxwaGEgPSBsZXJwKGFuaW1hdGVkLmhzYWxwaGEsNzUsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIHJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgKyBhbmltYXRlZC5zY29wZWRhbGlnbiArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJET1VCTEVUQVAiKSArIDIsIG9mZnNldGluZHMsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmhzYWxwaGEgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi0iLCBuaWwsICJPTlNIT1QiKQ0KZW5kDQppZiB1aS5nZXQoa2V5YmluZHNfdGFiLmZyZWVzdGFuZCkgYW5kIHVpLmdldChrZXliaW5kc190YWIuZnJlZXN0YW5kKSB0aGVuIA0KICAgIGFuaW1hdGVkLmZzYWxwaGEgPSBsZXJwKGFuaW1hdGVkLmZzYWxwaGEsMjU1LGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICByZW5kZXJlci50ZXh0KHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIG9mZnNldGluZHMgKyAxMCwgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuZnNhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLSIsIG5pbCwgIkZTIikNCmVsc2UNCiAgICBhbmltYXRlZC5mc2FscGhhID0gbGVycChhbmltYXRlZC5mc2FscGhhLDc1LGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICByZW5kZXJlci50ZXh0KHNjcl94IC8gMiAtIDM1ICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24sIG9mZnNldGluZHMgKyAxMCwgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuZnNhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLSIsIG5pbCwgIkZTIikNCmVuZA0KaWYgdWkuZ2V0KGtleXNmb3JpbmRzLmRtZ1sxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5kbWdbMl0pIHRoZW4gDQogICAgYW5pbWF0ZWQuZG1nYWxwaGEgPSBsZXJwKGFuaW1hdGVkLmRtZ2FscGhhLDI1NSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgcmVuZGVyZXIudGV4dChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkZTIikgKyAyLCBvZmZzZXRpbmRzICsgMTAsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmRtZ2FscGhhICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItIiwgbmlsLCAiRE1HIikNCmVsc2UNCiAgICBhbmltYXRlZC5kbWdhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuZG1nYWxwaGEsNzUsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIHJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgKyBhbmltYXRlZC5zY29wZWRhbGlnbiArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJGUyIpICsgMiwgb2Zmc2V0aW5kcyArIDEwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5kbWdhbHBoYSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLSIsIG5pbCwgIkRNRyIpDQplbmQNCnJlbmRlcmVyLnRleHQoc2NyX3ggLyAyIC0gMzUgICsgYW5pbWF0ZWQuc2NvcGVkYWxpZ24gKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiRlMiKSArIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJETUciKSArIDQsIG9mZnNldGluZHMgKyAxMCwgMjU1LCAyNTUsIDI1NSwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItIiwgbmlsLCAiTEMiKQ0KaWYgZHRjaGFyZ2VkZm9yaW5kcyA9PSAxIHRoZW4gYW5pbWF0ZWQubGNiYXIgPSBsZXJwKGFuaW1hdGVkLmxjYmFyLHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJPTlNIT1QiKSxnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpIGVsc2UgYW5pbWF0ZWQubGNiYXIgPSBsZXJwKGFuaW1hdGVkLmxjYmFyLDAsZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KSBlbmQNCnJlbmRlcmVyLnJlY3RhbmdsZShzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkZTIikgKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiRE1HIikgKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiTEMiKSArIDEwLCBvZmZzZXRpbmRzICsgMTQsIHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJPTlNIT1QiKSwgMywgMCwgMCwgMCwgMjAwICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpDQpyZW5kZXJlci5ncmFkaWVudChzY3JfeCAvIDIgLSAzNSArIGFuaW1hdGVkLnNjb3BlZGFsaWduICsgcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkZTIikgKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiRE1HIikgKyByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiTEMiKSArIDEwLCBvZmZzZXRpbmRzICsgMTQsIGFuaW1hdGVkLmxjYmFyLCAzLCBjdmV0MSwgY3ZldDIsIGN2ZXQzLCAyNTUsIGN2ZXQxIC8gNCwgY3ZldDIgLyA0LCBjdmV0MyAvIDQsIDI1NSAvIDIgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgdHJ1ZSkNCm9mZnNldGluZHMgPSBvZmZzZXRpbmRzICsgMTUNCmVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIuY2VudGVyX2luZGljYXRvcnMpID09ICJtaW5pbWFsaXNtIiB0aGVuDQogICAgbG9jYWwgeCwgeSA9IGNsaWVudC5zY3JlZW5fc2l6ZSgpDQogICAgbG9jYWwgbG9nb193LCBsb2dvX2ggPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCBzdHJpbmcuZm9ybWF0KCIlcyAlcyIsc3RyaW5nLnVwcGVyKGx1YW5hbWUpLCBzdHJpbmcudXBwZXIobHVhYnVpbGQpKSkNCiAgICBsb2NhbCByLGcsYixhID0gY3ZldDEsIGN2ZXQyLCBjdmV0MywgY3ZldDQNCiAgICBzdGF0ZSA9IGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKQ0KDQogICAgaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJyaWdodCIgdGhlbiANCiAgICBpZiBzY3BkIH49IDAgdGhlbg0KICAgICAgICBhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24gPSAxDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uID0gbGVycChhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24sIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCwgMCwgMSkNCiAgICAgICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAxLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgZW5kDQogICAgZWxzZWlmIHVpLmdldCh2aXN1YWxzX3RhYi5vbnNjb3BlKSA9PSAibGVmdCIgdGhlbiANCiAgICBpZiBzY3BkIH49IDAgdGhlbg0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAtMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0LCAwLCAxKQ0KICAgIGVsc2UNCiAgICBhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24gPSBsZXJwKGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0LCAwLCAxKQ0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGVuZA0KICAgIGVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gImFscGhhIiB0aGVuIA0KICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgaWYgc2NwZCB+PSAwIHRoZW4NCiAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDAsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBlbHNlIA0KICAgICAgICBhbmltYXRlZC5zY29wZWRhbHBoYSA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDEsIGdsb2JhbHMuZnJhbWV0aW1lKCkgKiAyNCkNCiAgICBlbmQNCiAgICBlbHNlaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJvZmYiIHRoZW4gDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgICAgICBhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24gPSBsZXJwKGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0LCAwLCAxKQ0KICAgIGVuZA0KICAgIGxvY2FsIHNjb3BlZF9mcmFjdGlvbiA9IGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiANCiAgICByZW5kZXJlci50ZXh0KHgvMiArICgobG9nb193ICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDIwLCAyNTUsIDI1NSwgMjU1LCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSAsICItYyIsIDAsICJMQUNPTklTTSAiLCAiXGEiIC4uIHJnYmFfdG9faGV4KCByLCBnLCBiLCAyNTUgKiBtYXRoLmFicyhtYXRoLmNvcyhnbG9iYWxzLmN1cnRpbWUoKSoyKSkgKiBhbmltYXRlZC5zY29wZWRhbHBoYSkgLi4gc3RyaW5nLnVwcGVyKGx1YWJ1aWxkKSkNCg0KICAgIGxvY2FsIG5leHRfYXR0YWNrID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfbG9jYWxfcGxheWVyKCksICJtX2ZsTmV4dEF0dGFjayIpDQogICAgbG9jYWwgbmV4dF9wcmltYXJ5X2F0dGFjayA9IGVudGl0eS5nZXRfcHJvcChlbnRpdHkuZ2V0X3BsYXllcl93ZWFwb24oZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSksICJtX2ZsTmV4dFByaW1hcnlBdHRhY2siKQ0KDQogICAgbG9jYWwgZHRfdG9nZ2xlZCA9IHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMV0pIGFuZCB1aS5nZXQoa2V5c2ZvcmluZHMuZG91YmxldGFwWzJdKQ0KICAgIGxvY2FsIGR0X2FjdGl2ZSA9IG5vdCAobWF0aC5tYXgobmV4dF9wcmltYXJ5X2F0dGFjaywgbmV4dF9hdHRhY2spID4gZ2xvYmFscy5jdXJ0aW1lKCkpIGFuZCB0cnVlIG9yIGZhbHNlDQoNCiAgICBpZiBkdF90b2dnbGVkIGFuZCBkdF9hY3RpdmUgdGhlbg0KICAgICAgICBhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uICsgZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiAtIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4xNSwgMCwgMSkNCiAgICBlbmQNCg0KICAgIGlmIGR0X3RvZ2dsZWQgYW5kIG5vdCBkdF9hY3RpdmUgdGhlbg0KICAgICAgICBhbmltYXRlZC5pbmFjdGl2ZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5pbmFjdGl2ZV9mcmFjdGlvbiArIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4xNSwgMCwgMSkNCiAgICBlbHNlDQogICAgICAgIGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVuZA0KDQogICAgaWYgdWkuZ2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1sxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5oaWRlc2hvdHNbMl0pIGFuZCBub3QgZHRfdG9nZ2xlZCB0aGVuDQogICAgICAgIGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiArIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4xNSwgMCwgMSkNCiAgICBlbHNlDQogICAgICAgIGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiAtIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4xNSwgMCwgMSkNCiAgICBlbmQNCg0KICAgIGlmIG1hdGgubWF4KGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24sIGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uLCBhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24pID4gMCB0aGVuDQogICAgICAgIGFuaW1hdGVkLmZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmZyYWN0aW9uICsgZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjIsIDAsIDEpDQogICAgZWxzZQ0KICAgICAgICBhbmltYXRlZC5mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5mcmFjdGlvbiAtIGdsb2JhbHMuZnJhbWV0aW1lKCkvMC4yLCAwLCAxKQ0KICAgIGVuZA0KDQogICAgbG9jYWwgZHRfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJEVCAiKQ0KICAgIGxvY2FsIHJlYWR5X3NpemUgPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiQ0hBUkdFRCIpDQogICAgcmVuZGVyZXIudGV4dCh4LzIgKyAoKGR0X3NpemUgKyByZWFkeV9zaXplICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDMwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gKiAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi1jIiwgZHRfc2l6ZSArIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiAqIHJlYWR5X3NpemUgKyAxLCAiRFQgIiwgIlxhIiAuLiByZ2JhX3RvX2hleCgxNTUsIDI1NSwgMTU1LCAyNTUgKiBhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gKiBhbmltYXRlZC5zY29wZWRhbHBoYSkgLi4gIkNIQVJHRUQiKQ0KDQogICAgbG9jYWwgY2hhcmdpbmdfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJDSEFSR0lORyIpDQogICAgbG9jYWwgcmV0ID0gYW5pbWF0ZV90ZXh0KGdsb2JhbHMuY3VydGltZSgpICogOCwgIkNIQVJHSU5HIiwgMTAwLCAyNTUsIDEwMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDI1NSwgMTAwLCAxMDAsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSANCiAgICByZW5kZXJlci50ZXh0KHgvMiArICgoZHRfc2l6ZSArIGNoYXJnaW5nX3NpemUgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMzAsIDI1NSwgMjU1LCAyNTUsIGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uICogMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItYyIsIGR0X3NpemUgKyBhbmltYXRlZC5pbmFjdGl2ZV9mcmFjdGlvbiAqIGNoYXJnaW5nX3NpemUgKyAxLCAiRFQgIiwgcmV0KQ0KDQogICAgbG9jYWwgaGlkZV9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkhJREUgIikNCiAgICBsb2NhbCBhY3RpdmVfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJBQ1RJVkUiKQ0KICAgIHJlbmRlcmVyLnRleHQoeC8yICsgKChoaWRlX3NpemUgKyBhY3RpdmVfc2l6ZSArIDIpLzIpICogc2NvcGVkX2ZyYWN0aW9uLCB5LzIgKyAzMCwgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiAqIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLWMiLCBoaWRlX3NpemUgKyBhbmltYXRlZC5oaWRlX2ZyYWN0aW9uICogYWN0aXZlX3NpemUgKyAxLCAiSElERSAiLCAiXGEiIC4uIHJnYmFfdG9faGV4KDE1NSwgMTU1LCAyMDAsIDI1NSAqIGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gKiBhbmltYXRlZC5zY29wZWRhbHBoYSkgLi4gIkFDVElWRSIpDQoNCiAgICBsb2NhbCBzdGF0ZV9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgJz4gJyAuLiBzdHJpbmcudXBwZXIoc3RhdGUpIC4uICcgPCcpDQogICAgcmVuZGVyZXIudGV4dCh4LzIgKyAoKHN0YXRlX3NpemUgKyAyKS8yKSAqIHNjb3BlZF9mcmFjdGlvbiwgeS8yICsgMzAgKyAxMCAqIGVhc2VJbk91dChhbmltYXRlZC5mcmFjdGlvbiksIDI1NSwgMjU1LCAyNTUsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAiLWMiLCAwLCAnPiAnIC4uIHN0cmluZy51cHBlcihzdGF0ZSkgLi4gJyA8JykNCmVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIuY2VudGVyX2luZGljYXRvcnMpID09ICJtb2Rlcm4iIHRoZW4NCiAgICBsb2NhbCB4LCB5ID0gY2xpZW50LnNjcmVlbl9zaXplKCkNCiAgICBsb2NhbCBsb2dvX3csIGxvZ29faCA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiYiIsICJsYWNvbmlzbcKwIikNCiAgICBsb2NhbCByLGcsYixhID0gY3ZldDEsIGN2ZXQyLCBjdmV0MywgY3ZldDQNCiAgICBzdGF0ZSA9IGFudGlfYWltczpnZXRfY29uZGl0aW9uX3R5cGUoKQ0KDQogICAgaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJyaWdodCIgdGhlbiANCiAgICBpZiBzY3BkIH49IDAgdGhlbg0KICAgICAgICBhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24gPSAxDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgICAgICBhbHBoYWZvcmxvZ28gPSAiXGFmZmZmZmZmZiINCiAgICBlbHNlDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgICAgICBhbHBoYWZvcmxvZ28gPSAiXGFmZmZmZmZmZiINCiAgICBlbmQNCiAgICBlbHNlaWYgdWkuZ2V0KHZpc3VhbHNfdGFiLm9uc2NvcGUpID09ICJsZWZ0IiB0aGVuIA0KICAgICAgICBhbHBoYWZvcmxvZ28gPSAiXGFmZmZmZmZmZiINCiAgICBpZiBzY3BkIH49IDAgdGhlbg0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAtMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0LCAwLCAxKQ0KICAgIGVsc2UNCiAgICBhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24gPSBsZXJwKGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0LCAwLCAxKQ0KICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGVuZA0KICAgIGVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gImFscGhhIiB0aGVuIA0KICAgIGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiA9IGxlcnAoYW5pbWF0ZWQuc2NvcGVkX2ZyYWN0aW9uLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQsIDAsIDEpDQogICAgaWYgc2NwZCB+PSAwIHRoZW4NCiAgICAgICAgYWxwaGFmb3Jsb2dvID0gIlxhZmZmZmZmMDAiDQogICAgYW5pbWF0ZWQuc2NvcGVkYWxwaGEgPSBsZXJwKGFuaW1hdGVkLnNjb3BlZGFscGhhLCAwLCBnbG9iYWxzLmZyYW1ldGltZSgpICogMjQpDQogICAgZWxzZSANCiAgICAgICAgYWxwaGFmb3Jsb2dvID0gIlxhZmZmZmZmZmYiDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgIGVuZA0KICAgIGVsc2VpZiB1aS5nZXQodmlzdWFsc190YWIub25zY29wZSkgPT0gIm9mZiIgdGhlbiANCiAgICAgICAgYWxwaGFmb3Jsb2dvID0gIlxhZmZmZmZmZmYiDQogICAgICAgIGFuaW1hdGVkLnNjb3BlZGFscGhhID0gbGVycChhbmltYXRlZC5zY29wZWRhbHBoYSwgMSwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0KQ0KICAgICAgICBhbmltYXRlZC5zY29wZWRfZnJhY3Rpb24gPSBsZXJwKGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiwgMCwgZ2xvYmFscy5mcmFtZXRpbWUoKSAqIDI0LCAwLCAxKQ0KICAgIGVuZA0KICAgIGxvY2FsIHNjb3BlZF9mcmFjdGlvbiA9IGFuaW1hdGVkLnNjb3BlZF9mcmFjdGlvbiANCiAgICBkYW5nZXJvdXNjb2xvciA9IHN0cmluZy5mb3JtYXQoIlxhJXMiLHJnYmFfdG9faGV4KDI1NSwyNTUsMjU1LGFuaW1hdGVkLnNjb3BlZGFscGhhKSkNCiAgICByZW5kZXJlci50ZXh0KHgvMiArICgobG9nb193ICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDIwLCAyNTUsIDI1NSwgMjU1LCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSAsICJjYiIsIDAsIHN0cmluZy5mb3JtYXQoIiVzwrAiLGFuaW1hdGVfdGV4dChnbG9iYWxzLmN1cnRpbWUoKSAqIDIuNSwgImxhY29uaXNtIiwgMjU1LCAyNTUsIDI1NSwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIGN2ZXQxLCBjdmV0MiwgY3ZldDMsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSkpDQogICAgbG9jYWwgbmV4dF9hdHRhY2sgPSBlbnRpdHkuZ2V0X3Byb3AoZW50aXR5LmdldF9sb2NhbF9wbGF5ZXIoKSwgIm1fZmxOZXh0QXR0YWNrIikNCiAgICBsb2NhbCBuZXh0X3ByaW1hcnlfYXR0YWNrID0gZW50aXR5LmdldF9wcm9wKGVudGl0eS5nZXRfcGxheWVyX3dlYXBvbihlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpKSwgIm1fZmxOZXh0UHJpbWFyeUF0dGFjayIpDQoNCiAgICBsb2NhbCBkdF90b2dnbGVkID0gdWkuZ2V0KGtleXNmb3JpbmRzLmRvdWJsZXRhcFsxXSkgYW5kIHVpLmdldChrZXlzZm9yaW5kcy5kb3VibGV0YXBbMl0pDQogICAgbG9jYWwgZHRfYWN0aXZlID0gbm90IChtYXRoLm1heChuZXh0X3ByaW1hcnlfYXR0YWNrLCBuZXh0X2F0dGFjaykgPiBnbG9iYWxzLmN1cnRpbWUoKSkNCg0KICAgIGlmIGR0X3RvZ2dsZWQgYW5kIGR0X2FjdGl2ZSB0aGVuDQogICAgICAgIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZWxzZQ0KICAgICAgICBhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuYWN0aXZlX2ZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVuZA0KDQogICAgaWYgZHRfdG9nZ2xlZCBhbmQgbm90IGR0X2FjdGl2ZSB0aGVuDQogICAgICAgIGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uICsgZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gLSBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMTUsIDAsIDEpDQogICAgZW5kDQoNCiAgICBpZiB1aS5nZXQoa2V5c2ZvcmluZHMuaGlkZXNob3RzWzFdKSBhbmQgdWkuZ2V0KGtleXNmb3JpbmRzLmhpZGVzaG90c1syXSkgYW5kIG5vdCBkdF90b2dnbGVkIHRoZW4NCiAgICAgICAgYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5oaWRlX2ZyYWN0aW9uICsgZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVsc2UNCiAgICAgICAgYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiA9IGN0eF9jbGFtcChhbmltYXRlZC5oaWRlX2ZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjE1LCAwLCAxKQ0KICAgIGVuZA0KDQogICAgaWYgbWF0aC5tYXgoYW5pbWF0ZWQuaGlkZV9mcmFjdGlvbiwgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24sIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbikgPiAwIHRoZW4NCiAgICAgICAgYW5pbWF0ZWQuZnJhY3Rpb24gPSBjdHhfY2xhbXAoYW5pbWF0ZWQuZnJhY3Rpb24gKyBnbG9iYWxzLmZyYW1ldGltZSgpLzAuMiwgMCwgMSkNCiAgICBlbHNlDQogICAgICAgIGFuaW1hdGVkLmZyYWN0aW9uID0gY3R4X2NsYW1wKGFuaW1hdGVkLmZyYWN0aW9uIC0gZ2xvYmFscy5mcmFtZXRpbWUoKS8wLjIsIDAsIDEpDQogICAgZW5kDQoNCiAgICBsb2NhbCBkdF9zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIiIpDQogICAgbG9jYWwgcmVhZHlfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJEVCIpDQogICAgcmVuZGVyZXIudGV4dCh4LzIgKyAoKGR0X3NpemUgKyByZWFkeV9zaXplICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDMwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5hY3RpdmVfZnJhY3Rpb24gKiAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi1jIiwgZHRfc2l6ZSArIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiAqIHJlYWR5X3NpemUgKyAxLCBhbmltYXRlX3RleHQoZ2xvYmFscy5jdXJ0aW1lKCkgKiAxLjUsICIiLCA1MCwgNTAsIDUwLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgY3ZldDEsIGN2ZXQyLCBjdmV0MywgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpLCAiXGEiIC4uIHJnYmFfdG9faGV4KDE1NSwgMjU1LCAxNTUsIDI1NSAqIGFuaW1hdGVkLmFjdGl2ZV9mcmFjdGlvbiAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSAuLiBhbmltYXRlX3RleHQoZ2xvYmFscy5jdXJ0aW1lKCkgKiAxLjUsICJEVCIsIDIwMCwgMjAwLCAyMDAsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhLCAyMDAsIDIwMCwgMjAwLCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSkpDQoNCiAgICBsb2NhbCBjaGFyZ2luZ19zaXplID0gcmVuZGVyZXIubWVhc3VyZV90ZXh0KCItIiwgIkRUIikNCiAgICBsb2NhbCByZXQgPSBhbmltYXRlX3RleHQoZ2xvYmFscy5jdXJ0aW1lKCkgKiAxLjUsICJEVCIsIDEwMCwgMCwgMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDEwMCwgMCwgMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpIA0KICAgIHJlbmRlcmVyLnRleHQoeC8yICsgKChkdF9zaXplICsgY2hhcmdpbmdfc2l6ZSArIDIpLzIpICogc2NvcGVkX2ZyYWN0aW9uLCB5LzIgKyAzMCwgMjU1LCAyNTUsIDI1NSwgYW5pbWF0ZWQuaW5hY3RpdmVfZnJhY3Rpb24gKiAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi1jIiwgZHRfc2l6ZSArIGFuaW1hdGVkLmluYWN0aXZlX2ZyYWN0aW9uICogY2hhcmdpbmdfc2l6ZSArIDEsICIiLCByZXQpDQoNCiAgICBsb2NhbCBoaWRlX3NpemUgPSByZW5kZXJlci5tZWFzdXJlX3RleHQoIi0iLCAiIikNCiAgICBsb2NhbCBhY3RpdmVfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICJIUyIpDQogICAgcmVuZGVyZXIudGV4dCh4LzIgKyAoKGhpZGVfc2l6ZSArIGFjdGl2ZV9zaXplICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDMwLCAyNTUsIDI1NSwgMjU1LCBhbmltYXRlZC5oaWRlX2ZyYWN0aW9uICogMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsICItYyIsIGhpZGVfc2l6ZSArIGFuaW1hdGVkLmhpZGVfZnJhY3Rpb24gKiBhY3RpdmVfc2l6ZSArIDEsIGFuaW1hdGVfdGV4dChnbG9iYWxzLmN1cnRpbWUoKSAqIDEuNSwgIkhTIiwgMjAwLCAyMDAsIDIwMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDIwMCwgMjAwLCAyMDAsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSwgIlxhIiAuLiByZ2JhX3RvX2hleCgxNTUsIDE1NSwgMjAwLCAyNTUgKiBhbmltYXRlZC5oaWRlX2ZyYWN0aW9uICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEpIC4uICIiKQ0KDQogICAgbG9jYWwgc3RhdGVfc2l6ZSA9IHJlbmRlcmVyLm1lYXN1cmVfdGV4dCgiLSIsICc+ICcgLi4gc3RyaW5nLnVwcGVyKHN0YXRlKSAuLiAnIDwnKQ0KICAgIHJlbmRlcmVyLnRleHQoeC8yICsgKChzdGF0ZV9zaXplICsgMikvMikgKiBzY29wZWRfZnJhY3Rpb24sIHkvMiArIDMwICsgMTAgKiBlYXNlSW5PdXQoYW5pbWF0ZWQuZnJhY3Rpb24pLCAyNTUsIDI1NSwgMjU1LCAyNTUgKiBhbmltYXRlZC5zY29wZWRhbHBoYSwgIi1jIiwgMCwgYW5pbWF0ZV90ZXh0KGdsb2JhbHMuY3VydGltZSgpICogMS41LCBzdHJpbmcuZm9ybWF0KCI+ICVzIDwiLCBzdHJpbmcudXBwZXIoc3RhdGUpKSwgMjAwLCAyMDAsIDIwMCwgMjU1ICogYW5pbWF0ZWQuc2NvcGVkYWxwaGEsIDIwMCwgMjAwLCAyMDAsIDI1NSAqIGFuaW1hdGVkLnNjb3BlZGFscGhhKSkNCmVuZA0KDQoNCmVuZCk="}
